{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Question 1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/Users/arromancenko/Library/Python/2.7/lib/python/site-packages/folium/__init__.py:59: UserWarning: This version of folium is the last to support Python 2. Transition to Python 3 to be able to receive updates and fixes. Check out https://python3statement.org/ for more info.\n",
      "  UserWarning\n"
     ]
    }
   ],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "from sklearn.cluster import KMeans\n",
    "import lxml\n",
    "import requests\n",
    "from geopy.geocoders import Nominatim \n",
    "import requests \n",
    "import folium \n",
    "import matplotlib.pyplot as plt\n",
    "import matplotlib.cm as cm\n",
    "import matplotlib.colors as colors"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "#preparation for request\n",
    "url=\"https://en.wikipedia.org/wiki/List_of_postal_codes_of_Canada:_M\"\n",
    "header = {\n",
    "  \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36\",\n",
    "  \"X-Requested-With\": \"XMLHttpRequest\"\n",
    "}"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighbourhood</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Postcode</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>M1B</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Malvern,Rouge</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1C</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Highland Creek,Port Union,Rouge Hill</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1E</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Morningside,West Hill,Guildwood</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1G</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Woburn</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1H</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cedarbrae</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1J</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Scarborough Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1K</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>East Birchmount Park,Ionview,Kennedy Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1L</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Oakridge,Golden Mile,Clairlea</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1M</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cliffcrest,Scarborough Village West,Cliffside</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1N</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Birch Cliff,Cliffside West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1P</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Dorset Park,Wexford Heights,Scarborough Town C...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1R</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Wexford,Maryvale</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1S</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1T</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Sullivan,Tam O'Shanter,Clarks Corners</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1V</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt North,L'Amoreaux East,Steeles East,M...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1W</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>L'Amoreaux West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1X</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Upper Rouge</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2H</th>\n",
       "      <td>North York</td>\n",
       "      <td>Hillcrest Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2J</th>\n",
       "      <td>North York</td>\n",
       "      <td>Henry Farm,Oriole,Fairview</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2K</th>\n",
       "      <td>North York</td>\n",
       "      <td>Bayview Village</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2L</th>\n",
       "      <td>North York</td>\n",
       "      <td>York Mills,Silver Hills</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2M</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale,Newtonbrook</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2N</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2P</th>\n",
       "      <td>North York</td>\n",
       "      <td>York Mills West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2R</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale West</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3A</th>\n",
       "      <td>North York</td>\n",
       "      <td>Parkwoods</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3B</th>\n",
       "      <td>North York</td>\n",
       "      <td>Don Mills North</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3C</th>\n",
       "      <td>North York</td>\n",
       "      <td>Don Mills South,Flemingdon Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3H</th>\n",
       "      <td>North York</td>\n",
       "      <td>Wilson Heights,Downsview North,Bathurst Manor</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3J</th>\n",
       "      <td>North York</td>\n",
       "      <td>York University,Northwood Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6C</th>\n",
       "      <td>York</td>\n",
       "      <td>Humewood-Cedarvale</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6E</th>\n",
       "      <td>York</td>\n",
       "      <td>Caledonia-Fairbanks</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6G</th>\n",
       "      <td>Downtown Toronto</td>\n",
       "      <td>Christie</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6H</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Dovercourt Village,Dufferin</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6J</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Little Portugal,Trinity</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6K</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Parkdale Village,Exhibition Place,Brockton</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6L</th>\n",
       "      <td>North York</td>\n",
       "      <td>Downsview,Upwood Park,North Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6M</th>\n",
       "      <td>York</td>\n",
       "      <td>Mount Dennis,Del Ray,Keelesdale,Silverthorn</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6N</th>\n",
       "      <td>York</td>\n",
       "      <td>Runnymede,The Junction North</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6P</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>High Park,The Junction South</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6R</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Roncesvalles,Parkdale</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6S</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Runnymede,Swansea</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M7A</th>\n",
       "      <td>Downtown Toronto</td>\n",
       "      <td>Queen's Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M7R</th>\n",
       "      <td>Mississauga</td>\n",
       "      <td>Canada Post Gateway Processing Centre</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M7Y</th>\n",
       "      <td>East Toronto</td>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8V</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Mimico South,Humber Bay Shores,New Toronto</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8W</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Long Branch,Alderwood</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8X</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>The Kingsway,Old Mill North,Montgomery Road</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8Y</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Royal York South East,Old Mill South,The Queen...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8Z</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>South of Bloor,Mimico NW,Royal York South West...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9A</th>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>Queen's Park</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9B</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Martin Grove,Cloverdale,Islington,West Deane P...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9C</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Eringate,Markland Wood,Old Burnhamthorpe,Bloor...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9L</th>\n",
       "      <td>North York</td>\n",
       "      <td>Humber Summit</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9M</th>\n",
       "      <td>North York</td>\n",
       "      <td>Humberlea,Emery</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9N</th>\n",
       "      <td>York</td>\n",
       "      <td>Weston</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9P</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Westmount</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9R</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsview Village,Martin Grove Gardens,St. Phi...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9V</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Silverstone,Beaumond Heights,Thistletown,Albio...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9W</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Northwest</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>103 rows × 2 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                   Borough                                      Neighbourhood\n",
       "Postcode                                                                     \n",
       "M1B            Scarborough                                      Malvern,Rouge\n",
       "M1C            Scarborough               Highland Creek,Port Union,Rouge Hill\n",
       "M1E            Scarborough                    Morningside,West Hill,Guildwood\n",
       "M1G            Scarborough                                             Woburn\n",
       "M1H            Scarborough                                          Cedarbrae\n",
       "M1J            Scarborough                                Scarborough Village\n",
       "M1K            Scarborough          East Birchmount Park,Ionview,Kennedy Park\n",
       "M1L            Scarborough                      Oakridge,Golden Mile,Clairlea\n",
       "M1M            Scarborough      Cliffcrest,Scarborough Village West,Cliffside\n",
       "M1N            Scarborough                         Birch Cliff,Cliffside West\n",
       "M1P            Scarborough  Dorset Park,Wexford Heights,Scarborough Town C...\n",
       "M1R            Scarborough                                   Wexford,Maryvale\n",
       "M1S            Scarborough                                          Agincourt\n",
       "M1T            Scarborough              Sullivan,Tam O'Shanter,Clarks Corners\n",
       "M1V            Scarborough  Agincourt North,L'Amoreaux East,Steeles East,M...\n",
       "M1W            Scarborough                                    L'Amoreaux West\n",
       "M1X            Scarborough                                        Upper Rouge\n",
       "M2H             North York                                  Hillcrest Village\n",
       "M2J             North York                         Henry Farm,Oriole,Fairview\n",
       "M2K             North York                                    Bayview Village\n",
       "M2L             North York                            York Mills,Silver Hills\n",
       "M2M             North York                             Willowdale,Newtonbrook\n",
       "M2N             North York                                   Willowdale South\n",
       "M2P             North York                                    York Mills West\n",
       "M2R             North York                                    Willowdale West\n",
       "M3A             North York                                          Parkwoods\n",
       "M3B             North York                                    Don Mills North\n",
       "M3C             North York                    Don Mills South,Flemingdon Park\n",
       "M3H             North York      Wilson Heights,Downsview North,Bathurst Manor\n",
       "M3J             North York                     York University,Northwood Park\n",
       "...                    ...                                                ...\n",
       "M6C                   York                                 Humewood-Cedarvale\n",
       "M6E                   York                                Caledonia-Fairbanks\n",
       "M6G       Downtown Toronto                                           Christie\n",
       "M6H           West Toronto                        Dovercourt Village,Dufferin\n",
       "M6J           West Toronto                            Little Portugal,Trinity\n",
       "M6K           West Toronto         Parkdale Village,Exhibition Place,Brockton\n",
       "M6L             North York                   Downsview,Upwood Park,North Park\n",
       "M6M                   York        Mount Dennis,Del Ray,Keelesdale,Silverthorn\n",
       "M6N                   York                       Runnymede,The Junction North\n",
       "M6P           West Toronto                       High Park,The Junction South\n",
       "M6R           West Toronto                              Roncesvalles,Parkdale\n",
       "M6S           West Toronto                                  Runnymede,Swansea\n",
       "M7A       Downtown Toronto                                       Queen's Park\n",
       "M7R            Mississauga              Canada Post Gateway Processing Centre\n",
       "M7Y           East Toronto  Business Reply Mail Processing Centre 969 Eastern\n",
       "M8V              Etobicoke         Mimico South,Humber Bay Shores,New Toronto\n",
       "M8W              Etobicoke                              Long Branch,Alderwood\n",
       "M8X              Etobicoke        The Kingsway,Old Mill North,Montgomery Road\n",
       "M8Y              Etobicoke  Royal York South East,Old Mill South,The Queen...\n",
       "M8Z              Etobicoke  South of Bloor,Mimico NW,Royal York South West...\n",
       "M9A           Queen's Park                                       Queen's Park\n",
       "M9B              Etobicoke  Martin Grove,Cloverdale,Islington,West Deane P...\n",
       "M9C              Etobicoke  Eringate,Markland Wood,Old Burnhamthorpe,Bloor...\n",
       "M9L             North York                                      Humber Summit\n",
       "M9M             North York                                    Humberlea,Emery\n",
       "M9N                   York                                             Weston\n",
       "M9P              Etobicoke                                          Westmount\n",
       "M9R              Etobicoke  Kingsview Village,Martin Grove Gardens,St. Phi...\n",
       "M9V              Etobicoke  Silverstone,Beaumond Heights,Thistletown,Albio...\n",
       "M9W              Etobicoke                                          Northwest\n",
       "\n",
       "[103 rows x 2 columns]"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "r = requests.get(url, headers=header)\n",
    "tables = pd.read_html(r.text)\n",
    "df=pd.DataFrame(tables[0])\n",
    "#create columns\n",
    "df.columns=['Postcode','Borough','Neighbourhood']\n",
    "df.drop([0],axis=0,inplace=True)\n",
    "df.reset_index()\n",
    "#Group with postcode and sort unassigned borough\n",
    "df.drop(df[df['Borough']==\"Not assigned\"].index,axis=0, inplace=True)\n",
    "df1=df.groupby(\"Postcode\").agg(lambda x:','.join(set(x)))\n",
    "#Deal with not assigned neighbourhood\n",
    "df1.loc[df1['Neighbourhood']==\"Not assigned\",'Neighbourhood']=df1.loc[df1['Neighbourhood']==\"Not assigned\",'Borough']\n",
    "df1.shape\n",
    "df1"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Question 2"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighbourhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Postcode</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>M1B</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Malvern,Rouge</td>\n",
       "      <td>43.806686</td>\n",
       "      <td>-79.194353</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1C</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Highland Creek,Port Union,Rouge Hill</td>\n",
       "      <td>43.784535</td>\n",
       "      <td>-79.160497</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1E</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Morningside,West Hill,Guildwood</td>\n",
       "      <td>43.763573</td>\n",
       "      <td>-79.188711</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1G</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Woburn</td>\n",
       "      <td>43.770992</td>\n",
       "      <td>-79.216917</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1H</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cedarbrae</td>\n",
       "      <td>43.773136</td>\n",
       "      <td>-79.239476</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1J</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Scarborough Village</td>\n",
       "      <td>43.744734</td>\n",
       "      <td>-79.239476</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1K</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>East Birchmount Park,Ionview,Kennedy Park</td>\n",
       "      <td>43.727929</td>\n",
       "      <td>-79.262029</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1L</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Oakridge,Golden Mile,Clairlea</td>\n",
       "      <td>43.711112</td>\n",
       "      <td>-79.284577</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1M</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Cliffcrest,Scarborough Village West,Cliffside</td>\n",
       "      <td>43.716316</td>\n",
       "      <td>-79.239476</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1N</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Birch Cliff,Cliffside West</td>\n",
       "      <td>43.692657</td>\n",
       "      <td>-79.264848</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1P</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Dorset Park,Wexford Heights,Scarborough Town C...</td>\n",
       "      <td>43.757410</td>\n",
       "      <td>-79.273304</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1R</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Wexford,Maryvale</td>\n",
       "      <td>43.750072</td>\n",
       "      <td>-79.295849</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1S</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt</td>\n",
       "      <td>43.794200</td>\n",
       "      <td>-79.262029</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1T</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Sullivan,Tam O'Shanter,Clarks Corners</td>\n",
       "      <td>43.781638</td>\n",
       "      <td>-79.304302</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1V</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Agincourt North,L'Amoreaux East,Steeles East,M...</td>\n",
       "      <td>43.815252</td>\n",
       "      <td>-79.284577</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1W</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>L'Amoreaux West</td>\n",
       "      <td>43.799525</td>\n",
       "      <td>-79.318389</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M1X</th>\n",
       "      <td>Scarborough</td>\n",
       "      <td>Upper Rouge</td>\n",
       "      <td>43.836125</td>\n",
       "      <td>-79.205636</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2H</th>\n",
       "      <td>North York</td>\n",
       "      <td>Hillcrest Village</td>\n",
       "      <td>43.803762</td>\n",
       "      <td>-79.363452</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2J</th>\n",
       "      <td>North York</td>\n",
       "      <td>Henry Farm,Oriole,Fairview</td>\n",
       "      <td>43.778517</td>\n",
       "      <td>-79.346556</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2K</th>\n",
       "      <td>North York</td>\n",
       "      <td>Bayview Village</td>\n",
       "      <td>43.786947</td>\n",
       "      <td>-79.385975</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2L</th>\n",
       "      <td>North York</td>\n",
       "      <td>York Mills,Silver Hills</td>\n",
       "      <td>43.757490</td>\n",
       "      <td>-79.374714</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2M</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale,Newtonbrook</td>\n",
       "      <td>43.789053</td>\n",
       "      <td>-79.408493</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2N</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale South</td>\n",
       "      <td>43.770120</td>\n",
       "      <td>-79.408493</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2P</th>\n",
       "      <td>North York</td>\n",
       "      <td>York Mills West</td>\n",
       "      <td>43.752758</td>\n",
       "      <td>-79.400049</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M2R</th>\n",
       "      <td>North York</td>\n",
       "      <td>Willowdale West</td>\n",
       "      <td>43.782736</td>\n",
       "      <td>-79.442259</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3A</th>\n",
       "      <td>North York</td>\n",
       "      <td>Parkwoods</td>\n",
       "      <td>43.753259</td>\n",
       "      <td>-79.329656</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3B</th>\n",
       "      <td>North York</td>\n",
       "      <td>Don Mills North</td>\n",
       "      <td>43.745906</td>\n",
       "      <td>-79.352188</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3C</th>\n",
       "      <td>North York</td>\n",
       "      <td>Don Mills South,Flemingdon Park</td>\n",
       "      <td>43.725900</td>\n",
       "      <td>-79.340923</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3H</th>\n",
       "      <td>North York</td>\n",
       "      <td>Wilson Heights,Downsview North,Bathurst Manor</td>\n",
       "      <td>43.754328</td>\n",
       "      <td>-79.442259</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M3J</th>\n",
       "      <td>North York</td>\n",
       "      <td>York University,Northwood Park</td>\n",
       "      <td>43.767980</td>\n",
       "      <td>-79.487262</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6C</th>\n",
       "      <td>York</td>\n",
       "      <td>Humewood-Cedarvale</td>\n",
       "      <td>43.693781</td>\n",
       "      <td>-79.428191</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6E</th>\n",
       "      <td>York</td>\n",
       "      <td>Caledonia-Fairbanks</td>\n",
       "      <td>43.689026</td>\n",
       "      <td>-79.453512</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6G</th>\n",
       "      <td>Downtown Toronto</td>\n",
       "      <td>Christie</td>\n",
       "      <td>43.669542</td>\n",
       "      <td>-79.422564</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6H</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Dovercourt Village,Dufferin</td>\n",
       "      <td>43.669005</td>\n",
       "      <td>-79.442259</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6J</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Little Portugal,Trinity</td>\n",
       "      <td>43.647927</td>\n",
       "      <td>-79.419750</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6K</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Parkdale Village,Exhibition Place,Brockton</td>\n",
       "      <td>43.636847</td>\n",
       "      <td>-79.428191</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6L</th>\n",
       "      <td>North York</td>\n",
       "      <td>Downsview,Upwood Park,North Park</td>\n",
       "      <td>43.713756</td>\n",
       "      <td>-79.490074</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6M</th>\n",
       "      <td>York</td>\n",
       "      <td>Mount Dennis,Del Ray,Keelesdale,Silverthorn</td>\n",
       "      <td>43.691116</td>\n",
       "      <td>-79.476013</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6N</th>\n",
       "      <td>York</td>\n",
       "      <td>Runnymede,The Junction North</td>\n",
       "      <td>43.673185</td>\n",
       "      <td>-79.487262</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6P</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>High Park,The Junction South</td>\n",
       "      <td>43.661608</td>\n",
       "      <td>-79.464763</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6R</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Roncesvalles,Parkdale</td>\n",
       "      <td>43.648960</td>\n",
       "      <td>-79.456325</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M6S</th>\n",
       "      <td>West Toronto</td>\n",
       "      <td>Runnymede,Swansea</td>\n",
       "      <td>43.651571</td>\n",
       "      <td>-79.484450</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M7A</th>\n",
       "      <td>Downtown Toronto</td>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>43.662301</td>\n",
       "      <td>-79.389494</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M7R</th>\n",
       "      <td>Mississauga</td>\n",
       "      <td>Canada Post Gateway Processing Centre</td>\n",
       "      <td>43.636966</td>\n",
       "      <td>-79.615819</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M7Y</th>\n",
       "      <td>East Toronto</td>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "      <td>43.662744</td>\n",
       "      <td>-79.321558</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8V</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Mimico South,Humber Bay Shores,New Toronto</td>\n",
       "      <td>43.605647</td>\n",
       "      <td>-79.501321</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8W</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Long Branch,Alderwood</td>\n",
       "      <td>43.602414</td>\n",
       "      <td>-79.543484</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8X</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>The Kingsway,Old Mill North,Montgomery Road</td>\n",
       "      <td>43.653654</td>\n",
       "      <td>-79.506944</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8Y</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Royal York South East,Old Mill South,The Queen...</td>\n",
       "      <td>43.636258</td>\n",
       "      <td>-79.498509</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M8Z</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>South of Bloor,Mimico NW,Royal York South West...</td>\n",
       "      <td>43.628841</td>\n",
       "      <td>-79.520999</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9A</th>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>43.667856</td>\n",
       "      <td>-79.532242</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9B</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Martin Grove,Cloverdale,Islington,West Deane P...</td>\n",
       "      <td>43.650943</td>\n",
       "      <td>-79.554724</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9C</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Eringate,Markland Wood,Old Burnhamthorpe,Bloor...</td>\n",
       "      <td>43.643515</td>\n",
       "      <td>-79.577201</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9L</th>\n",
       "      <td>North York</td>\n",
       "      <td>Humber Summit</td>\n",
       "      <td>43.756303</td>\n",
       "      <td>-79.565963</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9M</th>\n",
       "      <td>North York</td>\n",
       "      <td>Humberlea,Emery</td>\n",
       "      <td>43.724766</td>\n",
       "      <td>-79.532242</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9N</th>\n",
       "      <td>York</td>\n",
       "      <td>Weston</td>\n",
       "      <td>43.706876</td>\n",
       "      <td>-79.518188</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9P</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Westmount</td>\n",
       "      <td>43.696319</td>\n",
       "      <td>-79.532242</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9R</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Kingsview Village,Martin Grove Gardens,St. Phi...</td>\n",
       "      <td>43.688905</td>\n",
       "      <td>-79.554724</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9V</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Silverstone,Beaumond Heights,Thistletown,Albio...</td>\n",
       "      <td>43.739416</td>\n",
       "      <td>-79.588437</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>M9W</th>\n",
       "      <td>Etobicoke</td>\n",
       "      <td>Northwest</td>\n",
       "      <td>43.706748</td>\n",
       "      <td>-79.594054</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>103 rows × 4 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                   Borough                                      Neighbourhood  \\\n",
       "Postcode                                                                        \n",
       "M1B            Scarborough                                      Malvern,Rouge   \n",
       "M1C            Scarborough               Highland Creek,Port Union,Rouge Hill   \n",
       "M1E            Scarborough                    Morningside,West Hill,Guildwood   \n",
       "M1G            Scarborough                                             Woburn   \n",
       "M1H            Scarborough                                          Cedarbrae   \n",
       "M1J            Scarborough                                Scarborough Village   \n",
       "M1K            Scarborough          East Birchmount Park,Ionview,Kennedy Park   \n",
       "M1L            Scarborough                      Oakridge,Golden Mile,Clairlea   \n",
       "M1M            Scarborough      Cliffcrest,Scarborough Village West,Cliffside   \n",
       "M1N            Scarborough                         Birch Cliff,Cliffside West   \n",
       "M1P            Scarborough  Dorset Park,Wexford Heights,Scarborough Town C...   \n",
       "M1R            Scarborough                                   Wexford,Maryvale   \n",
       "M1S            Scarborough                                          Agincourt   \n",
       "M1T            Scarborough              Sullivan,Tam O'Shanter,Clarks Corners   \n",
       "M1V            Scarborough  Agincourt North,L'Amoreaux East,Steeles East,M...   \n",
       "M1W            Scarborough                                    L'Amoreaux West   \n",
       "M1X            Scarborough                                        Upper Rouge   \n",
       "M2H             North York                                  Hillcrest Village   \n",
       "M2J             North York                         Henry Farm,Oriole,Fairview   \n",
       "M2K             North York                                    Bayview Village   \n",
       "M2L             North York                            York Mills,Silver Hills   \n",
       "M2M             North York                             Willowdale,Newtonbrook   \n",
       "M2N             North York                                   Willowdale South   \n",
       "M2P             North York                                    York Mills West   \n",
       "M2R             North York                                    Willowdale West   \n",
       "M3A             North York                                          Parkwoods   \n",
       "M3B             North York                                    Don Mills North   \n",
       "M3C             North York                    Don Mills South,Flemingdon Park   \n",
       "M3H             North York      Wilson Heights,Downsview North,Bathurst Manor   \n",
       "M3J             North York                     York University,Northwood Park   \n",
       "...                    ...                                                ...   \n",
       "M6C                   York                                 Humewood-Cedarvale   \n",
       "M6E                   York                                Caledonia-Fairbanks   \n",
       "M6G       Downtown Toronto                                           Christie   \n",
       "M6H           West Toronto                        Dovercourt Village,Dufferin   \n",
       "M6J           West Toronto                            Little Portugal,Trinity   \n",
       "M6K           West Toronto         Parkdale Village,Exhibition Place,Brockton   \n",
       "M6L             North York                   Downsview,Upwood Park,North Park   \n",
       "M6M                   York        Mount Dennis,Del Ray,Keelesdale,Silverthorn   \n",
       "M6N                   York                       Runnymede,The Junction North   \n",
       "M6P           West Toronto                       High Park,The Junction South   \n",
       "M6R           West Toronto                              Roncesvalles,Parkdale   \n",
       "M6S           West Toronto                                  Runnymede,Swansea   \n",
       "M7A       Downtown Toronto                                       Queen's Park   \n",
       "M7R            Mississauga              Canada Post Gateway Processing Centre   \n",
       "M7Y           East Toronto  Business Reply Mail Processing Centre 969 Eastern   \n",
       "M8V              Etobicoke         Mimico South,Humber Bay Shores,New Toronto   \n",
       "M8W              Etobicoke                              Long Branch,Alderwood   \n",
       "M8X              Etobicoke        The Kingsway,Old Mill North,Montgomery Road   \n",
       "M8Y              Etobicoke  Royal York South East,Old Mill South,The Queen...   \n",
       "M8Z              Etobicoke  South of Bloor,Mimico NW,Royal York South West...   \n",
       "M9A           Queen's Park                                       Queen's Park   \n",
       "M9B              Etobicoke  Martin Grove,Cloverdale,Islington,West Deane P...   \n",
       "M9C              Etobicoke  Eringate,Markland Wood,Old Burnhamthorpe,Bloor...   \n",
       "M9L             North York                                      Humber Summit   \n",
       "M9M             North York                                    Humberlea,Emery   \n",
       "M9N                   York                                             Weston   \n",
       "M9P              Etobicoke                                          Westmount   \n",
       "M9R              Etobicoke  Kingsview Village,Martin Grove Gardens,St. Phi...   \n",
       "M9V              Etobicoke  Silverstone,Beaumond Heights,Thistletown,Albio...   \n",
       "M9W              Etobicoke                                          Northwest   \n",
       "\n",
       "           Latitude  Longitude  \n",
       "Postcode                        \n",
       "M1B       43.806686 -79.194353  \n",
       "M1C       43.784535 -79.160497  \n",
       "M1E       43.763573 -79.188711  \n",
       "M1G       43.770992 -79.216917  \n",
       "M1H       43.773136 -79.239476  \n",
       "M1J       43.744734 -79.239476  \n",
       "M1K       43.727929 -79.262029  \n",
       "M1L       43.711112 -79.284577  \n",
       "M1M       43.716316 -79.239476  \n",
       "M1N       43.692657 -79.264848  \n",
       "M1P       43.757410 -79.273304  \n",
       "M1R       43.750072 -79.295849  \n",
       "M1S       43.794200 -79.262029  \n",
       "M1T       43.781638 -79.304302  \n",
       "M1V       43.815252 -79.284577  \n",
       "M1W       43.799525 -79.318389  \n",
       "M1X       43.836125 -79.205636  \n",
       "M2H       43.803762 -79.363452  \n",
       "M2J       43.778517 -79.346556  \n",
       "M2K       43.786947 -79.385975  \n",
       "M2L       43.757490 -79.374714  \n",
       "M2M       43.789053 -79.408493  \n",
       "M2N       43.770120 -79.408493  \n",
       "M2P       43.752758 -79.400049  \n",
       "M2R       43.782736 -79.442259  \n",
       "M3A       43.753259 -79.329656  \n",
       "M3B       43.745906 -79.352188  \n",
       "M3C       43.725900 -79.340923  \n",
       "M3H       43.754328 -79.442259  \n",
       "M3J       43.767980 -79.487262  \n",
       "...             ...        ...  \n",
       "M6C       43.693781 -79.428191  \n",
       "M6E       43.689026 -79.453512  \n",
       "M6G       43.669542 -79.422564  \n",
       "M6H       43.669005 -79.442259  \n",
       "M6J       43.647927 -79.419750  \n",
       "M6K       43.636847 -79.428191  \n",
       "M6L       43.713756 -79.490074  \n",
       "M6M       43.691116 -79.476013  \n",
       "M6N       43.673185 -79.487262  \n",
       "M6P       43.661608 -79.464763  \n",
       "M6R       43.648960 -79.456325  \n",
       "M6S       43.651571 -79.484450  \n",
       "M7A       43.662301 -79.389494  \n",
       "M7R       43.636966 -79.615819  \n",
       "M7Y       43.662744 -79.321558  \n",
       "M8V       43.605647 -79.501321  \n",
       "M8W       43.602414 -79.543484  \n",
       "M8X       43.653654 -79.506944  \n",
       "M8Y       43.636258 -79.498509  \n",
       "M8Z       43.628841 -79.520999  \n",
       "M9A       43.667856 -79.532242  \n",
       "M9B       43.650943 -79.554724  \n",
       "M9C       43.643515 -79.577201  \n",
       "M9L       43.756303 -79.565963  \n",
       "M9M       43.724766 -79.532242  \n",
       "M9N       43.706876 -79.518188  \n",
       "M9P       43.696319 -79.532242  \n",
       "M9R       43.688905 -79.554724  \n",
       "M9V       43.739416 -79.588437  \n",
       "M9W       43.706748 -79.594054  \n",
       "\n",
       "[103 rows x 4 columns]"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Stable coordinates download\n",
    "df_geo=pd.read_csv(\"https://cocl.us/Geospatial_data\")\n",
    "#Merge coodinates with intial table\n",
    "df1['Latitude']=df_geo['Latitude'].values\n",
    "df1['Longitude']=df_geo['Longitude'].values\n",
    "df1"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Question 3"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVM9ZmFsc2U7IExfTk9fVE9VQ0g9ZmFsc2U7IExfRElTQUJMRV8zRD1mYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS4xMi40Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIi8+CiAgICA8c3R5bGU+aHRtbCwgYm9keSB7d2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlO21hcmdpbjogMDtwYWRkaW5nOiAwO308L3N0eWxlPgogICAgPHN0eWxlPiNtYXAge3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO3JpZ2h0OjA7bGVmdDowO308L3N0eWxlPgogICAgCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLAogICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgIDxzdHlsZT4jbWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgd2lkdGg6IDEwMC4wJTsKICAgICAgICBoZWlnaHQ6IDEwMC4wJTsKICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgIHRvcDogMC4wJTsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMiIgPjwvZGl2Pgo8L2JvZHk+CjxzY3JpcHQ+ICAgIAogICAgCiAgICAKICAgICAgICB2YXIgYm91bmRzID0gbnVsbDsKICAgIAoKICAgIHZhciBtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIgPSBMLm1hcCgKICAgICAgICAnbWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyJywgewogICAgICAgIGNlbnRlcjogWzQzLjY1MzIsIC03OS4zODMyXSwKICAgICAgICB6b29tOiAxMC43LAogICAgICAgIG1heEJvdW5kczogYm91bmRzLAogICAgICAgIGxheWVyczogW10sCiAgICAgICAgd29ybGRDb3B5SnVtcDogZmFsc2UsCiAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICB9KTsKCgogICAgCiAgICB2YXIgdGlsZV9sYXllcl9hMjM2N2JlOGEzMGY0MDczODVlYzg4M2ZlZmMyNzQ4MiA9IEwudGlsZUxheWVyKAogICAgICAgICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgewogICAgICAgICJhdHRyaWJ1dGlvbiI6IG51bGwsIAogICAgICAgICJkZXRlY3RSZXRpbmEiOiBmYWxzZSwgCiAgICAgICAgIm1heE5hdGl2ZVpvb20iOiAxOCwgCiAgICAgICAgIm1heFpvb20iOiAxOCwgCiAgICAgICAgIm1pblpvb20iOiAwLCAKICAgICAgICAibm9XcmFwIjogZmFsc2UsIAogICAgICAgICJvcGFjaXR5IjogMSwgCiAgICAgICAgInN1YmRvbWFpbnMiOiAiYWJjIiwgCiAgICAgICAgInRtcyI6IGZhbHNlCn0pLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTRkNDJkMjc4ZTQ1NDE0ZmJlOGFlODEzNTBiODJlOTQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My44MDY2ODYzLCAtNzkuMTk0MzUzNF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lYmIyYjhjYTRiOTc0NmIxYjA3YmZkNjc0YmRhZmQxNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lYzZhNmM5NzQxYzg0YzA5ODYyNGRiNjZhNGY3ZGQ5YiA9ICQoYDxkaXYgaWQ9Imh0bWxfZWM2YTZjOTc0MWM4NGMwOTg2MjRkYjY2YTRmN2RkOWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1hbHZlcm4sUm91Z2UsIFNjYXJib3JvdWdoPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lYmIyYjhjYTRiOTc0NmIxYjA3YmZkNjc0YmRhZmQxNy5zZXRDb250ZW50KGh0bWxfZWM2YTZjOTc0MWM4NGMwOTg2MjRkYjY2YTRmN2RkOWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTRkNDJkMjc4ZTQ1NDE0ZmJlOGFlODEzNTBiODJlOTQuYmluZFBvcHVwKHBvcHVwX2ViYjJiOGNhNGI5NzQ2YjFiMDdiZmQ2NzRiZGFmZDE3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xOTc1OTk4ZTYwNjc0MDRhYmE3MTMwY2ZlOGNkZTFkMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc4NDUzNTEsIC03OS4xNjA0OTcxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI1YWQxZGFiYjhkYTQ3NmQ5MGMzNzJmYTJlMzkwNDY0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzBkNGE0NmY3OWVjNzQ3YTA5MTE5NzVkMTUxZjQ4NDNhID0gJChgPGRpdiBpZD0iaHRtbF8wZDRhNDZmNzllYzc0N2EwOTExOTc1ZDE1MWY0ODQzYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGlnaGxhbmQgQ3JlZWssUG9ydCBVbmlvbixSb3VnZSBIaWxsLCBTY2FyYm9yb3VnaDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjVhZDFkYWJiOGRhNDc2ZDkwYzM3MmZhMmUzOTA0NjQuc2V0Q29udGVudChodG1sXzBkNGE0NmY3OWVjNzQ3YTA5MTE5NzVkMTUxZjQ4NDNhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzE5NzU5OThlNjA2NzQwNGFiYTcxMzBjZmU4Y2RlMWQwLmJpbmRQb3B1cChwb3B1cF8yNWFkMWRhYmI4ZGE0NzZkOTBjMzcyZmEyZTM5MDQ2NCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZmNlODVmOTQ3M2FiNGExYWIwMzg4MmYxYWEzZWQ2ZTQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NjM1NzI2LCAtNzkuMTg4NzExNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mOTE2ZjAyNWVhNDE0MzEwYjliZGE2MDI1ZjQ3NDkxOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83MDY5MTk3NmM4MjM0OWExYmQwYThiYjI3ZWFiOTg4NCA9ICQoYDxkaXYgaWQ9Imh0bWxfNzA2OTE5NzZjODIzNDlhMWJkMGE4YmIyN2VhYjk4ODQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1vcm5pbmdzaWRlLFdlc3QgSGlsbCxHdWlsZHdvb2QsIFNjYXJib3JvdWdoPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mOTE2ZjAyNWVhNDE0MzEwYjliZGE2MDI1ZjQ3NDkxOS5zZXRDb250ZW50KGh0bWxfNzA2OTE5NzZjODIzNDlhMWJkMGE4YmIyN2VhYjk4ODQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZmNlODVmOTQ3M2FiNGExYWIwMzg4MmYxYWEzZWQ2ZTQuYmluZFBvcHVwKHBvcHVwX2Y5MTZmMDI1ZWE0MTQzMTBiOWJkYTYwMjVmNDc0OTE5KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jMDI4MzI5MjYxYWE0NDBhOTg1NzNhZWIyMGI4MGY5NSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc3MDk5MjEsIC03OS4yMTY5MTc0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU2MjE1MmU3MDRlNDQ2YTQ5YWIwZjc5OGQ5Y2ZmMGUzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzExYTQzYzdmMWM0MzQ1ZTg4Mzc4OTE1MTk1NWVkNjU3ID0gJChgPGRpdiBpZD0iaHRtbF8xMWE0M2M3ZjFjNDM0NWU4ODM3ODkxNTE5NTVlZDY1NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V29idXJuLCBTY2FyYm9yb3VnaDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNTYyMTUyZTcwNGU0NDZhNDlhYjBmNzk4ZDljZmYwZTMuc2V0Q29udGVudChodG1sXzExYTQzYzdmMWM0MzQ1ZTg4Mzc4OTE1MTk1NWVkNjU3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2MwMjgzMjkyNjFhYTQ0MGE5ODU3M2FlYjIwYjgwZjk1LmJpbmRQb3B1cChwb3B1cF81NjIxNTJlNzA0ZTQ0NmE0OWFiMGY3OThkOWNmZjBlMykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzc2N2ExYjU1YmNhNGE2MWI3N2MzNmZkMzVkNDdhZjAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzMxMzYsIC03OS4yMzk0NzYxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RlNGQzZGNkNWYyMTRhZWRhNzBmMTUzZjkzMmUxOGM5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY2ZGFlYjU0YmJiMDQwNjY5MTdhNjhmOTQ5Nzk5M2U4ID0gJChgPGRpdiBpZD0iaHRtbF82NmRhZWI1NGJiYjA0MDY2OTE3YTY4Zjk0OTc5OTNlOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2VkYXJicmFlLCBTY2FyYm9yb3VnaDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGU0ZDNkY2Q1ZjIxNGFlZGE3MGYxNTNmOTMyZTE4Yzkuc2V0Q29udGVudChodG1sXzY2ZGFlYjU0YmJiMDQwNjY5MTdhNjhmOTQ5Nzk5M2U4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2M3NjdhMWI1NWJjYTRhNjFiNzdjMzZmZDM1ZDQ3YWYwLmJpbmRQb3B1cChwb3B1cF9kZTRkM2RjZDVmMjE0YWVkYTcwZjE1M2Y5MzJlMThjOSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOGUxMDcwNzZkMGIwNDA1ZGJhZWY4MmViZTcxZDQ3ZGQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NDQ3MzQyLCAtNzkuMjM5NDc2MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85Zjg3YTg2ODRmMzE0MTI3YTQzMTQxMjM0Mjc0NGUyNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMTdlMDc3ZDVjZjE0NmJkOTkyZWRiZmQ3OTE0YWVlYSA9ICQoYDxkaXYgaWQ9Imh0bWxfMjE3ZTA3N2Q1Y2YxNDZiZDk5MmVkYmZkNzkxNGFlZWEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNjYXJib3JvdWdoIFZpbGxhZ2UsIFNjYXJib3JvdWdoPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85Zjg3YTg2ODRmMzE0MTI3YTQzMTQxMjM0Mjc0NGUyNC5zZXRDb250ZW50KGh0bWxfMjE3ZTA3N2Q1Y2YxNDZiZDk5MmVkYmZkNzkxNGFlZWEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGUxMDcwNzZkMGIwNDA1ZGJhZWY4MmViZTcxZDQ3ZGQuYmluZFBvcHVwKHBvcHVwXzlmODdhODY4NGYzMTQxMjdhNDMxNDEyMzQyNzQ0ZTI0KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yYjM0ZTZkOTJhN2M0MDU4YTNlNDk4YTcyYTA0NjYwZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcyNzkyOTIsIC03OS4yNjIwMjk0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NkNzIzOWEzNDllZjQ4N2U5ZTA5MjQ3NTUyZWZmNTc5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFjMGM5NDk4ZTI0ZjRmZDg4ZTA0ZmE0NGRmOWZjZjExID0gJChgPGRpdiBpZD0iaHRtbF8xYzBjOTQ5OGUyNGY0ZmQ4OGUwNGZhNDRkZjlmY2YxMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RWFzdCBCaXJjaG1vdW50IFBhcmssSW9udmlldyxLZW5uZWR5IFBhcmssIFNjYXJib3JvdWdoPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jZDcyMzlhMzQ5ZWY0ODdlOWUwOTI0NzU1MmVmZjU3OS5zZXRDb250ZW50KGh0bWxfMWMwYzk0OThlMjRmNGZkODhlMDRmYTQ0ZGY5ZmNmMTEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMmIzNGU2ZDkyYTdjNDA1OGEzZTQ5OGE3MmEwNDY2MGQuYmluZFBvcHVwKHBvcHVwX2NkNzIzOWEzNDllZjQ4N2U5ZTA5MjQ3NTUyZWZmNTc5KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wMGIzNjMxMjBkZTA0ZTJlOTkwZDBiZTExYzgyMTRjMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxMTExMTcsIC03OS4yODQ1NzcyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2UyYzE1N2VlMTJjZDQxM2I4ZGE1ZThhZTk0YWY2NTAxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA5YzkwN2E1ZWU3NjQ5MjQ5YzBjYmRhNjcyYzA4YjY0ID0gJChgPGRpdiBpZD0iaHRtbF8wOWM5MDdhNWVlNzY0OTI0OWMwY2JkYTY3MmMwOGI2NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+T2FrcmlkZ2UsR29sZGVuIE1pbGUsQ2xhaXJsZWEsIFNjYXJib3JvdWdoPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lMmMxNTdlZTEyY2Q0MTNiOGRhNWU4YWU5NGFmNjUwMS5zZXRDb250ZW50KGh0bWxfMDljOTA3YTVlZTc2NDkyNDljMGNiZGE2NzJjMDhiNjQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDBiMzYzMTIwZGUwNGUyZTk5MGQwYmUxMWM4MjE0YzEuYmluZFBvcHVwKHBvcHVwX2UyYzE1N2VlMTJjZDQxM2I4ZGE1ZThhZTk0YWY2NTAxKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wMmE0NDI5ZjJkN2I0ZWVlOGE1M2VlNGRmM2EyYjE0ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxNjMxNiwgLTc5LjIzOTQ3NjFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTE5YzFlMDIzYzliNGFjMzk0Yjg4OGI0ODczYTE5NjcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTg1NzU1MGUxMjY2NGVjYjg2NjQyNzYxYWViYjJlZDcgPSAkKGA8ZGl2IGlkPSJodG1sXzU4NTc1NTBlMTI2NjRlY2I4NjY0Mjc2MWFlYmIyZWQ3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DbGlmZmNyZXN0LFNjYXJib3JvdWdoIFZpbGxhZ2UgV2VzdCxDbGlmZnNpZGUsIFNjYXJib3JvdWdoPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85MTljMWUwMjNjOWI0YWMzOTRiODg4YjQ4NzNhMTk2Ny5zZXRDb250ZW50KGh0bWxfNTg1NzU1MGUxMjY2NGVjYjg2NjQyNzYxYWViYjJlZDcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDJhNDQyOWYyZDdiNGVlZThhNTNlZTRkZjNhMmIxNGYuYmluZFBvcHVwKHBvcHVwXzkxOWMxZTAyM2M5YjRhYzM5NGI4ODhiNDg3M2ExOTY3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85YTJhNjg3MDI0OGU0MDJiYjQzOTk1ZmJlZjg2NzBjZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5MjY1NywgLTc5LjI2NDg0ODFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTVlNGRjMzZlYTc4NDQxZmFjODgyZjJkZGY3N2JhNDIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDYxNmI4ZGQyYjZiNGQ5NTk4NGYzZWUxNDA4OTljMWUgPSAkKGA8ZGl2IGlkPSJodG1sXzA2MTZiOGRkMmI2YjRkOTU5ODRmM2VlMTQwODk5YzFlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CaXJjaCBDbGlmZixDbGlmZnNpZGUgV2VzdCwgU2NhcmJvcm91Z2g8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U1ZTRkYzM2ZWE3ODQ0MWZhYzg4MmYyZGRmNzdiYTQyLnNldENvbnRlbnQoaHRtbF8wNjE2YjhkZDJiNmI0ZDk1OTg0ZjNlZTE0MDg5OWMxZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85YTJhNjg3MDI0OGU0MDJiYjQzOTk1ZmJlZjg2NzBjZS5iaW5kUG9wdXAocG9wdXBfZTVlNGRjMzZlYTc4NDQxZmFjODgyZjJkZGY3N2JhNDIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZkMWJlNTgzNjZmYzRiYjE4ZTJiY2MxZmNkOWI5YTJmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU3NDA5NiwgLTc5LjI3MzMwNF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hNWY2N2RkZDRlN2U0M2MxOGFhZjYzZDA1YmNkYmRlYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kOTkyYzNlMjZkNzg0MzhhYjkyZTNiNjY1NGVjNDFhMCA9ICQoYDxkaXYgaWQ9Imh0bWxfZDk5MmMzZTI2ZDc4NDM4YWI5MmUzYjY2NTRlYzQxYTAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvcnNldCBQYXJrLFdleGZvcmQgSGVpZ2h0cyxTY2FyYm9yb3VnaCBUb3duIENlbnRyZSwgU2NhcmJvcm91Z2g8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2E1ZjY3ZGRkNGU3ZTQzYzE4YWFmNjNkMDViY2RiZGVhLnNldENvbnRlbnQoaHRtbF9kOTkyYzNlMjZkNzg0MzhhYjkyZTNiNjY1NGVjNDFhMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9mZDFiZTU4MzY2ZmM0YmIxOGUyYmNjMWZjZDliOWEyZi5iaW5kUG9wdXAocG9wdXBfYTVmNjdkZGQ0ZTdlNDNjMThhYWY2M2QwNWJjZGJkZWEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2NkMTE4YjZhYTAzZTQ2YTZiYThiN2NjOWY5YTI2YjFiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzUwMDcxNSwgLTc5LjI5NTg0OTFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTFjOGZiNDYzN2VjNDJkOWFkZTA3MTA1N2EzNmMzZGIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDI3MzQxYjM4MTc0NGIyYWI1YjRlNzQyNGUxMjU5NjMgPSAkKGA8ZGl2IGlkPSJodG1sX2QyNzM0MWIzODE3NDRiMmFiNWI0ZTc0MjRlMTI1OTYzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XZXhmb3JkLE1hcnl2YWxlLCBTY2FyYm9yb3VnaDwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTFjOGZiNDYzN2VjNDJkOWFkZTA3MTA1N2EzNmMzZGIuc2V0Q29udGVudChodG1sX2QyNzM0MWIzODE3NDRiMmFiNWI0ZTc0MjRlMTI1OTYzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NkMTE4YjZhYTAzZTQ2YTZiYThiN2NjOWY5YTI2YjFiLmJpbmRQb3B1cChwb3B1cF9hMWM4ZmI0NjM3ZWM0MmQ5YWRlMDcxMDU3YTM2YzNkYikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTVhZjNjYzhiODhjNGE1Nzg2ZWQ4MjcxYmQwY2NhODAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43OTQyMDAzLCAtNzkuMjYyMDI5NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85N2E4ZjFiMzlhM2Q0NTdmOTU3OWYzNmY2MjJkYjhhZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83NDk4ZWEzMjcyOGI0YWM4ODk5ZmJlNWI1MjI3YzY2OSA9ICQoYDxkaXYgaWQ9Imh0bWxfNzQ5OGVhMzI3MjhiNGFjODg5OWZiZTViNTIyN2M2NjkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFnaW5jb3VydCwgU2NhcmJvcm91Z2g8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzk3YThmMWIzOWEzZDQ1N2Y5NTc5ZjM2ZjYyMmRiOGFlLnNldENvbnRlbnQoaHRtbF83NDk4ZWEzMjcyOGI0YWM4ODk5ZmJlNWI1MjI3YzY2OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xNWFmM2NjOGI4OGM0YTU3ODZlZDgyNzFiZDBjY2E4MC5iaW5kUG9wdXAocG9wdXBfOTdhOGYxYjM5YTNkNDU3Zjk1NzlmMzZmNjIyZGI4YWUpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzg3MjExYmUyZWUyOTQ2ZDRiZDFkZDUwZjdjMjBlMmE1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzgxNjM3NSwgLTc5LjMwNDMwMjFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzYyMjcwYjExZTI3NDkxMjg3MzRkMWRlOTQ1NjBlZDYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTJjNzc0MWUyOWIyNGYzMWFkYzIxM2E1NTY5OTdlMjYgPSAkKGA8ZGl2IGlkPSJodG1sXzUyYzc3NDFlMjliMjRmMzFhZGMyMTNhNTU2OTk3ZTI2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdWxsaXZhbixUYW0gTyYjMzk7U2hhbnRlcixDbGFya3MgQ29ybmVycywgU2NhcmJvcm91Z2g8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzc2MjI3MGIxMWUyNzQ5MTI4NzM0ZDFkZTk0NTYwZWQ2LnNldENvbnRlbnQoaHRtbF81MmM3NzQxZTI5YjI0ZjMxYWRjMjEzYTU1Njk5N2UyNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84NzIxMWJlMmVlMjk0NmQ0YmQxZGQ1MGY3YzIwZTJhNS5iaW5kUG9wdXAocG9wdXBfNzYyMjcwYjExZTI3NDkxMjg3MzRkMWRlOTQ1NjBlZDYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzBhNWJkYTViYTVjMzQxNjA5ZDk3MjRlMDE1NTZhZDQwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuODE1MjUyMiwgLTc5LjI4NDU3NzJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDUyYmIwODliZDVkNDJhYmJjYjMyNzc0MWExMGZjNDYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzZlZjZmNmM4ZGMyNDdlY2E5YjUwY2MzNDI0NDNiNWMgPSAkKGA8ZGl2IGlkPSJodG1sXzc2ZWY2ZjZjOGRjMjQ3ZWNhOWI1MGNjMzQyNDQzYjVjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BZ2luY291cnQgTm9ydGgsTCYjMzk7QW1vcmVhdXggRWFzdCxTdGVlbGVzIEVhc3QsTWlsbGlrZW4sIFNjYXJib3JvdWdoPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80NTJiYjA4OWJkNWQ0MmFiYmNiMzI3NzQxYTEwZmM0Ni5zZXRDb250ZW50KGh0bWxfNzZlZjZmNmM4ZGMyNDdlY2E5YjUwY2MzNDI0NDNiNWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMGE1YmRhNWJhNWMzNDE2MDlkOTcyNGUwMTU1NmFkNDAuYmluZFBvcHVwKHBvcHVwXzQ1MmJiMDg5YmQ1ZDQyYWJiY2IzMjc3NDFhMTBmYzQ2KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jOWI0ODY2ZTZjNTM0NGVlOTZiYzBlMzYwMWNhZWQyZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc5OTUyNTIsIC03OS4zMTgzODg3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2QzYzdlM2EyZDllYTRkZDI5MDcwYTkwYzdjZjkyOGE3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEyMDBkNjI4MWJmNTRkMzZiNjIzNzZiMmZhMWU5MTZmID0gJChgPGRpdiBpZD0iaHRtbF8xMjAwZDYyODFiZjU0ZDM2YjYyMzc2YjJmYTFlOTE2ZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TCYjMzk7QW1vcmVhdXggV2VzdCwgU2NhcmJvcm91Z2g8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QzYzdlM2EyZDllYTRkZDI5MDcwYTkwYzdjZjkyOGE3LnNldENvbnRlbnQoaHRtbF8xMjAwZDYyODFiZjU0ZDM2YjYyMzc2YjJmYTFlOTE2Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jOWI0ODY2ZTZjNTM0NGVlOTZiYzBlMzYwMWNhZWQyZS5iaW5kUG9wdXAocG9wdXBfZDNjN2UzYTJkOWVhNGRkMjkwNzBhOTBjN2NmOTI4YTcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZhODRjYzEyNGVjMDRmY2ZiZTE3YzA5YjliYmNlZDczID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuODM2MTI0NywgLTc5LjIwNTYzNjFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODQ5YzQ1MThkYTY5NGJjOGFhZDUwNDk1MWU3ODk1NzQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDBmYTEyZmI5MjcwNDk3YTgwYzY4NzNjMGFjMDQ3NDUgPSAkKGA8ZGl2IGlkPSJodG1sXzAwZmExMmZiOTI3MDQ5N2E4MGM2ODczYzBhYzA0NzQ1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5VcHBlciBSb3VnZSwgU2NhcmJvcm91Z2g8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzg0OWM0NTE4ZGE2OTRiYzhhYWQ1MDQ5NTFlNzg5NTc0LnNldENvbnRlbnQoaHRtbF8wMGZhMTJmYjkyNzA0OTdhODBjNjg3M2MwYWMwNDc0NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9mYTg0Y2MxMjRlYzA0ZmNmYmUxN2MwOWI5YmJjZWQ3My5iaW5kUG9wdXAocG9wdXBfODQ5YzQ1MThkYTY5NGJjOGFhZDUwNDk1MWU3ODk1NzQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzJiNzc4MjA4ZmE2MzRiNDhhYjZmYzY4ODU0MTk1ZGI0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuODAzNzYyMiwgLTc5LjM2MzQ1MTddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDhkZWU4YjIyZDIyNDNkNDg0MmE4NDEyMzljYmVlMDEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzhhNTVmNzU2OTYyNDkxMzgzZjZjZjAzNjFlYWE2M2QgPSAkKGA8ZGl2IGlkPSJodG1sXzM4YTU1Zjc1Njk2MjQ5MTM4M2Y2Y2YwMzYxZWFhNjNkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IaWxsY3Jlc3QgVmlsbGFnZSwgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDhkZWU4YjIyZDIyNDNkNDg0MmE4NDEyMzljYmVlMDEuc2V0Q29udGVudChodG1sXzM4YTU1Zjc1Njk2MjQ5MTM4M2Y2Y2YwMzYxZWFhNjNkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzJiNzc4MjA4ZmE2MzRiNDhhYjZmYzY4ODU0MTk1ZGI0LmJpbmRQb3B1cChwb3B1cF80OGRlZThiMjJkMjI0M2Q0ODQyYTg0MTIzOWNiZWUwMSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODhlMmRkY2Q1NzA0NDkwZDhhNjI4ZTVmZmZmOTNlNWYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43Nzg1MTc1LCAtNzkuMzQ2NTU1N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zOWJlMWQzOTc0MGQ0ZGRhOWYwNzhhNGFmMzk3N2MzYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wY2M0YjQwYzcyYjI0NTcxOWQ2OWQxNWYyZDgyMTRmNyA9ICQoYDxkaXYgaWQ9Imh0bWxfMGNjNGI0MGM3MmIyNDU3MTlkNjlkMTVmMmQ4MjE0ZjciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhlbnJ5IEZhcm0sT3Jpb2xlLEZhaXJ2aWV3LCBOb3J0aCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zOWJlMWQzOTc0MGQ0ZGRhOWYwNzhhNGFmMzk3N2MzYS5zZXRDb250ZW50KGh0bWxfMGNjNGI0MGM3MmIyNDU3MTlkNjlkMTVmMmQ4MjE0ZjcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODhlMmRkY2Q1NzA0NDkwZDhhNjI4ZTVmZmZmOTNlNWYuYmluZFBvcHVwKHBvcHVwXzM5YmUxZDM5NzQwZDRkZGE5ZjA3OGE0YWYzOTc3YzNhKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85ZTBhY2M3ZTBiMTc0NmE2YWEyMDVhN2NlYmE3MzBkZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc4Njk0NzMsIC03OS4zODU5NzVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzQ1YjkxYjU3NzM4NDJjYThjMDZiNDVjZGRlZjEzZGYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzczMzM2ODAxY2Y2NDVjNmFjMGM1MTc1ZDMyNjA4MGIgPSAkKGA8ZGl2IGlkPSJodG1sXzM3MzMzNjgwMWNmNjQ1YzZhYzBjNTE3NWQzMjYwODBiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CYXl2aWV3IFZpbGxhZ2UsIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2M0NWI5MWI1NzczODQyY2E4YzA2YjQ1Y2RkZWYxM2RmLnNldENvbnRlbnQoaHRtbF8zNzMzMzY4MDFjZjY0NWM2YWMwYzUxNzVkMzI2MDgwYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85ZTBhY2M3ZTBiMTc0NmE2YWEyMDVhN2NlYmE3MzBkZS5iaW5kUG9wdXAocG9wdXBfYzQ1YjkxYjU3NzM4NDJjYThjMDZiNDVjZGRlZjEzZGYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzFlNDBiYTExYjVkYjRlODI4MmFiODQ4NDc0NjY4ZWU0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU3NDkwMiwgLTc5LjM3NDcxNDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjY3Yzg3NjdlOWNiNDU1NGEzMjBmYzQ1YmM1OGUxNmYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODJlZTM5YjE4ZDUxNGQ3Y2EyYzk5OWJjMGRhNzc4OWQgPSAkKGA8ZGl2IGlkPSJodG1sXzgyZWUzOWIxOGQ1MTRkN2NhMmM5OTliYzBkYTc3ODlkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Zb3JrIE1pbGxzLFNpbHZlciBIaWxscywgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjY3Yzg3NjdlOWNiNDU1NGEzMjBmYzQ1YmM1OGUxNmYuc2V0Q29udGVudChodG1sXzgyZWUzOWIxOGQ1MTRkN2NhMmM5OTliYzBkYTc3ODlkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzFlNDBiYTExYjVkYjRlODI4MmFiODQ4NDc0NjY4ZWU0LmJpbmRQb3B1cChwb3B1cF9mNjdjODc2N2U5Y2I0NTU0YTMyMGZjNDViYzU4ZTE2ZikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzFiMTFlZjM2YWEyNGNhYzk1ZjYwNThiMzU2ODVhMjUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43ODkwNTMsIC03OS40MDg0OTI4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhlYzk0NTUwZmViYjQ1MGJhODFhZjhiMWJiMTJhY2RhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFlZTEzNjZhZTY1NTRjYjE4M2U1ODg5MzU3ZjlkNWZkID0gJChgPGRpdiBpZD0iaHRtbF8xZWUxMzY2YWU2NTU0Y2IxODNlNTg4OTM1N2Y5ZDVmZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2lsbG93ZGFsZSxOZXd0b25icm9vaywgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGVjOTQ1NTBmZWJiNDUwYmE4MWFmOGIxYmIxMmFjZGEuc2V0Q29udGVudChodG1sXzFlZTEzNjZhZTY1NTRjYjE4M2U1ODg5MzU3ZjlkNWZkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzcxYjExZWYzNmFhMjRjYWM5NWY2MDU4YjM1Njg1YTI1LmJpbmRQb3B1cChwb3B1cF84ZWM5NDU1MGZlYmI0NTBiYTgxYWY4YjFiYjEyYWNkYSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODA2YzZmOTc4MTkwNDY0MDhkZmQzMTkzOTBmNTc4MWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzAxMTk5LCAtNzkuNDA4NDkyOF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lNzk3MTI4N2VmYzk0MzEzOGYyZWNjMzdlNWNkZGE5ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mMzA0NWMwZGVmNzM0ZDhhOWEwNjU1YWIyNTBjM2M5OSA9ICQoYDxkaXYgaWQ9Imh0bWxfZjMwNDVjMGRlZjczNGQ4YTlhMDY1NWFiMjUwYzNjOTkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldpbGxvd2RhbGUgU291dGgsIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U3OTcxMjg3ZWZjOTQzMTM4ZjJlY2MzN2U1Y2RkYTlkLnNldENvbnRlbnQoaHRtbF9mMzA0NWMwZGVmNzM0ZDhhOWEwNjU1YWIyNTBjM2M5OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84MDZjNmY5NzgxOTA0NjQwOGRmZDMxOTM5MGY1NzgxZS5iaW5kUG9wdXAocG9wdXBfZTc5NzEyODdlZmM5NDMxMzhmMmVjYzM3ZTVjZGRhOWQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzViMDJlZGQ0MWRlNTRjNGJiMjc4NjdlODM1MzY3NzAzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzUyNzU4MywgLTc5LjQwMDA0OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjM5YTgwNzhiOWYyNDQ3NGFiZGJmMTM2N2U4YjYwNTQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2VkNTI5NDAyMTlhNGI3MmE1NzVjMjQ0YjM4OGRlNWUgPSAkKGA8ZGl2IGlkPSJodG1sX2NlZDUyOTQwMjE5YTRiNzJhNTc1YzI0NGIzODhkZTVlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Zb3JrIE1pbGxzIFdlc3QsIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzYzOWE4MDc4YjlmMjQ0NzRhYmRiZjEzNjdlOGI2MDU0LnNldENvbnRlbnQoaHRtbF9jZWQ1Mjk0MDIxOWE0YjcyYTU3NWMyNDRiMzg4ZGU1ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81YjAyZWRkNDFkZTU0YzRiYjI3ODY3ZTgzNTM2NzcwMy5iaW5kUG9wdXAocG9wdXBfNjM5YTgwNzhiOWYyNDQ3NGFiZGJmMTM2N2U4YjYwNTQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI0ZjczZmE2YTkwNzRmYjRiNTFkMWYyNDZhMDFkNTQyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzgyNzM2NCwgLTc5LjQ0MjI1OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2I3NmI1MDAxNTRhNGI2ZTllZjljZTVhNzllYzk1MzEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjE0ZDhlYTA4ZWUyNDJkMWI3YzBkODQ2ZDliNGU2M2EgPSAkKGA8ZGl2IGlkPSJodG1sX2YxNGQ4ZWEwOGVlMjQyZDFiN2MwZDg0NmQ5YjRlNjNhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XaWxsb3dkYWxlIFdlc3QsIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdiNzZiNTAwMTU0YTRiNmU5ZWY5Y2U1YTc5ZWM5NTMxLnNldENvbnRlbnQoaHRtbF9mMTRkOGVhMDhlZTI0MmQxYjdjMGQ4NDZkOWI0ZTYzYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yNGY3M2ZhNmE5MDc0ZmI0YjUxZDFmMjQ2YTAxZDU0Mi5iaW5kUG9wdXAocG9wdXBfN2I3NmI1MDAxNTRhNGI2ZTllZjljZTVhNzllYzk1MzEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzYyNjIyNmI4NGEzZTRhNGVhOTk2NDEzMWI2Y2M2ZTc4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzUzMjU4NiwgLTc5LjMyOTY1NjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjg1YWE0NTVhNDA5NGNkN2E0ZGZlYzUxY2MwYmY5MzggPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDQ1MjE2ZDNjMmI4NDEzNzljYWYxMjdkZDA0YTBjYTUgPSAkKGA8ZGl2IGlkPSJodG1sX2Q0NTIxNmQzYzJiODQxMzc5Y2FmMTI3ZGQwNGEwY2E1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QYXJrd29vZHMsIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI4NWFhNDU1YTQwOTRjZDdhNGRmZWM1MWNjMGJmOTM4LnNldENvbnRlbnQoaHRtbF9kNDUyMTZkM2MyYjg0MTM3OWNhZjEyN2RkMDRhMGNhNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82MjYyMjZiODRhM2U0YTRlYTk5NjQxMzFiNmNjNmU3OC5iaW5kUG9wdXAocG9wdXBfMjg1YWE0NTVhNDA5NGNkN2E0ZGZlYzUxY2MwYmY5MzgpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQzZmQzZTcyNGM5YzRmNzJiNzE0NGEzYzdmNDZhNjI4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzQ1OTA1OCwgLTc5LjM1MjE4OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82MjBlZWI2NTI1YWE0ZTU3YTRhZGM1ZDRmMDQ0ZGFmNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kMGY0MTQ4ZTgxZGY0YTdjOTRjNjU5NGU3NWVhZWZhYyA9ICQoYDxkaXYgaWQ9Imh0bWxfZDBmNDE0OGU4MWRmNGE3Yzk0YzY1OTRlNzVlYWVmYWMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvbiBNaWxscyBOb3J0aCwgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjIwZWViNjUyNWFhNGU1N2E0YWRjNWQ0ZjA0NGRhZjcuc2V0Q29udGVudChodG1sX2QwZjQxNDhlODFkZjRhN2M5NGM2NTk0ZTc1ZWFlZmFjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzQzZmQzZTcyNGM5YzRmNzJiNzE0NGEzYzdmNDZhNjI4LmJpbmRQb3B1cChwb3B1cF82MjBlZWI2NTI1YWE0ZTU3YTRhZGM1ZDRmMDQ0ZGFmNykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOWZmYzRiMjZkZTkwNDcyNGI0OTlkOGE4ZGExMGU3MGEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MjU4OTk3LCAtNzkuMzQwOTIzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgxZWE1M2IzNTNjMzQwY2ZiMjIyYjIwODdmMTU3OWE3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY5ODUzMjA0NmFiMTRhMWU4NjA3NjM0Yjg4ZmViMTdkID0gJChgPGRpdiBpZD0iaHRtbF82OTg1MzIwNDZhYjE0YTFlODYwNzYzNGI4OGZlYjE3ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG9uIE1pbGxzIFNvdXRoLEZsZW1pbmdkb24gUGFyaywgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODFlYTUzYjM1M2MzNDBjZmIyMjJiMjA4N2YxNTc5YTcuc2V0Q29udGVudChodG1sXzY5ODUzMjA0NmFiMTRhMWU4NjA3NjM0Yjg4ZmViMTdkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzlmZmM0YjI2ZGU5MDQ3MjRiNDk5ZDhhOGRhMTBlNzBhLmJpbmRQb3B1cChwb3B1cF84MWVhNTNiMzUzYzM0MGNmYjIyMmIyMDg3ZjE1NzlhNykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTUyNjA0NGQyZTgxNGRkZDg5ZWI3Y2VkMTMyY2Q0NDUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NTQzMjgzLCAtNzkuNDQyMjU5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83NTQwZTY0MTk2NzU0NTY0OTkxYmJhOWFjN2YxM2U1MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84ZTBmMjAyMGRmMDA0YTgwYTkxZGVjMjJlMmUxZWZlZiA9ICQoYDxkaXYgaWQ9Imh0bWxfOGUwZjIwMjBkZjAwNGE4MGE5MWRlYzIyZTJlMWVmZWYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldpbHNvbiBIZWlnaHRzLERvd25zdmlldyBOb3J0aCxCYXRodXJzdCBNYW5vciwgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzU0MGU2NDE5Njc1NDU2NDk5MWJiYTlhYzdmMTNlNTIuc2V0Q29udGVudChodG1sXzhlMGYyMDIwZGYwMDRhODBhOTFkZWMyMmUyZTFlZmVmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2E1MjYwNDRkMmU4MTRkZGQ4OWViN2NlZDEzMmNkNDQ1LmJpbmRQb3B1cChwb3B1cF83NTQwZTY0MTk2NzU0NTY0OTkxYmJhOWFjN2YxM2U1MikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzIyZGI3YTM0OGRjNDNkZjlmMjBiMDg4NmFhZjAxZDIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43Njc5ODAzLCAtNzkuNDg3MjYxOV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iMjc3MjBiOTc5OGM0NWEyOWY2OGM4ZGRjZDgyMjlmYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zNWNmMWQyMjc3MWU0ZmIzODQ0YWY5NzU2OWQwYTI5YyA9ICQoYDxkaXYgaWQ9Imh0bWxfMzVjZjFkMjI3NzFlNGZiMzg0NGFmOTc1NjlkMGEyOWMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPllvcmsgVW5pdmVyc2l0eSxOb3J0aHdvb2QgUGFyaywgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjI3NzIwYjk3OThjNDVhMjlmNjhjOGRkY2Q4MjI5ZmMuc2V0Q29udGVudChodG1sXzM1Y2YxZDIyNzcxZTRmYjM4NDRhZjk3NTY5ZDBhMjljKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzMyMmRiN2EzNDhkYzQzZGY5ZjIwYjA4ODZhYWYwMWQyLmJpbmRQb3B1cChwb3B1cF9iMjc3MjBiOTc5OGM0NWEyOWY2OGM4ZGRjZDgyMjlmYykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTFmYTZiMDdhMzA3NGM5M2E1MmZlNzUzMmNjMGZlYzQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43Mzc0NzMyLCAtNzkuNDY0NzYzM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mZWQ5ZWM4ZTlhODA0OTZiODI2OWY4NjJhZGUxYTczYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84ZDk0ODhkMjdjMTE0MTUwODJmYzdiMjFkYTYwZjJjZiA9ICQoYDxkaXYgaWQ9Imh0bWxfOGQ5NDg4ZDI3YzExNDE1MDgyZmM3YjIxZGE2MGYyY2YiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvd25zdmlldyBFYXN0LENGQiBUb3JvbnRvLCBOb3J0aCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mZWQ5ZWM4ZTlhODA0OTZiODI2OWY4NjJhZGUxYTczYS5zZXRDb250ZW50KGh0bWxfOGQ5NDg4ZDI3YzExNDE1MDgyZmM3YjIxZGE2MGYyY2YpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTFmYTZiMDdhMzA3NGM5M2E1MmZlNzUzMmNjMGZlYzQuYmluZFBvcHVwKHBvcHVwX2ZlZDllYzhlOWE4MDQ5NmI4MjY5Zjg2MmFkZTFhNzNhKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85ZGEyYzVjOWNiYzk0OTgwYjFiMjM1Mzk4OGIyOWIzNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjczOTAxNDYsIC03OS41MDY5NDM2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdjODRlZjRiNGIzMzQyMzZhMmU2OTExZTczZmQ3ZTM3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2VmMWQyYjU2NDMzOTRkOTk5ZjM5ODA3MmM4NjUxYzJjID0gJChgPGRpdiBpZD0iaHRtbF9lZjFkMmI1NjQzMzk0ZDk5OWYzOTgwNzJjODY1MWMyYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG93bnN2aWV3IFdlc3QsIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdjODRlZjRiNGIzMzQyMzZhMmU2OTExZTczZmQ3ZTM3LnNldENvbnRlbnQoaHRtbF9lZjFkMmI1NjQzMzk0ZDk5OWYzOTgwNzJjODY1MWMyYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85ZGEyYzVjOWNiYzk0OTgwYjFiMjM1Mzk4OGIyOWIzNS5iaW5kUG9wdXAocG9wdXBfN2M4NGVmNGI0YjMzNDIzNmEyZTY5MTFlNzNmZDdlMzcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzBiZGIxOWVjMDNlMzQyMDQ5ZWZmODg4Mzg5YzI1NjBkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzI4NDk2NCwgLTc5LjQ5NTY5NzRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTI0YjEzNDVkZDhiNDdhZGI1ZTdmMWNjNzU4NjcwODkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmIxMzMzNjYxOTMwNDY1OWI5MDg0Mjk4ZTIyY2M5ZjMgPSAkKGA8ZGl2IGlkPSJodG1sXzJiMTMzMzY2MTkzMDQ2NTliOTA4NDI5OGUyMmNjOWYzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb3duc3ZpZXcgQ2VudHJhbCwgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTI0YjEzNDVkZDhiNDdhZGI1ZTdmMWNjNzU4NjcwODkuc2V0Q29udGVudChodG1sXzJiMTMzMzY2MTkzMDQ2NTliOTA4NDI5OGUyMmNjOWYzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzBiZGIxOWVjMDNlMzQyMDQ5ZWZmODg4Mzg5YzI1NjBkLmJpbmRQb3B1cChwb3B1cF9hMjRiMTM0NWRkOGI0N2FkYjVlN2YxY2M3NTg2NzA4OSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNjI4MDY4YTM0YjUzNDFiYmFlNTkxNzYxZTNjOGQ5ODYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NjE2MzEzLCAtNzkuNTIwOTk5NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yNjdiMzQ2MTM2ZGI0MmU3YWU4ZDVlOTI1Yjk1ODMxYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82MTNjMjUxMzRiY2I0NWEzYTJkYjQ3ZThjYjIxN2Q0NSA9ICQoYDxkaXYgaWQ9Imh0bWxfNjEzYzI1MTM0YmNiNDVhM2EyZGI0N2U4Y2IyMTdkNDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvd25zdmlldyBOb3J0aHdlc3QsIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI2N2IzNDYxMzZkYjQyZTdhZThkNWU5MjViOTU4MzFjLnNldENvbnRlbnQoaHRtbF82MTNjMjUxMzRiY2I0NWEzYTJkYjQ3ZThjYjIxN2Q0NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82MjgwNjhhMzRiNTM0MWJiYWU1OTE3NjFlM2M4ZDk4Ni5iaW5kUG9wdXAocG9wdXBfMjY3YjM0NjEzNmRiNDJlN2FlOGQ1ZTkyNWI5NTgzMWMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzY4ODVmMzQzNTc5ZjRmOTE5NDZkYjFjNWJmMmNlZWYwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzI1ODgyMywgLTc5LjMxNTU3MTZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTZmZTY5ODMwY2MxNGU1MTgyZjg1OWYwMDgzNDFmZDcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWE1ZTlmNGU5NDc2NGFmYzljZDY3NDgxMzU4NGRiNmMgPSAkKGA8ZGl2IGlkPSJodG1sXzFhNWU5ZjRlOTQ3NjRhZmM5Y2Q2NzQ4MTM1ODRkYjZjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5WaWN0b3JpYSBWaWxsYWdlLCBOb3J0aCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xNmZlNjk4MzBjYzE0ZTUxODJmODU5ZjAwODM0MWZkNy5zZXRDb250ZW50KGh0bWxfMWE1ZTlmNGU5NDc2NGFmYzljZDY3NDgxMzU4NGRiNmMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjg4NWYzNDM1NzlmNGY5MTk0NmRiMWM1YmYyY2VlZjAuYmluZFBvcHVwKHBvcHVwXzE2ZmU2OTgzMGNjMTRlNTE4MmY4NTlmMDA4MzQxZmQ3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84OGRmMzkwN2JiZmQ0MzJiYjc2ZTE1MWJjMGMwOTE5MCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcwNjM5NzIsIC03OS4zMDk5MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2U4OTExZTU2NzEwNDVkNWI4Y2Q5YTNlYTI4Zjc3ZTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOGVjNDI2M2I3ZTkwNGU3MWFiMjM4ZjdkNWQyODgzYWUgPSAkKGA8ZGl2IGlkPSJodG1sXzhlYzQyNjNiN2U5MDRlNzFhYjIzOGY3ZDVkMjg4M2FlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Xb29kYmluZSBHYXJkZW5zLFBhcmt2aWV3IEhpbGwsIEVhc3QgWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfN2U4OTExZTU2NzEwNDVkNWI4Y2Q5YTNlYTI4Zjc3ZTUuc2V0Q29udGVudChodG1sXzhlYzQyNjNiN2U5MDRlNzFhYjIzOGY3ZDVkMjg4M2FlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzg4ZGYzOTA3YmJmZDQzMmJiNzZlMTUxYmMwYzA5MTkwLmJpbmRQb3B1cChwb3B1cF83ZTg5MTFlNTY3MTA0NWQ1YjhjZDlhM2VhMjhmNzdlNSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNTFiOTc5YmE5OGVjNGFlYTk0N2VhNzRhMmQwNDg5MjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42OTUzNDM5LCAtNzkuMzE4Mzg4N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82MzhjZWFkYmNiYmE0NmE4YmYxMTViZDVlMGI4ZDZmMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jYjM0YzlhYTRmMmE0OWIyYWEwZDVlZmIwMjQ5ODhlMSA9ICQoYDxkaXYgaWQ9Imh0bWxfY2IzNGM5YWE0ZjJhNDliMmFhMGQ1ZWZiMDI0OTg4ZTEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvb2RiaW5lIEhlaWdodHMsIEVhc3QgWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjM4Y2VhZGJjYmJhNDZhOGJmMTE1YmQ1ZTBiOGQ2ZjIuc2V0Q29udGVudChodG1sX2NiMzRjOWFhNGYyYTQ5YjJhYTBkNWVmYjAyNDk4OGUxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzUxYjk3OWJhOThlYzRhZWE5NDdlYTc0YTJkMDQ4OTI0LmJpbmRQb3B1cChwb3B1cF82MzhjZWFkYmNiYmE0NmE4YmYxMTViZDVlMGI4ZDZmMikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzU4ZjhhMzlkZGY0NGY1ZjgxZGI1YmQyMzZmNmM3YTEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NzYzNTc0LCAtNzkuMjkzMDMxMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85MTVhOThjZDBkNTA0NTBhODYxNzBmNDZhMDAzMTVhZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNjZhZDJiOTM1MjQ0MGJmYTZkNWZhY2M5MTExOGI2ZSA9ICQoYDxkaXYgaWQ9Imh0bWxfZTY2YWQyYjkzNTI0NDBiZmE2ZDVmYWNjOTExMThiNmUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBCZWFjaGVzLCBFYXN0IFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzkxNWE5OGNkMGQ1MDQ1MGE4NjE3MGY0NmEwMDMxNWFkLnNldENvbnRlbnQoaHRtbF9lNjZhZDJiOTM1MjQ0MGJmYTZkNWZhY2M5MTExOGI2ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zNThmOGEzOWRkZjQ0ZjVmODFkYjViZDIzNmY2YzdhMS5iaW5kUG9wdXAocG9wdXBfOTE1YTk4Y2QwZDUwNDUwYTg2MTcwZjQ2YTAwMzE1YWQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzBmOWMxZTcwOWZlMTQ0ZWI5ZTllZjdhYWVmNzJjNzhhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA5MDYwNCwgLTc5LjM2MzQ1MTddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfY2EwMWIwNTkzYzRkNDlhZTgyOWYwNDk1Yjc4MDQwYWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDY1MmVjZGRlMjlmNGYzOWI2NDdlYmEwNzNmMzA0NDAgPSAkKGA8ZGl2IGlkPSJodG1sXzA2NTJlY2RkZTI5ZjRmMzliNjQ3ZWJhMDczZjMwNDQwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MZWFzaWRlLCBFYXN0IFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2NhMDFiMDU5M2M0ZDQ5YWU4MjlmMDQ5NWI3ODA0MGFlLnNldENvbnRlbnQoaHRtbF8wNjUyZWNkZGUyOWY0ZjM5YjY0N2ViYTA3M2YzMDQ0MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wZjljMWU3MDlmZTE0NGViOWU5ZWY3YWFlZjcyYzc4YS5iaW5kUG9wdXAocG9wdXBfY2EwMWIwNTkzYzRkNDlhZTgyOWYwNDk1Yjc4MDQwYWUpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2IxZGY1MjVjMThkZjQxMTM5MzhiMTVjYzc1NjZiMjM0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA1MzY4OSwgLTc5LjM0OTM3MTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDFlYmM2YjVkZmM5NGNjZmI4MjU2OGNkZmJjOGRmNWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjc0MDNhNGVhZDNmNDc0ZWE1ZjNiY2NjODJjMzViZjUgPSAkKGA8ZGl2IGlkPSJodG1sX2Y3NDAzYTRlYWQzZjQ3NGVhNWYzYmNjYzgyYzM1YmY1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaG9ybmNsaWZmZSBQYXJrLCBFYXN0IFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QxZWJjNmI1ZGZjOTRjY2ZiODI1NjhjZGZiYzhkZjVlLnNldENvbnRlbnQoaHRtbF9mNzQwM2E0ZWFkM2Y0NzRlYTVmM2JjY2M4MmMzNWJmNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iMWRmNTI1YzE4ZGY0MTEzOTM4YjE1Y2M3NTY2YjIzNC5iaW5kUG9wdXAocG9wdXBfZDFlYmM2YjVkZmM5NGNjZmI4MjU2OGNkZmJjOGRmNWUpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y0YjU4ZjNlY2MwMzQ4ZTc4YWIwMDRiNjcxZTlmMDA5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjg1MzQ3LCAtNzkuMzM4MTA2NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83NTljZmUyZGM0ODg0ZDQxYTVmZmRlMTMyMzU3NjIwMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wNmM4Zjg0NDc0NmM0OWVhOGExMzkxMTA0YWYzMzg3MSA9ICQoYDxkaXYgaWQ9Imh0bWxfMDZjOGY4NDQ3NDZjNDllYThhMTM5MTEwNGFmMzM4NzEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkVhc3QgVG9yb250bywgRWFzdCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83NTljZmUyZGM0ODg0ZDQxYTVmZmRlMTMyMzU3NjIwMy5zZXRDb250ZW50KGh0bWxfMDZjOGY4NDQ3NDZjNDllYThhMTM5MTEwNGFmMzM4NzEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjRiNThmM2VjYzAzNDhlNzhhYjAwNGI2NzFlOWYwMDkuYmluZFBvcHVwKHBvcHVwXzc1OWNmZTJkYzQ4ODRkNDFhNWZmZGUxMzIzNTc2MjAzKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wZDBjMjVjYmVlYTA0YzcyYmE5YWRjNzM0ZDNmZDc1NiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3OTU1NzEsIC03OS4zNTIxODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZGY5NDNjNjc1MDgwNDM0NzlmNWQyZTBhOGU5YTgyYTIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNWViOTU2OTYxOTc1NGMyNDlmZjVhYzU3MjZlYjRmYzggPSAkKGA8ZGl2IGlkPSJodG1sXzVlYjk1Njk2MTk3NTRjMjQ5ZmY1YWM1NzI2ZWI0ZmM4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgRGFuZm9ydGggV2VzdCxSaXZlcmRhbGUsIEVhc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGY5NDNjNjc1MDgwNDM0NzlmNWQyZTBhOGU5YTgyYTIuc2V0Q29udGVudChodG1sXzVlYjk1Njk2MTk3NTRjMjQ5ZmY1YWM1NzI2ZWI0ZmM4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzBkMGMyNWNiZWVhMDRjNzJiYTlhZGM3MzRkM2ZkNzU2LmJpbmRQb3B1cChwb3B1cF9kZjk0M2M2NzUwODA0MzQ3OWY1ZDJlMGE4ZTlhODJhMikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTViOWI3Yzc4Yjc4NGNlNWFhMjZlMWYzM2YyNDk1NWIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njg5OTg1LCAtNzkuMzE1NTcxNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kNGRjYjBiODVjNWY0NGQ5OGE5YzJlMmY5ZTJmZDc5MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jNzAxYzk5YWQ2ODA0ODc0OWI2Mjg1NTdiMmE1OTE0YiA9ICQoYDxkaXYgaWQ9Imh0bWxfYzcwMWM5OWFkNjgwNDg3NDliNjI4NTU3YjJhNTkxNGIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkluZGlhIEJhemFhcixUaGUgQmVhY2hlcyBXZXN0LCBFYXN0IFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q0ZGNiMGI4NWM1ZjQ0ZDk4YTljMmUyZjllMmZkNzkxLnNldENvbnRlbnQoaHRtbF9jNzAxYzk5YWQ2ODA0ODc0OWI2Mjg1NTdiMmE1OTE0Yik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lNWI5YjdjNzhiNzg0Y2U1YWEyNmUxZjMzZjI0OTU1Yi5iaW5kUG9wdXAocG9wdXBfZDRkY2IwYjg1YzVmNDRkOThhOWMyZTJmOWUyZmQ3OTEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzYxZWUzYzU4ZjhiZTQ0ZTA5NzY0NTgyNDYyMDNmOGI0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU5NTI1NSwgLTc5LjM0MDkyM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lOTY5YTI4MTQzMTY0MmViYjEzY2I0Mjk0NDkwYTYxNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yYzczZTM1MzE1MDQ0M2MwYWRlMDk2NDNkMTczNDVjOCA9ICQoYDxkaXYgaWQ9Imh0bWxfMmM3M2UzNTMxNTA0NDNjMGFkZTA5NjQzZDE3MzQ1YzgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0dWRpbyBEaXN0cmljdCwgRWFzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lOTY5YTI4MTQzMTY0MmViYjEzY2I0Mjk0NDkwYTYxNS5zZXRDb250ZW50KGh0bWxfMmM3M2UzNTMxNTA0NDNjMGFkZTA5NjQzZDE3MzQ1YzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjFlZTNjNThmOGJlNDRlMDk3NjQ1ODI0NjIwM2Y4YjQuYmluZFBvcHVwKHBvcHVwX2U5NjlhMjgxNDMxNjQyZWJiMTNjYjQyOTQ0OTBhNjE1KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jNjY2MTFmNGIwYzc0ODY5ODI4MGIxYTYyZmEzOGQ5YSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcyODAyMDUsIC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2YzM2U5OTA4NDYxMTQxMTM5YzgxZjBlZmY1ZTUwODJhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzUzNTJiNDBmOTM0NzQyMjA5M2JmYmE0NmQ0NDUwOGEyID0gJChgPGRpdiBpZD0iaHRtbF81MzUyYjQwZjkzNDc0MjIwOTNiZmJhNDZkNDQ1MDhhMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGF3cmVuY2UgUGFyaywgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mMzNlOTkwODQ2MTE0MTEzOWM4MWYwZWZmNWU1MDgyYS5zZXRDb250ZW50KGh0bWxfNTM1MmI0MGY5MzQ3NDIyMDkzYmZiYTQ2ZDQ0NTA4YTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzY2NjExZjRiMGM3NDg2OTgyODBiMWE2MmZhMzhkOWEuYmluZFBvcHVwKHBvcHVwX2YzM2U5OTA4NDYxMTQxMTM5YzgxZjBlZmY1ZTUwODJhKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hNGI2YWZiOGMyN2M0NmU5YjZjMjI0MWQ1NzhkODcyNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxMjc1MTEsIC03OS4zOTAxOTc1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NmYzc3ZDRkOGEzYzQ2ZmQ4MGE5OTdmNDczNDNlOTkzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzI3MTQzMmRlYTk5NDQ3ZjQ4MTIwMTM1OTU4ZmQzZTljID0gJChgPGRpdiBpZD0iaHRtbF8yNzE0MzJkZWE5OTQ0N2Y0ODEyMDEzNTk1OGZkM2U5YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGF2aXN2aWxsZSBOb3J0aCwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jZmM3N2Q0ZDhhM2M0NmZkODBhOTk3ZjQ3MzQzZTk5My5zZXRDb250ZW50KGh0bWxfMjcxNDMyZGVhOTk0NDdmNDgxMjAxMzU5NThmZDNlOWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTRiNmFmYjhjMjdjNDZlOWI2YzIyNDFkNTc4ZDg3MjUuYmluZFBvcHVwKHBvcHVwX2NmYzc3ZDRkOGEzYzQ2ZmQ4MGE5OTdmNDczNDNlOTkzKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85YTM3N2M0NDUzYmM0NTM5ODU4NjQ2NzQwNTEyYTEzZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxNTM4MzQsIC03OS40MDU2Nzg0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2EzNDAzYWNmZGIwMjQ4ZjBhMTU3ZDFmZmQ5MWYxMjkyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QxNGQyYjY0MWY5OTRiMWE5Y2E2MDE4YWI2NjA0MTE4ID0gJChgPGRpdiBpZD0iaHRtbF9kMTRkMmI2NDFmOTk0YjFhOWNhNjAxOGFiNjYwNDExOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9ydGggVG9yb250byBXZXN0LCBDZW50cmFsIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2EzNDAzYWNmZGIwMjQ4ZjBhMTU3ZDFmZmQ5MWYxMjkyLnNldENvbnRlbnQoaHRtbF9kMTRkMmI2NDFmOTk0YjFhOWNhNjAxOGFiNjYwNDExOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85YTM3N2M0NDUzYmM0NTM5ODU4NjQ2NzQwNTEyYTEzZi5iaW5kUG9wdXAocG9wdXBfYTM0MDNhY2ZkYjAyNDhmMGExNTdkMWZmZDkxZjEyOTIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2EzOTIwMTI3ZmNjYTQ4ZjFhYWE1Y2JiMTg1MTJkOTY0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA0MzI0NCwgLTc5LjM4ODc5MDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjg5MzQ0NDg4M2IxNGUyZDlkMmIwNjM3MWZlNGU4ZWQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODM1M2VlMjNmYzAyNGI4NWI5MGZlNjg0NzczYmZkYTYgPSAkKGA8ZGl2IGlkPSJodG1sXzgzNTNlZTIzZmMwMjRiODViOTBmZTY4NDc3M2JmZGE2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EYXZpc3ZpbGxlLCBDZW50cmFsIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY4OTM0NDQ4ODNiMTRlMmQ5ZDJiMDYzNzFmZTRlOGVkLnNldENvbnRlbnQoaHRtbF84MzUzZWUyM2ZjMDI0Yjg1YjkwZmU2ODQ3NzNiZmRhNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hMzkyMDEyN2ZjY2E0OGYxYWFhNWNiYjE4NTEyZDk2NC5iaW5kUG9wdXAocG9wdXBfNjg5MzQ0NDg4M2IxNGUyZDlkMmIwNjM3MWZlNGU4ZWQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZiMTQyOGFlY2FiMTQwYjZiMTljMzZlZWQ3NzQyOGI4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjg5NTc0MywgLTc5LjM4MzE1OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjU5MTM2NmNiNjUxNDQxMzk5MTlhYTFjODQ4Y2VjODIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOThmNzE4NDkzZjYwNDU3N2FmNTkzYjE4ZWQ0YTRjMDMgPSAkKGA8ZGl2IGlkPSJodG1sXzk4ZjcxODQ5M2Y2MDQ1NzdhZjU5M2IxOGVkNGE0YzAzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Nb29yZSBQYXJrLFN1bW1lcmhpbGwgRWFzdCwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mNTkxMzY2Y2I2NTE0NDEzOTkxOWFhMWM4NDhjZWM4Mi5zZXRDb250ZW50KGh0bWxfOThmNzE4NDkzZjYwNDU3N2FmNTkzYjE4ZWQ0YTRjMDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZmIxNDI4YWVjYWIxNDBiNmIxOWMzNmVlZDc3NDI4YjguYmluZFBvcHVwKHBvcHVwX2Y1OTEzNjZjYjY1MTQ0MTM5OTE5YWExYzg0OGNlYzgyKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hNDllY2U5OTUwNjM0YmI1OTNhNTA0YWFjOWFjYzM0OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4NjQxMjMsIC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhiM2ZhMWI0YzMzYTRjYTY5NTAyMjMzOGMzMTRhNGY1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzRjMzA5ZDNhOWRkYTRhMWQ4YzRiMGZlNzliNjVhODM2ID0gJChgPGRpdiBpZD0iaHRtbF80YzMwOWQzYTlkZGE0YTFkOGM0YjBmZTc5YjY1YTgzNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmF0aG5lbGx5LERlZXIgUGFyayxGb3Jlc3QgSGlsbCBTRSxTdW1tZXJoaWxsIFdlc3QsU291dGggSGlsbCwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84YjNmYTFiNGMzM2E0Y2E2OTUwMjIzMzhjMzE0YTRmNS5zZXRDb250ZW50KGh0bWxfNGMzMDlkM2E5ZGRhNGExZDhjNGIwZmU3OWI2NWE4MzYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTQ5ZWNlOTk1MDYzNGJiNTkzYTUwNGFhYzlhY2MzNDguYmluZFBvcHVwKHBvcHVwXzhiM2ZhMWI0YzMzYTRjYTY5NTAyMjMzOGMzMTRhNGY1KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hZWFiN2Q4YjE1ZTI0NjNiYWIzMWI1Y2M4N2YyYjIyYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3OTU2MjYsIC03OS4zNzc1Mjk0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM4MzQyY2I3N2FmNjQ3OWM5MDJlODJmMjRkMjI5ZjJhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ0MzRlMjY0YzgxYzQzNmViNjJkMDhhYTNmNDQ4ZTlkID0gJChgPGRpdiBpZD0iaHRtbF80NDM0ZTI2NGM4MWM0MzZlYjYyZDA4YWEzZjQ0OGU5ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9zZWRhbGUsIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM4MzQyY2I3N2FmNjQ3OWM5MDJlODJmMjRkMjI5ZjJhLnNldENvbnRlbnQoaHRtbF80NDM0ZTI2NGM4MWM0MzZlYjYyZDA4YWEzZjQ0OGU5ZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hZWFiN2Q4YjE1ZTI0NjNiYWIzMWI1Y2M4N2YyYjIyYi5iaW5kUG9wdXAocG9wdXBfMzgzNDJjYjc3YWY2NDc5YzkwMmU4MmYyNGQyMjlmMmEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2I0NDU5Y2FlNDhkMDQ2ZTViZmE5NDFlZmY3OTlhODZmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY3OTY3LCAtNzkuMzY3Njc1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82NzdkYWM2NTFhMGE0MTNiYTQ4Y2RhOTA0ZTMzZWRhNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wNjY0NGRmYjA5NjU0YmM1YWQ1ODI1YTcwODJhZTJlMSA9ICQoYDxkaXYgaWQ9Imh0bWxfMDY2NDRkZmIwOTY1NGJjNWFkNTgyNWE3MDgyYWUyZTEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0LiBKYW1lcyBUb3duLENhYmJhZ2V0b3duLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82NzdkYWM2NTFhMGE0MTNiYTQ4Y2RhOTA0ZTMzZWRhNy5zZXRDb250ZW50KGh0bWxfMDY2NDRkZmIwOTY1NGJjNWFkNTgyNWE3MDgyYWUyZTEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjQ0NTljYWU0OGQwNDZlNWJmYTk0MWVmZjc5OWE4NmYuYmluZFBvcHVwKHBvcHVwXzY3N2RhYzY1MWEwYTQxM2JhNDhjZGE5MDRlMzNlZGE3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zYWQ4MWZjYWQxMmY0NmZjOTZmNmZjNjI3Y2RkNDliNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2NTg1OTksIC03OS4zODMxNTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI0NzI2MTQxYWNkMTQwMjI5ZWUwZjMxOWViYjVkMjRiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzgwMjU4ODI3MzRkMjRlNDg5YmY4ZGQ3NWMzOTNhYTYxID0gJChgPGRpdiBpZD0iaHRtbF84MDI1ODgyNzM0ZDI0ZTQ4OWJmOGRkNzVjMzkzYWE2MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2h1cmNoIGFuZCBXZWxsZXNsZXksIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI0NzI2MTQxYWNkMTQwMjI5ZWUwZjMxOWViYjVkMjRiLnNldENvbnRlbnQoaHRtbF84MDI1ODgyNzM0ZDI0ZTQ4OWJmOGRkNzVjMzkzYWE2MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zYWQ4MWZjYWQxMmY0NmZjOTZmNmZjNjI3Y2RkNDliNy5iaW5kUG9wdXAocG9wdXBfMjQ3MjYxNDFhY2QxNDAyMjllZTBmMzE5ZWJiNWQyNGIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQ0ZTMzMDgwNTk5NTQ4MzA4ZGEwOTRmZWVjZmI5MjQ5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0MjU5OSwgLTc5LjM2MDYzNTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTQ5YWQyOGJhODg5NDljNmJlOTlkNWM0ZjFlMjM1MjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2IwMmRlNzY1NWY3NDc1YWJiZDJhYmJkYzAyZDAyZmUgPSAkKGA8ZGl2IGlkPSJodG1sXzdiMDJkZTc2NTVmNzQ3NWFiYmQyYWJiZGMwMmQwMmZlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IYXJib3VyZnJvbnQsIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzk0OWFkMjhiYTg4OTQ5YzZiZTk5ZDVjNGYxZTIzNTI2LnNldENvbnRlbnQoaHRtbF83YjAyZGU3NjU1Zjc0NzVhYmJkMmFiYmRjMDJkMDJmZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80NGUzMzA4MDU5OTU0ODMwOGRhMDk0ZmVlY2ZiOTI0OS5iaW5kUG9wdXAocG9wdXBfOTQ5YWQyOGJhODg5NDljNmJlOTlkNWM0ZjFlMjM1MjYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M2YzVhNWE4Nzc1YzQ2MTliM2M2ZDlhNmQ2ZjJjMjAwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU3MTYxOCwgLTc5LjM3ODkzNzFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmMxMTkwZDI2OTU0NDg5MTlkMDg2MjU4MTdhMmU5ZDAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjJhNmZhNGFiN2ViNGRjNDllMjNlZjljODIwMDAzYjUgPSAkKGA8ZGl2IGlkPSJodG1sXzIyYTZmYTRhYjdlYjRkYzQ5ZTIzZWY5YzgyMDAwM2I1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SeWVyc29uLEdhcmRlbiBEaXN0cmljdCwgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmMxMTkwZDI2OTU0NDg5MTlkMDg2MjU4MTdhMmU5ZDAuc2V0Q29udGVudChodG1sXzIyYTZmYTRhYjdlYjRkYzQ5ZTIzZWY5YzgyMDAwM2I1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2M2YzVhNWE4Nzc1YzQ2MTliM2M2ZDlhNmQ2ZjJjMjAwLmJpbmRQb3B1cChwb3B1cF9mYzExOTBkMjY5NTQ0ODkxOWQwODYyNTgxN2EyZTlkMCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNTNkZjNhYWE2YmYwNGIzYWIzMTg4M2MyYmIzMDU0YzQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTE0OTM5LCAtNzkuMzc1NDE3OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80M2Y3MmI1YzNlMzQ0YWY1ODJmZWJmMWQ1NGE3OTMwYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84N2Y2ZmEzNTRlZTY0MGY4OTM3YmJhNmYxYmNlY2M2MSA9ICQoYDxkaXYgaWQ9Imh0bWxfODdmNmZhMzU0ZWU2NDBmODkzN2JiYTZmMWJjZWNjNjEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0LiBKYW1lcyBUb3duLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80M2Y3MmI1YzNlMzQ0YWY1ODJmZWJmMWQ1NGE3OTMwYy5zZXRDb250ZW50KGh0bWxfODdmNmZhMzU0ZWU2NDBmODkzN2JiYTZmMWJjZWNjNjEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNTNkZjNhYWE2YmYwNGIzYWIzMTg4M2MyYmIzMDU0YzQuYmluZFBvcHVwKHBvcHVwXzQzZjcyYjVjM2UzNDRhZjU4MmZlYmYxZDU0YTc5MzBjKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xMTJmNmU5MTU2YmU0NGZiOWE4MTA4MmI4NzE1MTc2NCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NDc3MDgsIC03OS4zNzMzMDY0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI4Njk1YmM1YTdmYTQ5MWJiZjgxMTk3MDQ0MjAyZjIyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U2NjAxMjFjNjI1YTQxM2M5OGI3ODQ4MDdjNmQyNmJlID0gJChgPGRpdiBpZD0iaHRtbF9lNjYwMTIxYzYyNWE0MTNjOThiNzg0ODA3YzZkMjZiZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmVyY3p5IFBhcmssIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI4Njk1YmM1YTdmYTQ5MWJiZjgxMTk3MDQ0MjAyZjIyLnNldENvbnRlbnQoaHRtbF9lNjYwMTIxYzYyNWE0MTNjOThiNzg0ODA3YzZkMjZiZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xMTJmNmU5MTU2YmU0NGZiOWE4MTA4MmI4NzE1MTc2NC5iaW5kUG9wdXAocG9wdXBfMjg2OTViYzVhN2ZhNDkxYmJmODExOTcwNDQyMDJmMjIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzZhMTVmODZhOTlmYzQxNGM5YjVhYWFmODY2NDViY2NkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU3OTUyNCwgLTc5LjM4NzM4MjZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTI3NWE4YTA5M2YyNGM4ZTllYmFhNjcwYzIzNjBjMGUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTgyYTFmMTE4ZjA0NDNjZTgwOGUyODE2ZmE3NWNlNWEgPSAkKGA8ZGl2IGlkPSJodG1sX2U4MmExZjExOGYwNDQzY2U4MDhlMjgxNmZhNzVjZTVhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DZW50cmFsIEJheSBTdHJlZXQsIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2UyNzVhOGEwOTNmMjRjOGU5ZWJhYTY3MGMyMzYwYzBlLnNldENvbnRlbnQoaHRtbF9lODJhMWYxMThmMDQ0M2NlODA4ZTI4MTZmYTc1Y2U1YSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82YTE1Zjg2YTk5ZmM0MTRjOWI1YWFhZjg2NjQ1YmNjZC5iaW5kUG9wdXAocG9wdXBfZTI3NWE4YTA5M2YyNGM4ZTllYmFhNjcwYzIzNjBjMGUpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzc4ZGRiODQ5MzliYjQwZTVhNWRlMjQ4NzU0ZjM1NDM2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUwNTcxMiwgLTc5LjM4NDU2NzVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2ZhNGZjNjU4OTBjNDE3NzlkNDE4YzRiMjIyMjkyYzUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmYyZDk0NmJmOTA0NGNmZjk3ZmVlZmRiM2YxZGIwNjIgPSAkKGA8ZGl2IGlkPSJodG1sXzJmMmQ5NDZiZjkwNDRjZmY5N2ZlZWZkYjNmMWRiMDYyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SaWNobW9uZCxLaW5nLEFkZWxhaWRlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZmE0ZmM2NTg5MGM0MTc3OWQ0MThjNGIyMjIyOTJjNS5zZXRDb250ZW50KGh0bWxfMmYyZDk0NmJmOTA0NGNmZjk3ZmVlZmRiM2YxZGIwNjIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzhkZGI4NDkzOWJiNDBlNWE1ZGUyNDg3NTRmMzU0MzYuYmluZFBvcHVwKHBvcHVwXzdmYTRmYzY1ODkwYzQxNzc5ZDQxOGM0YjIyMjI5MmM1KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lYWM1OWY2N2M0MDI0NmZkYjllNjE2MGVjYWNmZGZhZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0MDgxNTcsIC03OS4zODE3NTIzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E0ZjJhYTYzNzI4OTRmNDg5NmUwMGVjYzQ2MmM1OTcwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzkwYWUwNDQyNzk4NzQyZWM5OWU2MjM4MjkyN2NlYTljID0gJChgPGRpdiBpZD0iaHRtbF85MGFlMDQ0Mjc5ODc0MmVjOTllNjIzODI5MjdjZWE5YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VW5pb24gU3RhdGlvbixUb3JvbnRvIElzbGFuZHMsSGFyYm91cmZyb250IEVhc3QsIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2E0ZjJhYTYzNzI4OTRmNDg5NmUwMGVjYzQ2MmM1OTcwLnNldENvbnRlbnQoaHRtbF85MGFlMDQ0Mjc5ODc0MmVjOTllNjIzODI5MjdjZWE5Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lYWM1OWY2N2M0MDI0NmZkYjllNjE2MGVjYWNmZGZhZi5iaW5kUG9wdXAocG9wdXBfYTRmMmFhNjM3Mjg5NGY0ODk2ZTAwZWNjNDYyYzU5NzApCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2IzNzJlNWFkZGE3YzQ5ZTA4NzA4OTBiZTIxNjY0NTkxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3MTc2OCwgLTc5LjM4MTU3NjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfM2NkMDBiM2QxZDY0NDYyYTg5M2I0YmYwY2NmOWI5M2EgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzY4MjM0MGE0ODllNGVjMDkwZWNiYmYzOWE1NDcyNjggPSAkKGA8ZGl2IGlkPSJodG1sX2M2ODIzNDBhNDg5ZTRlYzA5MGVjYmJmMzlhNTQ3MjY4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ub3JvbnRvIERvbWluaW9uIENlbnRyZSxEZXNpZ24gRXhjaGFuZ2UsIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNjZDAwYjNkMWQ2NDQ2MmE4OTNiNGJmMGNjZjliOTNhLnNldENvbnRlbnQoaHRtbF9jNjgyMzQwYTQ4OWU0ZWMwOTBlY2JiZjM5YTU0NzI2OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iMzcyZTVhZGRhN2M0OWUwODcwODkwYmUyMTY2NDU5MS5iaW5kUG9wdXAocG9wdXBfM2NkMDBiM2QxZDY0NDYyYTg5M2I0YmYwY2NmOWI5M2EpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M3YTEzYTgxZmMzODRhZGJhNmE0MDdkZDE3NWIyNmU1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ4MTk4NSwgLTc5LjM3OTgxNjldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTI3MWRhM2JkZTdlNDJhNWFkYTQ4NDczYWMwMDAxNzggPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWVjMmMwOGIwODQ2NGNjNDlkZmIwMGIwYjhkY2MwNWUgPSAkKGA8ZGl2IGlkPSJodG1sX2VlYzJjMDhiMDg0NjRjYzQ5ZGZiMDBiMGI4ZGNjMDVlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db21tZXJjZSBDb3VydCxWaWN0b3JpYSBIb3RlbCwgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTI3MWRhM2JkZTdlNDJhNWFkYTQ4NDczYWMwMDAxNzguc2V0Q29udGVudChodG1sX2VlYzJjMDhiMDg0NjRjYzQ5ZGZiMDBiMGI4ZGNjMDVlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2M3YTEzYTgxZmMzODRhZGJhNmE0MDdkZDE3NWIyNmU1LmJpbmRQb3B1cChwb3B1cF9lMjcxZGEzYmRlN2U0MmE1YWRhNDg0NzNhYzAwMDE3OCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYWQ4M2I4ZDg2YzRkNGU0NzgzY2ZjM2FiMDc0Y2JhMDcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MzMyODI1LCAtNzkuNDE5NzQ5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iYTVhYzM1MjljZjk0NTY4YTkzZTZmMWVlNWI0ZjMzNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lZjk2ZGNjZjM0ODI0ZTcwOGM2MWY4NWE1ZWViMWQxZCA9ICQoYDxkaXYgaWQ9Imh0bWxfZWY5NmRjY2YzNDgyNGU3MDhjNjFmODVhNWVlYjFkMWQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxhd3JlbmNlIE1hbm9yIEVhc3QsQmVkZm9yZCBQYXJrLCBOb3J0aCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iYTVhYzM1MjljZjk0NTY4YTkzZTZmMWVlNWI0ZjMzNC5zZXRDb250ZW50KGh0bWxfZWY5NmRjY2YzNDgyNGU3MDhjNjFmODVhNWVlYjFkMWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYWQ4M2I4ZDg2YzRkNGU0NzgzY2ZjM2FiMDc0Y2JhMDcuYmluZFBvcHVwKHBvcHVwX2JhNWFjMzUyOWNmOTQ1NjhhOTNlNmYxZWU1YjRmMzM0KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81OWRlOWI5ZGI5OTc0Y2M4OGU3NTYwOWZjNTJlMmMwOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxMTY5NDgsIC03OS40MTY5MzU2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Y4OGY1OWQ2YTJjOTQwMjJiNDFiM2FjZTNlNzczMGNhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzg5YTY5OWI4ZGZkYzQyY2RhZTQ4NzQyNjRhMDk5NGE2ID0gJChgPGRpdiBpZD0iaHRtbF84OWE2OTliOGRmZGM0MmNkYWU0ODc0MjY0YTA5OTRhNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9zZWxhd24sIENlbnRyYWwgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjg4ZjU5ZDZhMmM5NDAyMmI0MWIzYWNlM2U3NzMwY2Euc2V0Q29udGVudChodG1sXzg5YTY5OWI4ZGZkYzQyY2RhZTQ4NzQyNjRhMDk5NGE2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU5ZGU5YjlkYjk5NzRjYzg4ZTc1NjA5ZmM1MmUyYzA4LmJpbmRQb3B1cChwb3B1cF9mODhmNTlkNmEyYzk0MDIyYjQxYjNhY2UzZTc3MzBjYSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNTdlYmUzZjcyNjQ4NDc4MTk3ZDU2ZDI4YjBmMTNjNGQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42OTY5NDc2LCAtNzkuNDExMzA3Ml0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYWNkODMzZGEyNDU0MjY5OGUxZmRmOWM2NTQ1MWNmNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mNTNkYTRiNGU3MzM0Njg3OGQzNjAyMDQ2MzI0ZDFkMCA9ICQoYDxkaXYgaWQ9Imh0bWxfZjUzZGE0YjRlNzMzNDY4NzhkMzYwMjA0NjMyNGQxZDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZvcmVzdCBIaWxsIE5vcnRoLEZvcmVzdCBIaWxsIFdlc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmFjZDgzM2RhMjQ1NDI2OThlMWZkZjljNjU0NTFjZjUuc2V0Q29udGVudChodG1sX2Y1M2RhNGI0ZTczMzQ2ODc4ZDM2MDIwNDYzMjRkMWQwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU3ZWJlM2Y3MjY0ODQ3ODE5N2Q1NmQyOGIwZjEzYzRkLmJpbmRQb3B1cChwb3B1cF9mYWNkODMzZGEyNDU0MjY5OGUxZmRmOWM2NTQ1MWNmNSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfN2Y2ZmU1MmRjYjgyNGQ2Mjk2ZTQ5ZjYwZmJlZTk0ODMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NzI3MDk3LCAtNzkuNDA1Njc4NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yZGQ1YmZhNjI4ODE0ZDA2ODcxZmU4MDA1NjAxYjUxNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wMjUwOTRlNWE3ZmQ0M2FiYmZiOTFiZmFlNjc4YmIwMCA9ICQoYDxkaXYgaWQ9Imh0bWxfMDI1MDk0ZTVhN2ZkNDNhYmJmYjkxYmZhZTY3OGJiMDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBBbm5leCxZb3JrdmlsbGUsTm9ydGggTWlkdG93biwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yZGQ1YmZhNjI4ODE0ZDA2ODcxZmU4MDA1NjAxYjUxNS5zZXRDb250ZW50KGh0bWxfMDI1MDk0ZTVhN2ZkNDNhYmJmYjkxYmZhZTY3OGJiMDApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfN2Y2ZmU1MmRjYjgyNGQ2Mjk2ZTQ5ZjYwZmJlZTk0ODMuYmluZFBvcHVwKHBvcHVwXzJkZDViZmE2Mjg4MTRkMDY4NzFmZTgwMDU2MDFiNTE1KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83OGFmMGU1MmMzNWU0NTg5OGRhMjdmNTZhMDhkYWMwNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2MjY5NTYsIC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FlMTg0NTJhMmUxZTRmZmVhMTcyMTEzYWUwODA4NzAwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM5YTAzZTAxOWE5ZDQ1M2M5MjUwZDA4MTE4ZmZmNDE5ID0gJChgPGRpdiBpZD0iaHRtbF8zOWEwM2UwMTlhOWQ0NTNjOTI1MGQwODExOGZmZjQxOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm9yZCxVbml2ZXJzaXR5IG9mIFRvcm9udG8sIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2FlMTg0NTJhMmUxZTRmZmVhMTcyMTEzYWUwODA4NzAwLnNldENvbnRlbnQoaHRtbF8zOWEwM2UwMTlhOWQ0NTNjOTI1MGQwODExOGZmZjQxOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83OGFmMGU1MmMzNWU0NTg5OGRhMjdmNTZhMDhkYWMwNC5iaW5kUG9wdXAocG9wdXBfYWUxODQ1MmEyZTFlNGZmZWExNzIxMTNhZTA4MDg3MDApCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzMwODMxYTRlMWY2NzQ4ZjZhOGQyNWIwNGNhMzgzMjYxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUzMjA1NywgLTc5LjQwMDA0OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMDdjMmE2NTczNzE5NDAwMTlmM2I0NThhM2E4YTI0ZDkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzA0Y2Y0NThmZDQxNDVhM2JkNTJlZDU1MjQwMGUwMDYgPSAkKGA8ZGl2IGlkPSJodG1sXzcwNGNmNDU4ZmQ0MTQ1YTNiZDUyZWQ1NTI0MDBlMDA2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmFuZ2UgUGFyayxLZW5zaW5ndG9uIE1hcmtldCxDaGluYXRvd24sIERvd250b3duIFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzA3YzJhNjU3MzcxOTQwMDE5ZjNiNDU4YTNhOGEyNGQ5LnNldENvbnRlbnQoaHRtbF83MDRjZjQ1OGZkNDE0NWEzYmQ1MmVkNTUyNDAwZTAwNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zMDgzMWE0ZTFmNjc0OGY2YThkMjViMDRjYTM4MzI2MS5iaW5kUG9wdXAocG9wdXBfMDdjMmE2NTczNzE5NDAwMTlmM2I0NThhM2E4YTI0ZDkpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzY5Y2NmM2Q3NzdlMDQ3YWY4YzI1ODA5MTA4MTU1YjRiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjI4OTQ2NywgLTc5LjM5NDQxOTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWI0YjZhYjU0ZjJmNDU5Njk3MjI5ZWVhYzU0MDdjYmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNWU3OTgyNTgzNmY3NGZlNWI1MjY2OTBiNGU1MWY2ZWMgPSAkKGA8ZGl2IGlkPSJodG1sXzVlNzk4MjU4MzZmNzRmZTViNTI2NjkwYjRlNTFmNmVjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Jc2xhbmQgYWlycG9ydCxLaW5nIGFuZCBTcGFkaW5hLEJhdGh1cnN0IFF1YXksQ04gVG93ZXIsSGFyYm91cmZyb250IFdlc3QsUmFpbHdheSBMYW5kcyxTb3V0aCBOaWFnYXJhLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xYjRiNmFiNTRmMmY0NTk2OTcyMjllZWFjNTQwN2NiZS5zZXRDb250ZW50KGh0bWxfNWU3OTgyNTgzNmY3NGZlNWI1MjY2OTBiNGU1MWY2ZWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjljY2YzZDc3N2UwNDdhZjhjMjU4MDkxMDgxNTViNGIuYmluZFBvcHVwKHBvcHVwXzFiNGI2YWI1NGYyZjQ1OTY5NzIyOWVlYWM1NDA3Y2JlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kZDBjOWI1NTQxN2I0ZWE4OTdkZjgzNmE3ZGNkMmE0ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NjQzNTIsIC03OS4zNzQ4NDZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzVkOWFhYTMzOTI3NDBjZGFkOTA0MTQ0NDZlYzI5NDcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODM3YzZiMmM4ZGZmNDUzMmIyMWY2Y2RjZWE0M2NkYjkgPSAkKGA8ZGl2IGlkPSJodG1sXzgzN2M2YjJjOGRmZjQ1MzJiMjFmNmNkY2VhNDNjZGI5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdG4gQSBQTyBCb3hlcyAyNSBUaGUgRXNwbGFuYWRlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zNWQ5YWFhMzM5Mjc0MGNkYWQ5MDQxNDQ0NmVjMjk0Ny5zZXRDb250ZW50KGh0bWxfODM3YzZiMmM4ZGZmNDUzMmIyMWY2Y2RjZWE0M2NkYjkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGQwYzliNTU0MTdiNGVhODk3ZGY4MzZhN2RjZDJhNGYuYmluZFBvcHVwKHBvcHVwXzM1ZDlhYWEzMzkyNzQwY2RhZDkwNDE0NDQ2ZWMyOTQ3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zMTQ3ZTcyNzdmY2E0MDM0YmFkNzI5MzQwNGE1NzFhNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODQyOTIsIC03OS4zODIyODAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U4NDI4YWY0OGI5ZDQ0NjliZTQzMzA4ZTczYWQwMTNkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc5YTQzMGI0NTk4NTQwZTY4MjcxOGM5MmI0YWM5ZDA3ID0gJChgPGRpdiBpZD0iaHRtbF83OWE0MzBiNDU5ODU0MGU2ODI3MThjOTJiNGFjOWQwNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VW5kZXJncm91bmQgY2l0eSxGaXJzdCBDYW5hZGlhbiBQbGFjZSwgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTg0MjhhZjQ4YjlkNDQ2OWJlNDMzMDhlNzNhZDAxM2Quc2V0Q29udGVudChodG1sXzc5YTQzMGI0NTk4NTQwZTY4MjcxOGM5MmI0YWM5ZDA3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzMxNDdlNzI3N2ZjYTQwMzRiYWQ3MjkzNDA0YTU3MWE0LmJpbmRQb3B1cChwb3B1cF9lODQyOGFmNDhiOWQ0NDY5YmU0MzMwOGU3M2FkMDEzZCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYWY3ZmU5YTY1NTMwNDUyNmI4ZjNkMmNhMmFlZDYyODMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MTg1MTgsIC03OS40NjQ3NjMzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzJmMzQ4MzhjYmI0MTQwNmU4NjRlZGNkZmQ3NTA5YTAxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FmNzczYmVkYWQ2ZDQwOTZiZmE5M2I0ZWYxMDE5YjViID0gJChgPGRpdiBpZD0iaHRtbF9hZjc3M2JlZGFkNmQ0MDk2YmZhOTNiNGVmMTAxOWI1YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGF3cmVuY2UgSGVpZ2h0cyxMYXdyZW5jZSBNYW5vciwgTm9ydGggWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmYzNDgzOGNiYjQxNDA2ZTg2NGVkY2RmZDc1MDlhMDEuc2V0Q29udGVudChodG1sX2FmNzczYmVkYWQ2ZDQwOTZiZmE5M2I0ZWYxMDE5YjViKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2FmN2ZlOWE2NTUzMDQ1MjZiOGYzZDJjYTJhZWQ2MjgzLmJpbmRQb3B1cChwb3B1cF8yZjM0ODM4Y2JiNDE0MDZlODY0ZWRjZGZkNzUwOWEwMSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYmRiNTY2YjBmNjA1NGY1NDhkMzU5ZjI3NjI1NzNlZDUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDk1NzcsIC03OS40NDUwNzI2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M3ZWM4M2FlNWM0YTQ1NWY4ODUxNmE2ODg0NjYyZjBiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEyMzRjN2E5NTdmMDRhZTk4YjU1YmM0YWVmNDE2MWVjID0gJChgPGRpdiBpZD0iaHRtbF8xMjM0YzdhOTU3ZjA0YWU5OGI1NWJjNGFlZjQxNjFlYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R2xlbmNhaXJuLCBOb3J0aCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jN2VjODNhZTVjNGE0NTVmODg1MTZhNjg4NDY2MmYwYi5zZXRDb250ZW50KGh0bWxfMTIzNGM3YTk1N2YwNGFlOThiNTViYzRhZWY0MTYxZWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYmRiNTY2YjBmNjA1NGY1NDhkMzU5ZjI3NjI1NzNlZDUuYmluZFBvcHVwKHBvcHVwX2M3ZWM4M2FlNWM0YTQ1NWY4ODUxNmE2ODg0NjYyZjBiKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82OGMzNjczODZkYmE0MzY4YTExZDVhMzQ1ZjY5NWNhZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5Mzc4MTMsIC03OS40MjgxOTE0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU5NWYwZjU3OGFlMjQzYjdiMDVkNmE2NTUxYjc1MjkxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzE5ZDk5MDYwODcxNjQzZDZhMGU2NTM1YTIzYjBkNWMzID0gJChgPGRpdiBpZD0iaHRtbF8xOWQ5OTA2MDg3MTY0M2Q2YTBlNjUzNWEyM2IwZDVjMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SHVtZXdvb2QtQ2VkYXJ2YWxlLCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81OTVmMGY1NzhhZTI0M2I3YjA1ZDZhNjU1MWI3NTI5MS5zZXRDb250ZW50KGh0bWxfMTlkOTkwNjA4NzE2NDNkNmEwZTY1MzVhMjNiMGQ1YzMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjhjMzY3Mzg2ZGJhNDM2OGExMWQ1YTM0NWY2OTVjYWUuYmluZFBvcHVwKHBvcHVwXzU5NWYwZjU3OGFlMjQzYjdiMDVkNmE2NTUxYjc1MjkxKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85NjE1MDdiY2I3OTk0ZWFjYjE2OTFkY2YyOGJiZTk1YiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4OTAyNTYsIC03OS40NTM1MTJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZGM2YmE3YjBmYWIyNDYxMjgzNDRlZmMzMDI0NDg2ZmEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTBlNWRjMTE0ZmE4NGY0YjliZThhYzI5NGMwZDMxZTUgPSAkKGA8ZGl2IGlkPSJodG1sX2EwZTVkYzExNGZhODRmNGI5YmU4YWMyOTRjMGQzMWU1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DYWxlZG9uaWEtRmFpcmJhbmtzLCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kYzZiYTdiMGZhYjI0NjEyODM0NGVmYzMwMjQ0ODZmYS5zZXRDb250ZW50KGh0bWxfYTBlNWRjMTE0ZmE4NGY0YjliZThhYzI5NGMwZDMxZTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTYxNTA3YmNiNzk5NGVhY2IxNjkxZGNmMjhiYmU5NWIuYmluZFBvcHVwKHBvcHVwX2RjNmJhN2IwZmFiMjQ2MTI4MzQ0ZWZjMzAyNDQ4NmZhKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mOWFlMWIwMDEyZDM0YzdmYmUwYWU5MTdjYWEzNjkzZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2OTU0MiwgLTc5LjQyMjU2MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjEwOWE0YWU3MTc3NGJhN2I4OTgzOTRiMTRhOGU1ZWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjY5N2Q3ZmU2ZTVhNDFmNmEwZTBmMGQ4NjE4MTU1ODQgPSAkKGA8ZGl2IGlkPSJodG1sXzI2OTdkN2ZlNmU1YTQxZjZhMGUwZjBkODYxODE1NTg0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaHJpc3RpZSwgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjEwOWE0YWU3MTc3NGJhN2I4OTgzOTRiMTRhOGU1ZWUuc2V0Q29udGVudChodG1sXzI2OTdkN2ZlNmU1YTQxZjZhMGUwZjBkODYxODE1NTg0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Y5YWUxYjAwMTJkMzRjN2ZiZTBhZTkxN2NhYTM2OTNlLmJpbmRQb3B1cChwb3B1cF9mMTA5YTRhZTcxNzc0YmE3Yjg5ODM5NGIxNGE4ZTVlZSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODhiZDMwZWY5YTViNGEzNmJmNTZlMDE5ZTc4MWE0MmQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjkwMDUxLCAtNzkuNDQyMjU5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xZDIyOGQ4YWUyMzE0NjdlYTZkMjA3MDBiODNkNDE4NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83NzIzYmUxZWRkMzg0OWVmODc3M2I5YzgyNzExNTFkZCA9ICQoYDxkaXYgaWQ9Imh0bWxfNzcyM2JlMWVkZDM4NDllZjg3NzNiOWM4MjcxMTUxZGQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvdmVyY291cnQgVmlsbGFnZSxEdWZmZXJpbiwgV2VzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xZDIyOGQ4YWUyMzE0NjdlYTZkMjA3MDBiODNkNDE4NS5zZXRDb250ZW50KGh0bWxfNzcyM2JlMWVkZDM4NDllZjg3NzNiOWM4MjcxMTUxZGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODhiZDMwZWY5YTViNGEzNmJmNTZlMDE5ZTc4MWE0MmQuYmluZFBvcHVwKHBvcHVwXzFkMjI4ZDhhZTIzMTQ2N2VhNmQyMDcwMGI4M2Q0MTg1KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83NWRkMDgyNjRhZGE0OTBmYTAxZTdhNzE0NzI1NTcwMiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NzkyNjcsIC03OS40MTk3NDk3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzkwZGQ1MWJmYWE1NzQ3OGE5NTI4NGJhZWE4NDExYjI5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QyZDdiMWFmMDRiNjQ3YjM4NWIyZDA1NDBmMjBkZWYyID0gJChgPGRpdiBpZD0iaHRtbF9kMmQ3YjFhZjA0YjY0N2IzODViMmQwNTQwZjIwZGVmMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFBvcnR1Z2FsLFRyaW5pdHksIFdlc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTBkZDUxYmZhYTU3NDc4YTk1Mjg0YmFlYTg0MTFiMjkuc2V0Q29udGVudChodG1sX2QyZDdiMWFmMDRiNjQ3YjM4NWIyZDA1NDBmMjBkZWYyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc1ZGQwODI2NGFkYTQ5MGZhMDFlN2E3MTQ3MjU1NzAyLmJpbmRQb3B1cChwb3B1cF85MGRkNTFiZmFhNTc0NzhhOTUyODRiYWVhODQxMWIyOSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTU0MmIxOWUzNzY1NGY0Mzk5YTMwZGEyNjc0NjZlZGEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42MzY4NDcyLCAtNzkuNDI4MTkxNF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hMzI1NmU5NGM2NTM0YjA5ODdlMTlkY2VmZmFiMDI0YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lZTRkMDcyODNjMGY0MTIwOWNiMzQzY2EzMDk1ZDNiNiA9ICQoYDxkaXYgaWQ9Imh0bWxfZWU0ZDA3MjgzYzBmNDEyMDljYjM0M2NhMzA5NWQzYjYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlBhcmtkYWxlIFZpbGxhZ2UsRXhoaWJpdGlvbiBQbGFjZSxCcm9ja3RvbiwgV2VzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hMzI1NmU5NGM2NTM0YjA5ODdlMTlkY2VmZmFiMDI0Yi5zZXRDb250ZW50KGh0bWxfZWU0ZDA3MjgzYzBmNDEyMDljYjM0M2NhMzA5NWQzYjYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTU0MmIxOWUzNzY1NGY0Mzk5YTMwZGEyNjc0NjZlZGEuYmluZFBvcHVwKHBvcHVwX2EzMjU2ZTk0YzY1MzRiMDk4N2UxOWRjZWZmYWIwMjRiKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iMGQxYjI4NTJlNzc0NTdmYTAwZjRkN2Y4NTZhOGMxZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxMzc1NjIsIC03OS40OTAwNzM4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Y2ODY5ZjM2NDkwODRmZWNhNDVmNjM4NDgyOWMxY2YzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JiMGU2YzBlOGRjNjQyYjU5YWZkZDJmN2Y4NTM2NDQ3ID0gJChgPGRpdiBpZD0iaHRtbF9iYjBlNmMwZThkYzY0MmI1OWFmZGQyZjdmODUzNjQ0NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG93bnN2aWV3LFVwd29vZCBQYXJrLE5vcnRoIFBhcmssIE5vcnRoIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Y2ODY5ZjM2NDkwODRmZWNhNDVmNjM4NDgyOWMxY2YzLnNldENvbnRlbnQoaHRtbF9iYjBlNmMwZThkYzY0MmI1OWFmZGQyZjdmODUzNjQ0Nyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iMGQxYjI4NTJlNzc0NTdmYTAwZjRkN2Y4NTZhOGMxZi5iaW5kUG9wdXAocG9wdXBfZjY4NjlmMzY0OTA4NGZlY2E0NWY2Mzg0ODI5YzFjZjMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzZlYTZiNzRmOGZmMTQyMmQ5NDM4MWJiOTg0YWMyYTY4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjkxMTE1OCwgLTc5LjQ3NjAxMzNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZWVmNjI2OGVkY2QxNDhhNDk5Yzc0YzdkYzg0NjYwZTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjkwNmVkNjJmMGQxNGFhN2E4ZDBlMDIzM2Q4ZTE4MmUgPSAkKGA8ZGl2IGlkPSJodG1sXzI5MDZlZDYyZjBkMTRhYTdhOGQwZTAyMzNkOGUxODJlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Nb3VudCBEZW5uaXMsRGVsIFJheSxLZWVsZXNkYWxlLFNpbHZlcnRob3JuLCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lZWY2MjY4ZWRjZDE0OGE0OTljNzRjN2RjODQ2NjBlMy5zZXRDb250ZW50KGh0bWxfMjkwNmVkNjJmMGQxNGFhN2E4ZDBlMDIzM2Q4ZTE4MmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNmVhNmI3NGY4ZmYxNDIyZDk0MzgxYmI5ODRhYzJhNjguYmluZFBvcHVwKHBvcHVwX2VlZjYyNjhlZGNkMTQ4YTQ5OWM3NGM3ZGM4NDY2MGUzKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jNGYxNThlN2EzNjM0ZmMyYWE4YmU3YTBhYjViOTkxMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MzE4NTMsIC03OS40ODcyNjE5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzAwZDI3MjU2NGUxMzQxYjc5YzAzOTdkNzY5YjJlM2E3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JlZDFjOGE4NGM4YzQwZjBhMDVkYzUzNTY1OGNlYjg0ID0gJChgPGRpdiBpZD0iaHRtbF9iZWQxYzhhODRjOGM0MGYwYTA1ZGM1MzU2NThjZWI4NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UnVubnltZWRlLFRoZSBKdW5jdGlvbiBOb3J0aCwgWW9yazwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDBkMjcyNTY0ZTEzNDFiNzljMDM5N2Q3NjliMmUzYTcuc2V0Q29udGVudChodG1sX2JlZDFjOGE4NGM4YzQwZjBhMDVkYzUzNTY1OGNlYjg0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2M0ZjE1OGU3YTM2MzRmYzJhYThiZTdhMGFiNWI5OTEwLmJpbmRQb3B1cChwb3B1cF8wMGQyNzI1NjRlMTM0MWI3OWMwMzk3ZDc2OWIyZTNhNykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMGVhOTJiYTQ5NjcxNDQ5NGE3MjM5ZWVkZGNhNjNkNTggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjE2MDgzLCAtNzkuNDY0NzYzM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mMjQxMTgzMDViOWQ0ZjIwYTg3ZjllYjk1MThmNDUxMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xZmU4ZGMxZjk1ODY0OGE2YjgyYjhiNmEwM2E4MGUxYiA9ICQoYDxkaXYgaWQ9Imh0bWxfMWZlOGRjMWY5NTg2NDhhNmI4MmI4YjZhMDNhODBlMWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpZ2ggUGFyayxUaGUgSnVuY3Rpb24gU291dGgsIFdlc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjI0MTE4MzA1YjlkNGYyMGE4N2Y5ZWI5NTE4ZjQ1MTMuc2V0Q29udGVudChodG1sXzFmZThkYzFmOTU4NjQ4YTZiODJiOGI2YTAzYTgwZTFiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzBlYTkyYmE0OTY3MTQ0OTRhNzIzOWVlZGRjYTYzZDU4LmJpbmRQb3B1cChwb3B1cF9mMjQxMTgzMDViOWQ0ZjIwYTg3ZjllYjk1MThmNDUxMykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZGEwMzYzZDdlZTBhNDg4NmJmZTNhYzA3MDYzOTNiZTEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDg5NTk3LCAtNzkuNDU2MzI1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FkMWU3NDI1ZmI5NDRkOGY5ZGE0MGRiNmMzNDNlYTY5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ4YWM4ZDEwMWJlOTQ3ZGM5MjNlZTFhNjBjZGUxMDgxID0gJChgPGRpdiBpZD0iaHRtbF80OGFjOGQxMDFiZTk0N2RjOTIzZWUxYTYwY2RlMTA4MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9uY2VzdmFsbGVzLFBhcmtkYWxlLCBXZXN0IFRvcm9udG88L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2FkMWU3NDI1ZmI5NDRkOGY5ZGE0MGRiNmMzNDNlYTY5LnNldENvbnRlbnQoaHRtbF80OGFjOGQxMDFiZTk0N2RjOTIzZWUxYTYwY2RlMTA4MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kYTAzNjNkN2VlMGE0ODg2YmZlM2FjMDcwNjM5M2JlMS5iaW5kUG9wdXAocG9wdXBfYWQxZTc0MjVmYjk0NGQ4ZjlkYTQwZGI2YzM0M2VhNjkpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q4NDM5YmZjYjZmYjQ1MTY5MzU0ZDBlYmY1YzkxMzkxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUxNTcwNiwgLTc5LjQ4NDQ0OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOWM5Yjc5ZTUxNTA3NDYzNWJiYzE1YjlhOGMzOGM3OWMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMGM4MDdkZjk4YTJkNGVkYjg5MzIyMGZhZTYyOWIxNjAgPSAkKGA8ZGl2IGlkPSJodG1sXzBjODA3ZGY5OGEyZDRlZGI4OTMyMjBmYWU2MjliMTYwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SdW5ueW1lZGUsU3dhbnNlYSwgV2VzdCBUb3JvbnRvPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85YzliNzllNTE1MDc0NjM1YmJjMTViOWE4YzM4Yzc5Yy5zZXRDb250ZW50KGh0bWxfMGM4MDdkZjk4YTJkNGVkYjg5MzIyMGZhZTYyOWIxNjApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDg0MzliZmNiNmZiNDUxNjkzNTRkMGViZjVjOTEzOTEuYmluZFBvcHVwKHBvcHVwXzljOWI3OWU1MTUwNzQ2MzViYmMxNWI5YThjMzhjNzljKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mNTNiNTY5MTIwMDY0NzFlYTYzMWFkNDFiZjhhODg1OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2MjMwMTUsIC03OS4zODk0OTM4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MxNzYxNTcwMzg2NTRjOGNiODEwMTE2NTlkZWYyMGVmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIzMTc3YzAwYzc3ODRhMTA4NjI4Y2ZiNWMxYzVhNDkzID0gJChgPGRpdiBpZD0iaHRtbF8yMzE3N2MwMGM3Nzg0YTEwODYyOGNmYjVjMWM1YTQ5MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UXVlZW4mIzM5O3MgUGFyaywgRG93bnRvd24gVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzE3NjE1NzAzODY1NGM4Y2I4MTAxMTY1OWRlZjIwZWYuc2V0Q29udGVudChodG1sXzIzMTc3YzAwYzc3ODRhMTA4NjI4Y2ZiNWMxYzVhNDkzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Y1M2I1NjkxMjAwNjQ3MWVhNjMxYWQ0MWJmOGE4ODU4LmJpbmRQb3B1cChwb3B1cF9jMTc2MTU3MDM4NjU0YzhjYjgxMDExNjU5ZGVmMjBlZikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNjE1ZmNhYWUwMDE3NDgwNzg0NjU0ZTlmYWZhMDVlYzQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42MzY5NjU2LCAtNzkuNjE1ODE5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE2MTQxYTg4MDhhZjQ2OGI4MWE1ZTI4N2JlYTY4ZjMzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzUyZTIyNGE0MDhkYzRkMGRiMDFjYTQxODU4ZGU5OWU0ID0gJChgPGRpdiBpZD0iaHRtbF81MmUyMjRhNDA4ZGM0ZDBkYjAxY2E0MTg1OGRlOTllNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FuYWRhIFBvc3QgR2F0ZXdheSBQcm9jZXNzaW5nIENlbnRyZSwgTWlzc2lzc2F1Z2E8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzE2MTQxYTg4MDhhZjQ2OGI4MWE1ZTI4N2JlYTY4ZjMzLnNldENvbnRlbnQoaHRtbF81MmUyMjRhNDA4ZGM0ZDBkYjAxY2E0MTg1OGRlOTllNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82MTVmY2FhZTAwMTc0ODA3ODQ2NTRlOWZhZmEwNWVjNC5iaW5kUG9wdXAocG9wdXBfMTYxNDFhODgwOGFmNDY4YjgxYTVlMjg3YmVhNjhmMzMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2NlZmY4YTIyOGVkYTQ2MDU4NzlhNjJiZmYyMDk3OTVjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNzQzOSwgLTc5LjMyMTU1OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kNGMzM2M5NWU1ODE0OWRkYmZlNzkxOTNmYTAxZWIwYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84Y2U3YTdjNmZiZWY0NzVkODc4MGM3ZmQ5YmVmMWQwMyA9ICQoYDxkaXYgaWQ9Imh0bWxfOGNlN2E3YzZmYmVmNDc1ZDg3ODBjN2ZkOWJlZjFkMDMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJ1c2luZXNzIFJlcGx5IE1haWwgUHJvY2Vzc2luZyBDZW50cmUgOTY5IEVhc3Rlcm4sIEVhc3QgVG9yb250bzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDRjMzNjOTVlNTgxNDlkZGJmZTc5MTkzZmEwMWViMGIuc2V0Q29udGVudChodG1sXzhjZTdhN2M2ZmJlZjQ3NWQ4NzgwYzdmZDliZWYxZDAzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NlZmY4YTIyOGVkYTQ2MDU4NzlhNjJiZmYyMDk3OTVjLmJpbmRQb3B1cChwb3B1cF9kNGMzM2M5NWU1ODE0OWRkYmZlNzkxOTNmYTAxZWIwYikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzc3NDQzOThhMWUzNDUxMDhkN2M4Y2E0NzRlMzM0NzQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42MDU2NDY2LCAtNzkuNTAxMzIwN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82NGZlYWVlMWVhZDM0OGJlYTIxMDY1YTFjNDliNDc0ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80OGJhYzUzZDE3MGM0NDk3YWRlODMyMTNhYjE5ZDgwMyA9ICQoYDxkaXYgaWQ9Imh0bWxfNDhiYWM1M2QxNzBjNDQ5N2FkZTgzMjEzYWIxOWQ4MDMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1pbWljbyBTb3V0aCxIdW1iZXIgQmF5IFNob3JlcyxOZXcgVG9yb250bywgRXRvYmljb2tlPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82NGZlYWVlMWVhZDM0OGJlYTIxMDY1YTFjNDliNDc0ZS5zZXRDb250ZW50KGh0bWxfNDhiYWM1M2QxNzBjNDQ5N2FkZTgzMjEzYWIxOWQ4MDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzc3NDQzOThhMWUzNDUxMDhkN2M4Y2E0NzRlMzM0NzQuYmluZFBvcHVwKHBvcHVwXzY0ZmVhZWUxZWFkMzQ4YmVhMjEwNjVhMWM0OWI0NzRlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81NjZkMmY1OWQzMmY0NmQ2YjEzMWIxZjhmYWRjZWMyZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYwMjQxMzcsIC03OS41NDM0ODQxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzRhZDVkYjg0MWI5ODRhNzJiYTg3YWVjYTQ1NmE2ZGQwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQxYzgwZjM0NjQ0ZDQwNTQ5Mjc3YTc2ZWNlNDEzNjQ5ID0gJChgPGRpdiBpZD0iaHRtbF80MWM4MGYzNDY0NGQ0MDU0OTI3N2E3NmVjZTQxMzY0OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TG9uZyBCcmFuY2gsQWxkZXJ3b29kLCBFdG9iaWNva2U8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRhZDVkYjg0MWI5ODRhNzJiYTg3YWVjYTQ1NmE2ZGQwLnNldENvbnRlbnQoaHRtbF80MWM4MGYzNDY0NGQ0MDU0OTI3N2E3NmVjZTQxMzY0OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81NjZkMmY1OWQzMmY0NmQ2YjEzMWIxZjhmYWRjZWMyZC5iaW5kUG9wdXAocG9wdXBfNGFkNWRiODQxYjk4NGE3MmJhODdhZWNhNDU2YTZkZDApCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzUzOGZiNjYyYThmNzRhN2FiMjFiN2NiODNiZTYxMDYxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUzNjUzNiwgLTc5LjUwNjk0MzZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDMzMDNlMDY1MjhlNDkyOWE2YmZhYzQ5MDEwMjc0OGQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMTkwZDkxN2M5NjMzNDhkMTllZThjYzc5NzdhMjc1Y2YgPSAkKGA8ZGl2IGlkPSJodG1sXzE5MGQ5MTdjOTYzMzQ4ZDE5ZWU4Y2M3OTc3YTI3NWNmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgS2luZ3N3YXksT2xkIE1pbGwgTm9ydGgsTW9udGdvbWVyeSBSb2FkLCBFdG9iaWNva2U8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QzMzAzZTA2NTI4ZTQ5MjlhNmJmYWM0OTAxMDI3NDhkLnNldENvbnRlbnQoaHRtbF8xOTBkOTE3Yzk2MzM0OGQxOWVlOGNjNzk3N2EyNzVjZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81MzhmYjY2MmE4Zjc0YTdhYjIxYjdjYjgzYmU2MTA2MS5iaW5kUG9wdXAocG9wdXBfZDMzMDNlMDY1MjhlNDkyOWE2YmZhYzQ5MDEwMjc0OGQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzE0NTg2M2E5YzRiODRjOTNiN2QwNTJmN2JhNGI1MDYwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjM2MjU3OSwgLTc5LjQ5ODUwOTFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWIwZjg3ZmQzNWZhNDllNzg2MTc0YzcxNjhmZGU1MDAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDU2Mzc5YmQ3Zjc0NGIzNDg4N2FmNWFmODk3YzNjMzEgPSAkKGA8ZGl2IGlkPSJodG1sX2Q1NjM3OWJkN2Y3NDRiMzQ4ODdhZjVhZjg5N2MzYzMxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Sb3lhbCBZb3JrIFNvdXRoIEVhc3QsT2xkIE1pbGwgU291dGgsVGhlIFF1ZWVuc3dheSBFYXN0LFN1bm55bGVhLEtpbmcmIzM5O3MgTWlsbCBQYXJrLE1pbWljbyBORSxIdW1iZXIgQmF5LEtpbmdzd2F5IFBhcmsgU291dGggRWFzdCwgRXRvYmljb2tlPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xYjBmODdmZDM1ZmE0OWU3ODYxNzRjNzE2OGZkZTUwMC5zZXRDb250ZW50KGh0bWxfZDU2Mzc5YmQ3Zjc0NGIzNDg4N2FmNWFmODk3YzNjMzEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTQ1ODYzYTljNGI4NGM5M2I3ZDA1MmY3YmE0YjUwNjAuYmluZFBvcHVwKHBvcHVwXzFiMGY4N2ZkMzVmYTQ5ZTc4NjE3NGM3MTY4ZmRlNTAwKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84ZTdiMmZiOGZkMmY0ODVjODNiNTlhNWMzMTE4OTQ3OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYyODg0MDgsIC03OS41MjA5OTk0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U0NmVjZWRhY2QwYTQ2ZWJhMWE1NzYxZGNjN2VhYzZiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAzNWQyMjI4ZGNjMDRkZGJhZmU3ZWZkMjNhOWYwNTQyID0gJChgPGRpdiBpZD0iaHRtbF8wMzVkMjIyOGRjYzA0ZGRiYWZlN2VmZDIzYTlmMDU0MiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U291dGggb2YgQmxvb3IsTWltaWNvIE5XLFJveWFsIFlvcmsgU291dGggV2VzdCxLaW5nc3dheSBQYXJrIFNvdXRoIFdlc3QsVGhlIFF1ZWVuc3dheSBXZXN0LCBFdG9iaWNva2U8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U0NmVjZWRhY2QwYTQ2ZWJhMWE1NzYxZGNjN2VhYzZiLnNldENvbnRlbnQoaHRtbF8wMzVkMjIyOGRjYzA0ZGRiYWZlN2VmZDIzYTlmMDU0Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84ZTdiMmZiOGZkMmY0ODVjODNiNTlhNWMzMTE4OTQ3OC5iaW5kUG9wdXAocG9wdXBfZTQ2ZWNlZGFjZDBhNDZlYmExYTU3NjFkY2M3ZWFjNmIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhhN2RiYTU5ZTk3ZTQ4OWNiMDQ1NWE1NTU5NzAyMThlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY3ODU1NiwgLTc5LjUzMjI0MjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGVmODg2ZGZhNWRiNDMyYzlmMDNmY2YzZGYzZTZiNmYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYmEyMWY3MzllMDUwNDVhZTkyMzY2NzUxODE1YTc1ZmQgPSAkKGA8ZGl2IGlkPSJodG1sX2JhMjFmNzM5ZTA1MDQ1YWU5MjM2Njc1MTgxNWE3NWZkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5RdWVlbiYjMzk7cyBQYXJrLCBRdWVlbiYjMzk7cyBQYXJrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wZWY4ODZkZmE1ZGI0MzJjOWYwM2ZjZjNkZjNlNmI2Zi5zZXRDb250ZW50KGh0bWxfYmEyMWY3MzllMDUwNDVhZTkyMzY2NzUxODE1YTc1ZmQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGE3ZGJhNTllOTdlNDg5Y2IwNDU1YTU1NTk3MDIxOGUuYmluZFBvcHVwKHBvcHVwXzBlZjg4NmRmYTVkYjQzMmM5ZjAzZmNmM2RmM2U2YjZmKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iZWFmMzY2OGEwZWQ0OTdlYmEyZDdiNGU0Mzk1OGRjYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDk0MzIsIC03OS41NTQ3MjQ0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBhYTllOTVjZGE3YzQ5ZDhhODlmYzZkNWI1Mjk4YTIyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAyNTFkYjU2MDlkODRiNmQ4ZGRlYTYwZjBkMDg5MzA4ID0gJChgPGRpdiBpZD0iaHRtbF8wMjUxZGI1NjA5ZDg0YjZkOGRkZWE2MGYwZDA4OTMwOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TWFydGluIEdyb3ZlLENsb3ZlcmRhbGUsSXNsaW5ndG9uLFdlc3QgRGVhbmUgUGFyayxQcmluY2VzcyBHYXJkZW5zLCBFdG9iaWNva2U8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBhYTllOTVjZGE3YzQ5ZDhhODlmYzZkNWI1Mjk4YTIyLnNldENvbnRlbnQoaHRtbF8wMjUxZGI1NjA5ZDg0YjZkOGRkZWE2MGYwZDA4OTMwOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iZWFmMzY2OGEwZWQ0OTdlYmEyZDdiNGU0Mzk1OGRjYy5iaW5kUG9wdXAocG9wdXBfMGFhOWU5NWNkYTdjNDlkOGE4OWZjNmQ1YjUyOThhMjIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzU4NDUwNzg4NWEyOTQzMTU4OTQ2YzA1NDE1ZDJkMmRhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQzNTE1MiwgLTc5LjU3NzIwMDhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzhmZTJjMjllMzJkNDgzYjliMTJhMGEyMjNjNDE0ZWMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2E3NDQ2Yjc4MjBjNDMzZmI5ODg5ZjFmNTIwMGQ3NjYgPSAkKGA8ZGl2IGlkPSJodG1sX2NhNzQ0NmI3ODIwYzQzM2ZiOTg4OWYxZjUyMDBkNzY2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5FcmluZ2F0ZSxNYXJrbGFuZCBXb29kLE9sZCBCdXJuaGFtdGhvcnBlLEJsb29yZGFsZSBHYXJkZW5zLCBFdG9iaWNva2U8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM4ZmUyYzI5ZTMyZDQ4M2I5YjEyYTBhMjIzYzQxNGVjLnNldENvbnRlbnQoaHRtbF9jYTc0NDZiNzgyMGM0MzNmYjk4ODlmMWY1MjAwZDc2Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81ODQ1MDc4ODVhMjk0MzE1ODk0NmMwNTQxNWQyZDJkYS5iaW5kUG9wdXAocG9wdXBfMzhmZTJjMjllMzJkNDgzYjliMTJhMGEyMjNjNDE0ZWMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzRkNThhYTg1Yzg1MDQ1NGQ5NmRlNDRlMGNkYzJkOTliID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU2MzAzMywgLTc5LjU2NTk2MzNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTUyYjEwNWI1OWUwNGRmOGJiM2ZkNmYyNDNhZDQ2NGQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjQ1ZTA2MGY4YWY1NDBkNWJhMWM2OTgxYmMwZWI1MzUgPSAkKGA8ZGl2IGlkPSJodG1sX2I0NWUwNjBmOGFmNTQwZDViYTFjNjk4MWJjMGViNTM1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IdW1iZXIgU3VtbWl0LCBOb3J0aCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lNTJiMTA1YjU5ZTA0ZGY4YmIzZmQ2ZjI0M2FkNDY0ZC5zZXRDb250ZW50KGh0bWxfYjQ1ZTA2MGY4YWY1NDBkNWJhMWM2OTgxYmMwZWI1MzUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGQ1OGFhODVjODUwNDU0ZDk2ZGU0NGUwY2RjMmQ5OWIuYmluZFBvcHVwKHBvcHVwX2U1MmIxMDViNTllMDRkZjhiYjNmZDZmMjQzYWQ0NjRkKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xMjczZmQ4ZWUwMzQ0NDRiOTNlNDAxYjZjNTJhYzNmMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcyNDc2NTksIC03OS41MzIyNDI0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZiMmZhODQxY2Y3MjQ1MmVhZjQyNjlmMWQ5MzBiMjM2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RkYTk3YjUxYTcyYjQ2N2JiMDcxNTMyMTZmMGMwNzZiID0gJChgPGRpdiBpZD0iaHRtbF9kZGE5N2I1MWE3MmI0NjdiYjA3MTUzMjE2ZjBjMDc2YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SHVtYmVybGVhLEVtZXJ5LCBOb3J0aCBZb3JrPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mYjJmYTg0MWNmNzI0NTJlYWY0MjY5ZjFkOTMwYjIzNi5zZXRDb250ZW50KGh0bWxfZGRhOTdiNTFhNzJiNDY3YmIwNzE1MzIxNmYwYzA3NmIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTI3M2ZkOGVlMDM0NDQ0YjkzZTQwMWI2YzUyYWMzZjEuYmluZFBvcHVwKHBvcHVwX2ZiMmZhODQxY2Y3MjQ1MmVhZjQyNjlmMWQ5MzBiMjM2KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jNTYxOGM5ODA4NDc0ZWJmODRkMWM1YzJmNDRjNzY0MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcwNjg3NiwgLTc5LjUxODE4ODRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogImJsdWUiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNlNWFhZjdlMWMwNGRjM2JkNDU4ZTZiNzhhNDdkMDIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzMwZTIxODM3OWU1NDdlZWI1YWM5NmUxYmQ1NWEwZjMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2IyZTJlODY2NjE0NDBiMzg1OGQzNmM1YWJhZGU0ZTUgPSAkKGA8ZGl2IGlkPSJodG1sXzdiMmUyZTg2NjYxNDQwYjM4NThkMzZjNWFiYWRlNGU1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XZXN0b24sIFlvcms8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMzMGUyMTgzNzllNTQ3ZWViNWFjOTZlMWJkNTVhMGYzLnNldENvbnRlbnQoaHRtbF83YjJlMmU4NjY2MTQ0MGIzODU4ZDM2YzVhYmFkZTRlNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNTYxOGM5ODA4NDc0ZWJmODRkMWM1YzJmNDRjNzY0My5iaW5kUG9wdXAocG9wdXBfMzMwZTIxODM3OWU1NDdlZWI1YWM5NmUxYmQ1NWEwZjMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhlYmRiOTIyNDg4ZjRjYmJiOWExZTM5MTg1ODliMjkyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjk2MzE5LCAtNzkuNTMyMjQyNF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81MGViNTRmZTMzMzM0OWU2OWQyNWUwMjZhZjdhNDFiNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zYzllMTNmZGIzNTc0ZWUyOThiMWQyYzRiMmE5Y2I5MSA9ICQoYDxkaXYgaWQ9Imh0bWxfM2M5ZTEzZmRiMzU3NGVlMjk4YjFkMmM0YjJhOWNiOTEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldlc3Rtb3VudCwgRXRvYmljb2tlPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81MGViNTRmZTMzMzM0OWU2OWQyNWUwMjZhZjdhNDFiNy5zZXRDb250ZW50KGh0bWxfM2M5ZTEzZmRiMzU3NGVlMjk4YjFkMmM0YjJhOWNiOTEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGViZGI5MjI0ODhmNGNiYmI5YTFlMzkxODU4OWIyOTIuYmluZFBvcHVwKHBvcHVwXzUwZWI1NGZlMzMzMzQ5ZTY5ZDI1ZTAyNmFmN2E0MWI3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wZDRkZmNlNjI3YmQ0YWE1OGRlZmIxNzU3ZjM5Yzg1YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4ODkwNTQsIC03OS41NTQ3MjQ0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I5ZTIxZmFmMGMzODQzMDdiYzdiNjUyMzE0NmEyZmZlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ExN2Q2MzJkM2Y4ODRmNDZiZjY4OTUxODAxMmI5OGYyID0gJChgPGRpdiBpZD0iaHRtbF9hMTdkNjMyZDNmODg0ZjQ2YmY2ODk1MTgwMTJiOThmMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+S2luZ3N2aWV3IFZpbGxhZ2UsTWFydGluIEdyb3ZlIEdhcmRlbnMsU3QuIFBoaWxsaXBzLFJpY2h2aWV3IEdhcmRlbnMsIEV0b2JpY29rZTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjllMjFmYWYwYzM4NDMwN2JjN2I2NTIzMTQ2YTJmZmUuc2V0Q29udGVudChodG1sX2ExN2Q2MzJkM2Y4ODRmNDZiZjY4OTUxODAxMmI5OGYyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzBkNGRmY2U2MjdiZDRhYTU4ZGVmYjE3NTdmMzljODVjLmJpbmRQb3B1cChwb3B1cF9iOWUyMWZhZjBjMzg0MzA3YmM3YjY1MjMxNDZhMmZmZSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjlmMzFkMWQ5ODljNDhmYzhjZWRmMWYzN2ZjM2FmYWYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43Mzk0MTY0LCAtNzkuNTg4NDM2OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiYmx1ZSIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2U1YWFmN2UxYzA0ZGMzYmQ0NThlNmI3OGE0N2QwMik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80ZDU0NDNlOWVjZWI0MmIxYjcyMjI1Njk5ZTgzZWYxMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jZjI0ZWE5ZGI3YTY0MjMyYjkzZTU4NDNhNTBlOTRjMCA9ICQoYDxkaXYgaWQ9Imh0bWxfY2YyNGVhOWRiN2E2NDIzMmI5M2U1ODQzYTUwZTk0YzAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNpbHZlcnN0b25lLEJlYXVtb25kIEhlaWdodHMsVGhpc3RsZXRvd24sQWxiaW9uIEdhcmRlbnMsTW91bnQgT2xpdmUsSHVtYmVyZ2F0ZSxKYW1lc3Rvd24sU291dGggU3RlZWxlcywgRXRvYmljb2tlPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80ZDU0NDNlOWVjZWI0MmIxYjcyMjI1Njk5ZTgzZWYxMC5zZXRDb250ZW50KGh0bWxfY2YyNGVhOWRiN2E2NDIzMmI5M2U1ODQzYTUwZTk0YzApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjlmMzFkMWQ5ODljNDhmYzhjZWRmMWYzN2ZjM2FmYWYuYmluZFBvcHVwKHBvcHVwXzRkNTQ0M2U5ZWNlYjQyYjFiNzIyMjU2OTllODNlZjEwKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83MWFmZjVlYTUyNzQ0ZmU4YjY2ZjI1NTYxYzczOWVlZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcwNjc0ODMsIC03OS41OTQwNTQ0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICJibHVlIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZTVhYWY3ZTFjMDRkYzNiZDQ1OGU2Yjc4YTQ3ZDAyKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VlZDFkNDM3M2Q4ZDQ2ODFhY2YxZmJhZDU5MDI0MWJkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RkODhiMGY3ZWMxOTQ0NmY5NmNmM2NhZTExMTNlN2YzID0gJChgPGRpdiBpZD0iaHRtbF9kZDg4YjBmN2VjMTk0NDZmOTZjZjNjYWUxMTEzZTdmMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9ydGh3ZXN0LCBFdG9iaWNva2U8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2VlZDFkNDM3M2Q4ZDQ2ODFhY2YxZmJhZDU5MDI0MWJkLnNldENvbnRlbnQoaHRtbF9kZDg4YjBmN2VjMTk0NDZmOTZjZjNjYWUxMTEzZTdmMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83MWFmZjVlYTUyNzQ0ZmU4YjY2ZjI1NTYxYzczOWVlZi5iaW5kUG9wdXAocG9wdXBfZWVkMWQ0MzczZDhkNDY4MWFjZjFmYmFkNTkwMjQxYmQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAo8L3NjcmlwdD4=\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x125b09b50>"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Toronto map with google credentials\n",
    "toronto_latitude = 43.6532; toronto_longitude = -79.3832\n",
    "map_toronto = folium.Map(location = [toronto_latitude, toronto_longitude], zoom_start = 10.7)\n",
    "toronto_data= df1[df1['Borough'].str.contains('Toronto', na = False)].reset_index(drop=True)\n",
    "toronto_data.head()\n",
    "# adding markers (similar to New York lab)\n",
    "for lat, lng, borough, neighborhood in zip(df1['Latitude'], df1['Longitude'], df1['Borough'], df1['Neighbourhood']):\n",
    "    label = '{}, {}'.format(neighborhood, borough)\n",
    "    label = folium.Popup(label, parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lng],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color='blue',\n",
    "        fill=True,\n",
    "        fill_color='#3186cc',\n",
    "        fill_opacity=0.7).add_to(map_toronto)  \n",
    "    \n",
    "\n",
    "map_toronto"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Define Foursquare Credentials and Version\n",
    "CLIENT_ID = '4FEBBIZLGY151WKCSXOPKA2SFEOS4AEWSCU1JVP5B32BSBT2' \n",
    "CLIENT_SECRET = '5UK5DKZRISPLDV35OP2BNVYWA3EB5LXYOJ324LFMTH21PNOB' # your Foursquare Secret\n",
    "VERSION = '20200202'\n",
    "LIMIT = 100 \n",
    "radius = 500"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "def getNearbyVenues(names, latitudes, longitudes, radius=500):\n",
    "    \n",
    "    venues_list=[]\n",
    "    for name, lat, lng in zip(names, latitudes, longitudes):\n",
    "        print(name)\n",
    "            \n",
    "        # create the API request URL\n",
    "        url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(\n",
    "            CLIENT_ID, \n",
    "            CLIENT_SECRET, \n",
    "            VERSION, \n",
    "            lat, \n",
    "            lng, \n",
    "            radius, \n",
    "            LIMIT)\n",
    "            \n",
    "        # make the GET request\n",
    "        results = requests.get(url).json()[\"response\"]['groups'][0]['items']\n",
    "        \n",
    "        # return only relevant information for each nearby venue\n",
    "        venues_list.append([(\n",
    "            name, \n",
    "            lat, \n",
    "            lng, \n",
    "            v['venue']['name'], \n",
    "            v['venue']['location']['lat'], \n",
    "            v['venue']['location']['lng'],  \n",
    "            v['venue']['categories'][0]['name']) for v in results])\n",
    "\n",
    "    nearby_venues = pd.DataFrame([item for venue_list in venues_list for item in venue_list])\n",
    "    nearby_venues.columns = ['Neighborhood', \n",
    "                  'Neighborhood Latitude', \n",
    "                  'Neighborhood Longitude', \n",
    "                  'Venue', \n",
    "                  'Venue Latitude', \n",
    "                  'Venue Longitude', \n",
    "                  'Venue Category']\n",
    "    \n",
    "    return(nearby_venues)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The Beaches\n",
      "The Danforth West,Riverdale\n",
      "India Bazaar,The Beaches West\n",
      "Studio District\n",
      "Lawrence Park\n",
      "Davisville North\n",
      "North Toronto West\n",
      "Davisville\n",
      "Moore Park,Summerhill East\n",
      "Rathnelly,Deer Park,Forest Hill SE,Summerhill West,South Hill\n",
      "Rosedale\n",
      "St. James Town,Cabbagetown\n",
      "Church and Wellesley\n",
      "Harbourfront\n",
      "Ryerson,Garden District\n",
      "St. James Town\n",
      "Berczy Park\n",
      "Central Bay Street\n",
      "Richmond,King,Adelaide\n",
      "Union Station,Toronto Islands,Harbourfront East\n",
      "Toronto Dominion Centre,Design Exchange\n",
      "Commerce Court,Victoria Hotel\n",
      "Roselawn\n",
      "Forest Hill North,Forest Hill West\n",
      "The Annex,Yorkville,North Midtown\n",
      "Harbord,University of Toronto\n",
      "Grange Park,Kensington Market,Chinatown\n",
      "Island airport,King and Spadina,Bathurst Quay,CN Tower,Harbourfront West,Railway Lands,South Niagara\n",
      "Stn A PO Boxes 25 The Esplanade\n",
      "Underground city,First Canadian Place\n",
      "Christie\n",
      "Dovercourt Village,Dufferin\n",
      "Little Portugal,Trinity\n",
      "Parkdale Village,Exhibition Place,Brockton\n",
      "High Park,The Junction South\n",
      "Roncesvalles,Parkdale\n",
      "Runnymede,Swansea\n",
      "Queen's Park\n",
      "Business Reply Mail Processing Centre 969 Eastern\n"
     ]
    }
   ],
   "source": [
    "#Find venues with toronto name\n",
    "toronto_venues = getNearbyVenues(names=toronto_data['Neighbourhood'],\n",
    "                                   latitudes=toronto_data['Latitude'],\n",
    "                                   longitudes=toronto_data['Longitude']\n",
    "                                  )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "(1706, 7)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Neighborhood Latitude</th>\n",
       "      <th>Neighborhood Longitude</th>\n",
       "      <th>Venue</th>\n",
       "      <th>Venue Latitude</th>\n",
       "      <th>Venue Longitude</th>\n",
       "      <th>Venue Category</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>43.676357</td>\n",
       "      <td>-79.293031</td>\n",
       "      <td>Glen Manor Ravine</td>\n",
       "      <td>43.676821</td>\n",
       "      <td>-79.293942</td>\n",
       "      <td>Trail</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>43.676357</td>\n",
       "      <td>-79.293031</td>\n",
       "      <td>The Big Carrot Natural Food Market</td>\n",
       "      <td>43.678879</td>\n",
       "      <td>-79.297734</td>\n",
       "      <td>Health Food Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>43.676357</td>\n",
       "      <td>-79.293031</td>\n",
       "      <td>Grover Pub and Grub</td>\n",
       "      <td>43.679181</td>\n",
       "      <td>-79.297215</td>\n",
       "      <td>Pub</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>43.676357</td>\n",
       "      <td>-79.293031</td>\n",
       "      <td>Upper Beaches</td>\n",
       "      <td>43.680563</td>\n",
       "      <td>-79.292869</td>\n",
       "      <td>Neighborhood</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>The Danforth West,Riverdale</td>\n",
       "      <td>43.679557</td>\n",
       "      <td>-79.352188</td>\n",
       "      <td>Pantheon</td>\n",
       "      <td>43.677621</td>\n",
       "      <td>-79.351434</td>\n",
       "      <td>Greek Restaurant</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                  Neighborhood  Neighborhood Latitude  Neighborhood Longitude  \\\n",
       "0                  The Beaches              43.676357              -79.293031   \n",
       "1                  The Beaches              43.676357              -79.293031   \n",
       "2                  The Beaches              43.676357              -79.293031   \n",
       "3                  The Beaches              43.676357              -79.293031   \n",
       "4  The Danforth West,Riverdale              43.679557              -79.352188   \n",
       "\n",
       "                                Venue  Venue Latitude  Venue Longitude  \\\n",
       "0                   Glen Manor Ravine       43.676821       -79.293942   \n",
       "1  The Big Carrot Natural Food Market       43.678879       -79.297734   \n",
       "2                 Grover Pub and Grub       43.679181       -79.297215   \n",
       "3                       Upper Beaches       43.680563       -79.292869   \n",
       "4                            Pantheon       43.677621       -79.351434   \n",
       "\n",
       "      Venue Category  \n",
       "0              Trail  \n",
       "1  Health Food Store  \n",
       "2                Pub  \n",
       "3       Neighborhood  \n",
       "4   Greek Restaurant  "
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "print(toronto_venues.shape)\n",
    "toronto_venues.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood Latitude</th>\n",
       "      <th>Neighborhood Longitude</th>\n",
       "      <th>Venue</th>\n",
       "      <th>Venue Latitude</th>\n",
       "      <th>Venue Longitude</th>\n",
       "      <th>Venue Category</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Neighborhood</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Berczy Park</th>\n",
       "      <td>55</td>\n",
       "      <td>55</td>\n",
       "      <td>55</td>\n",
       "      <td>55</td>\n",
       "      <td>55</td>\n",
       "      <td>55</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Business Reply Mail Processing Centre 969 Eastern</th>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Central Bay Street</th>\n",
       "      <td>84</td>\n",
       "      <td>84</td>\n",
       "      <td>84</td>\n",
       "      <td>84</td>\n",
       "      <td>84</td>\n",
       "      <td>84</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Christie</th>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Church and Wellesley</th>\n",
       "      <td>81</td>\n",
       "      <td>81</td>\n",
       "      <td>81</td>\n",
       "      <td>81</td>\n",
       "      <td>81</td>\n",
       "      <td>81</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Commerce Court,Victoria Hotel</th>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Davisville</th>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Davisville North</th>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Dovercourt Village,Dufferin</th>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Forest Hill North,Forest Hill West</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Grange Park,Kensington Market,Chinatown</th>\n",
       "      <td>80</td>\n",
       "      <td>80</td>\n",
       "      <td>80</td>\n",
       "      <td>80</td>\n",
       "      <td>80</td>\n",
       "      <td>80</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Harbord,University of Toronto</th>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Harbourfront</th>\n",
       "      <td>46</td>\n",
       "      <td>46</td>\n",
       "      <td>46</td>\n",
       "      <td>46</td>\n",
       "      <td>46</td>\n",
       "      <td>46</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>High Park,The Junction South</th>\n",
       "      <td>25</td>\n",
       "      <td>25</td>\n",
       "      <td>25</td>\n",
       "      <td>25</td>\n",
       "      <td>25</td>\n",
       "      <td>25</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>India Bazaar,The Beaches West</th>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Island airport,King and Spadina,Bathurst Quay,CN Tower,Harbourfront West,Railway Lands,South Niagara</th>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Lawrence Park</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Little Portugal,Trinity</th>\n",
       "      <td>51</td>\n",
       "      <td>51</td>\n",
       "      <td>51</td>\n",
       "      <td>51</td>\n",
       "      <td>51</td>\n",
       "      <td>51</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Moore Park,Summerhill East</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>North Toronto West</th>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "      <td>23</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Parkdale Village,Exhibition Place,Brockton</th>\n",
       "      <td>24</td>\n",
       "      <td>24</td>\n",
       "      <td>24</td>\n",
       "      <td>24</td>\n",
       "      <td>24</td>\n",
       "      <td>24</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Queen's Park</th>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Rathnelly,Deer Park,Forest Hill SE,Summerhill West,South Hill</th>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Richmond,King,Adelaide</th>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Roncesvalles,Parkdale</th>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "      <td>14</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Rosedale</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Roselawn</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Runnymede,Swansea</th>\n",
       "      <td>40</td>\n",
       "      <td>40</td>\n",
       "      <td>40</td>\n",
       "      <td>40</td>\n",
       "      <td>40</td>\n",
       "      <td>40</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ryerson,Garden District</th>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>St. James Town</th>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>St. James Town,Cabbagetown</th>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Stn A PO Boxes 25 The Esplanade</th>\n",
       "      <td>95</td>\n",
       "      <td>95</td>\n",
       "      <td>95</td>\n",
       "      <td>95</td>\n",
       "      <td>95</td>\n",
       "      <td>95</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Studio District</th>\n",
       "      <td>41</td>\n",
       "      <td>41</td>\n",
       "      <td>41</td>\n",
       "      <td>41</td>\n",
       "      <td>41</td>\n",
       "      <td>41</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>The Annex,Yorkville,North Midtown</th>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>The Beaches</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>The Danforth West,Riverdale</th>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "      <td>42</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Toronto Dominion Centre,Design Exchange</th>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Underground city,First Canadian Place</th>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Union Station,Toronto Islands,Harbourfront East</th>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                    Neighborhood Latitude  \\\n",
       "Neighborhood                                                                \n",
       "Berczy Park                                                            55   \n",
       "Business Reply Mail Processing Centre 969 Eastern                      17   \n",
       "Central Bay Street                                                     84   \n",
       "Christie                                                               18   \n",
       "Church and Wellesley                                                   81   \n",
       "Commerce Court,Victoria Hotel                                         100   \n",
       "Davisville                                                             35   \n",
       "Davisville North                                                        7   \n",
       "Dovercourt Village,Dufferin                                            19   \n",
       "Forest Hill North,Forest Hill West                                      4   \n",
       "Grange Park,Kensington Market,Chinatown                                80   \n",
       "Harbord,University of Toronto                                          36   \n",
       "Harbourfront                                                           46   \n",
       "High Park,The Junction South                                           25   \n",
       "India Bazaar,The Beaches West                                          18   \n",
       "Island airport,King and Spadina,Bathurst Quay,C...                     16   \n",
       "Lawrence Park                                                           4   \n",
       "Little Portugal,Trinity                                                51   \n",
       "Moore Park,Summerhill East                                              4   \n",
       "North Toronto West                                                     23   \n",
       "Parkdale Village,Exhibition Place,Brockton                             24   \n",
       "Queen's Park                                                           39   \n",
       "Rathnelly,Deer Park,Forest Hill SE,Summerhill W...                     14   \n",
       "Richmond,King,Adelaide                                                100   \n",
       "Roncesvalles,Parkdale                                                  14   \n",
       "Rosedale                                                                4   \n",
       "Roselawn                                                                3   \n",
       "Runnymede,Swansea                                                      40   \n",
       "Ryerson,Garden District                                               100   \n",
       "St. James Town                                                        100   \n",
       "St. James Town,Cabbagetown                                             42   \n",
       "Stn A PO Boxes 25 The Esplanade                                        95   \n",
       "Studio District                                                        41   \n",
       "The Annex,Yorkville,North Midtown                                      21   \n",
       "The Beaches                                                             4   \n",
       "The Danforth West,Riverdale                                            42   \n",
       "Toronto Dominion Centre,Design Exchange                               100   \n",
       "Underground city,First Canadian Place                                 100   \n",
       "Union Station,Toronto Islands,Harbourfront East                       100   \n",
       "\n",
       "                                                    Neighborhood Longitude  \\\n",
       "Neighborhood                                                                 \n",
       "Berczy Park                                                             55   \n",
       "Business Reply Mail Processing Centre 969 Eastern                       17   \n",
       "Central Bay Street                                                      84   \n",
       "Christie                                                                18   \n",
       "Church and Wellesley                                                    81   \n",
       "Commerce Court,Victoria Hotel                                          100   \n",
       "Davisville                                                              35   \n",
       "Davisville North                                                         7   \n",
       "Dovercourt Village,Dufferin                                             19   \n",
       "Forest Hill North,Forest Hill West                                       4   \n",
       "Grange Park,Kensington Market,Chinatown                                 80   \n",
       "Harbord,University of Toronto                                           36   \n",
       "Harbourfront                                                            46   \n",
       "High Park,The Junction South                                            25   \n",
       "India Bazaar,The Beaches West                                           18   \n",
       "Island airport,King and Spadina,Bathurst Quay,C...                      16   \n",
       "Lawrence Park                                                            4   \n",
       "Little Portugal,Trinity                                                 51   \n",
       "Moore Park,Summerhill East                                               4   \n",
       "North Toronto West                                                      23   \n",
       "Parkdale Village,Exhibition Place,Brockton                              24   \n",
       "Queen's Park                                                            39   \n",
       "Rathnelly,Deer Park,Forest Hill SE,Summerhill W...                      14   \n",
       "Richmond,King,Adelaide                                                 100   \n",
       "Roncesvalles,Parkdale                                                   14   \n",
       "Rosedale                                                                 4   \n",
       "Roselawn                                                                 3   \n",
       "Runnymede,Swansea                                                       40   \n",
       "Ryerson,Garden District                                                100   \n",
       "St. James Town                                                         100   \n",
       "St. James Town,Cabbagetown                                              42   \n",
       "Stn A PO Boxes 25 The Esplanade                                         95   \n",
       "Studio District                                                         41   \n",
       "The Annex,Yorkville,North Midtown                                       21   \n",
       "The Beaches                                                              4   \n",
       "The Danforth West,Riverdale                                             42   \n",
       "Toronto Dominion Centre,Design Exchange                                100   \n",
       "Underground city,First Canadian Place                                  100   \n",
       "Union Station,Toronto Islands,Harbourfront East                        100   \n",
       "\n",
       "                                                    Venue  Venue Latitude  \\\n",
       "Neighborhood                                                                \n",
       "Berczy Park                                            55              55   \n",
       "Business Reply Mail Processing Centre 969 Eastern      17              17   \n",
       "Central Bay Street                                     84              84   \n",
       "Christie                                               18              18   \n",
       "Church and Wellesley                                   81              81   \n",
       "Commerce Court,Victoria Hotel                         100             100   \n",
       "Davisville                                             35              35   \n",
       "Davisville North                                        7               7   \n",
       "Dovercourt Village,Dufferin                            19              19   \n",
       "Forest Hill North,Forest Hill West                      4               4   \n",
       "Grange Park,Kensington Market,Chinatown                80              80   \n",
       "Harbord,University of Toronto                          36              36   \n",
       "Harbourfront                                           46              46   \n",
       "High Park,The Junction South                           25              25   \n",
       "India Bazaar,The Beaches West                          18              18   \n",
       "Island airport,King and Spadina,Bathurst Quay,C...     16              16   \n",
       "Lawrence Park                                           4               4   \n",
       "Little Portugal,Trinity                                51              51   \n",
       "Moore Park,Summerhill East                              4               4   \n",
       "North Toronto West                                     23              23   \n",
       "Parkdale Village,Exhibition Place,Brockton             24              24   \n",
       "Queen's Park                                           39              39   \n",
       "Rathnelly,Deer Park,Forest Hill SE,Summerhill W...     14              14   \n",
       "Richmond,King,Adelaide                                100             100   \n",
       "Roncesvalles,Parkdale                                  14              14   \n",
       "Rosedale                                                4               4   \n",
       "Roselawn                                                3               3   \n",
       "Runnymede,Swansea                                      40              40   \n",
       "Ryerson,Garden District                               100             100   \n",
       "St. James Town                                        100             100   \n",
       "St. James Town,Cabbagetown                             42              42   \n",
       "Stn A PO Boxes 25 The Esplanade                        95              95   \n",
       "Studio District                                        41              41   \n",
       "The Annex,Yorkville,North Midtown                      21              21   \n",
       "The Beaches                                             4               4   \n",
       "The Danforth West,Riverdale                            42              42   \n",
       "Toronto Dominion Centre,Design Exchange               100             100   \n",
       "Underground city,First Canadian Place                 100             100   \n",
       "Union Station,Toronto Islands,Harbourfront East       100             100   \n",
       "\n",
       "                                                    Venue Longitude  \\\n",
       "Neighborhood                                                          \n",
       "Berczy Park                                                      55   \n",
       "Business Reply Mail Processing Centre 969 Eastern                17   \n",
       "Central Bay Street                                               84   \n",
       "Christie                                                         18   \n",
       "Church and Wellesley                                             81   \n",
       "Commerce Court,Victoria Hotel                                   100   \n",
       "Davisville                                                       35   \n",
       "Davisville North                                                  7   \n",
       "Dovercourt Village,Dufferin                                      19   \n",
       "Forest Hill North,Forest Hill West                                4   \n",
       "Grange Park,Kensington Market,Chinatown                          80   \n",
       "Harbord,University of Toronto                                    36   \n",
       "Harbourfront                                                     46   \n",
       "High Park,The Junction South                                     25   \n",
       "India Bazaar,The Beaches West                                    18   \n",
       "Island airport,King and Spadina,Bathurst Quay,C...               16   \n",
       "Lawrence Park                                                     4   \n",
       "Little Portugal,Trinity                                          51   \n",
       "Moore Park,Summerhill East                                        4   \n",
       "North Toronto West                                               23   \n",
       "Parkdale Village,Exhibition Place,Brockton                       24   \n",
       "Queen's Park                                                     39   \n",
       "Rathnelly,Deer Park,Forest Hill SE,Summerhill W...               14   \n",
       "Richmond,King,Adelaide                                          100   \n",
       "Roncesvalles,Parkdale                                            14   \n",
       "Rosedale                                                          4   \n",
       "Roselawn                                                          3   \n",
       "Runnymede,Swansea                                                40   \n",
       "Ryerson,Garden District                                         100   \n",
       "St. James Town                                                  100   \n",
       "St. James Town,Cabbagetown                                       42   \n",
       "Stn A PO Boxes 25 The Esplanade                                  95   \n",
       "Studio District                                                  41   \n",
       "The Annex,Yorkville,North Midtown                                21   \n",
       "The Beaches                                                       4   \n",
       "The Danforth West,Riverdale                                      42   \n",
       "Toronto Dominion Centre,Design Exchange                         100   \n",
       "Underground city,First Canadian Place                           100   \n",
       "Union Station,Toronto Islands,Harbourfront East                 100   \n",
       "\n",
       "                                                    Venue Category  \n",
       "Neighborhood                                                        \n",
       "Berczy Park                                                     55  \n",
       "Business Reply Mail Processing Centre 969 Eastern               17  \n",
       "Central Bay Street                                              84  \n",
       "Christie                                                        18  \n",
       "Church and Wellesley                                            81  \n",
       "Commerce Court,Victoria Hotel                                  100  \n",
       "Davisville                                                      35  \n",
       "Davisville North                                                 7  \n",
       "Dovercourt Village,Dufferin                                     19  \n",
       "Forest Hill North,Forest Hill West                               4  \n",
       "Grange Park,Kensington Market,Chinatown                         80  \n",
       "Harbord,University of Toronto                                   36  \n",
       "Harbourfront                                                    46  \n",
       "High Park,The Junction South                                    25  \n",
       "India Bazaar,The Beaches West                                   18  \n",
       "Island airport,King and Spadina,Bathurst Quay,C...              16  \n",
       "Lawrence Park                                                    4  \n",
       "Little Portugal,Trinity                                         51  \n",
       "Moore Park,Summerhill East                                       4  \n",
       "North Toronto West                                              23  \n",
       "Parkdale Village,Exhibition Place,Brockton                      24  \n",
       "Queen's Park                                                    39  \n",
       "Rathnelly,Deer Park,Forest Hill SE,Summerhill W...              14  \n",
       "Richmond,King,Adelaide                                         100  \n",
       "Roncesvalles,Parkdale                                           14  \n",
       "Rosedale                                                         4  \n",
       "Roselawn                                                         3  \n",
       "Runnymede,Swansea                                               40  \n",
       "Ryerson,Garden District                                        100  \n",
       "St. James Town                                                 100  \n",
       "St. James Town,Cabbagetown                                      42  \n",
       "Stn A PO Boxes 25 The Esplanade                                 95  \n",
       "Studio District                                                 41  \n",
       "The Annex,Yorkville,North Midtown                               21  \n",
       "The Beaches                                                      4  \n",
       "The Danforth West,Riverdale                                     42  \n",
       "Toronto Dominion Centre,Design Exchange                        100  \n",
       "Underground city,First Canadian Place                          100  \n",
       "Union Station,Toronto Islands,Harbourfront East                100  "
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#group venues by neighborhood\n",
    "toronto_venues.groupby('Neighborhood').count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighbourhood</th>\n",
       "      <th>Afghan Restaurant</th>\n",
       "      <th>Airport</th>\n",
       "      <th>Airport Food Court</th>\n",
       "      <th>Airport Gate</th>\n",
       "      <th>Airport Lounge</th>\n",
       "      <th>Airport Service</th>\n",
       "      <th>Airport Terminal</th>\n",
       "      <th>American Restaurant</th>\n",
       "      <th>Antique Shop</th>\n",
       "      <th>...</th>\n",
       "      <th>Theme Restaurant</th>\n",
       "      <th>Toy / Game Store</th>\n",
       "      <th>Trail</th>\n",
       "      <th>Train Station</th>\n",
       "      <th>Vegetarian / Vegan Restaurant</th>\n",
       "      <th>Video Game Store</th>\n",
       "      <th>Vietnamese Restaurant</th>\n",
       "      <th>Wine Bar</th>\n",
       "      <th>Women's Store</th>\n",
       "      <th>Yoga Studio</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>The Danforth West,Riverdale</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 229 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                 Neighbourhood  Afghan Restaurant  Airport  \\\n",
       "0                  The Beaches                  0        0   \n",
       "1                  The Beaches                  0        0   \n",
       "2                  The Beaches                  0        0   \n",
       "3                  The Beaches                  0        0   \n",
       "4  The Danforth West,Riverdale                  0        0   \n",
       "\n",
       "   Airport Food Court  Airport Gate  Airport Lounge  Airport Service  \\\n",
       "0                   0             0               0                0   \n",
       "1                   0             0               0                0   \n",
       "2                   0             0               0                0   \n",
       "3                   0             0               0                0   \n",
       "4                   0             0               0                0   \n",
       "\n",
       "   Airport Terminal  American Restaurant  Antique Shop  ...  Theme Restaurant  \\\n",
       "0                 0                    0             0  ...                 0   \n",
       "1                 0                    0             0  ...                 0   \n",
       "2                 0                    0             0  ...                 0   \n",
       "3                 0                    0             0  ...                 0   \n",
       "4                 0                    0             0  ...                 0   \n",
       "\n",
       "   Toy / Game Store  Trail  Train Station  Vegetarian / Vegan Restaurant  \\\n",
       "0                 0      1              0                              0   \n",
       "1                 0      0              0                              0   \n",
       "2                 0      0              0                              0   \n",
       "3                 0      0              0                              0   \n",
       "4                 0      0              0                              0   \n",
       "\n",
       "   Video Game Store  Vietnamese Restaurant  Wine Bar  Women's Store  \\\n",
       "0                 0                      0         0              0   \n",
       "1                 0                      0         0              0   \n",
       "2                 0                      0         0              0   \n",
       "3                 0                      0         0              0   \n",
       "4                 0                      0         0              0   \n",
       "\n",
       "   Yoga Studio  \n",
       "0            0  \n",
       "1            0  \n",
       "2            0  \n",
       "3            0  \n",
       "4            0  \n",
       "\n",
       "[5 rows x 229 columns]"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "toronto_onehot = pd.get_dummies(toronto_venues[['Venue Category']], prefix=\"\", prefix_sep=\"\")\n",
    "# dataframe column preparations (moving and renaming for further steps)\n",
    "toronto_onehot['Neighborhood'] = toronto_venues['Neighborhood'] \n",
    "cols=list(toronto_onehot.columns.values)\n",
    "cols.pop(cols.index('Neighborhood'))\n",
    "toronto_onehot=toronto_onehot[['Neighborhood']+cols]\n",
    "toronto_onehot.rename(columns = {'Neighborhood': 'Neighbourhood'}, inplace = True)\n",
    "toronto_onehot.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighbourhood</th>\n",
       "      <th>Afghan Restaurant</th>\n",
       "      <th>Airport</th>\n",
       "      <th>Airport Food Court</th>\n",
       "      <th>Airport Gate</th>\n",
       "      <th>Airport Lounge</th>\n",
       "      <th>Airport Service</th>\n",
       "      <th>Airport Terminal</th>\n",
       "      <th>American Restaurant</th>\n",
       "      <th>Antique Shop</th>\n",
       "      <th>...</th>\n",
       "      <th>Theme Restaurant</th>\n",
       "      <th>Toy / Game Store</th>\n",
       "      <th>Trail</th>\n",
       "      <th>Train Station</th>\n",
       "      <th>Vegetarian / Vegan Restaurant</th>\n",
       "      <th>Video Game Store</th>\n",
       "      <th>Vietnamese Restaurant</th>\n",
       "      <th>Wine Bar</th>\n",
       "      <th>Women's Store</th>\n",
       "      <th>Yoga Studio</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Berczy Park</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.018182</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Central Bay Street</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.011905</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.011905</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.011905</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.011905</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Christie</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Church and Wellesley</td>\n",
       "      <td>0.012346</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.012346</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.012346</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.012346</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.012346</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Commerce Court,Victoria Hotel</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.030000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.020000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Davisville</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.028571</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Davisville North</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Dovercourt Village,Dufferin</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Forest Hill North,Forest Hill West</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.25000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Grange Park,Kensington Market,Chinatown</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.050000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.050000</td>\n",
       "      <td>0.012500</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Harbord,University of Toronto</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.027778</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.027778</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Harbourfront</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.021739</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.021739</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>High Park,The Junction South</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.040000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>India Bazaar,The Beaches West</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Island airport,King and Spadina,Bathurst Quay,...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0625</td>\n",
       "      <td>0.0625</td>\n",
       "      <td>0.0625</td>\n",
       "      <td>0.125</td>\n",
       "      <td>0.1875</td>\n",
       "      <td>0.125</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Lawrence Park</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>Little Portugal,Trinity</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.019608</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.039216</td>\n",
       "      <td>0.019608</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.019608</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>Moore Park,Summerhill East</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>North Toronto West</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.043478</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.043478</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>Parkdale Village,Exhibition Place,Brockton</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.041667</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.025641</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>Rathnelly,Deer Park,Forest Hill SE,Summerhill ...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.071429</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.071429</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>Richmond,King,Adelaide</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.020000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.020000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.01</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>Roncesvalles,Parkdale</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>Rosedale</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.25000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>Roselawn</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>Runnymede,Swansea</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.025000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.025000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>Ryerson,Garden District</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>St. James Town</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.030000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>St. James Town,Cabbagetown</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>31</th>\n",
       "      <td>Stn A PO Boxes 25 The Esplanade</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.010526</td>\n",
       "      <td>0.010526</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.010526</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>32</th>\n",
       "      <td>Studio District</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.048780</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.024390</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.024390</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>The Annex,Yorkville,North Midtown</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>34</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.25000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>35</th>\n",
       "      <td>The Danforth West,Riverdale</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.023810</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.02381</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.023810</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>36</th>\n",
       "      <td>Toronto Dominion Centre,Design Exchange</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.030000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.01</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>37</th>\n",
       "      <td>Underground city,First Canadian Place</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.020000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.01</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>38</th>\n",
       "      <td>Union Station,Toronto Islands,Harbourfront East</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.0000</td>\n",
       "      <td>0.000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.00000</td>\n",
       "      <td>0.01</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.010000</td>\n",
       "      <td>0.00</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>39 rows × 229 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                        Neighbourhood  Afghan Restaurant  \\\n",
       "0                                         Berczy Park           0.000000   \n",
       "1   Business Reply Mail Processing Centre 969 Eastern           0.000000   \n",
       "2                                  Central Bay Street           0.000000   \n",
       "3                                            Christie           0.000000   \n",
       "4                                Church and Wellesley           0.012346   \n",
       "5                       Commerce Court,Victoria Hotel           0.000000   \n",
       "6                                          Davisville           0.000000   \n",
       "7                                    Davisville North           0.000000   \n",
       "8                         Dovercourt Village,Dufferin           0.000000   \n",
       "9                  Forest Hill North,Forest Hill West           0.000000   \n",
       "10            Grange Park,Kensington Market,Chinatown           0.000000   \n",
       "11                      Harbord,University of Toronto           0.000000   \n",
       "12                                       Harbourfront           0.000000   \n",
       "13                       High Park,The Junction South           0.000000   \n",
       "14                      India Bazaar,The Beaches West           0.000000   \n",
       "15  Island airport,King and Spadina,Bathurst Quay,...           0.000000   \n",
       "16                                      Lawrence Park           0.000000   \n",
       "17                            Little Portugal,Trinity           0.000000   \n",
       "18                         Moore Park,Summerhill East           0.000000   \n",
       "19                                 North Toronto West           0.000000   \n",
       "20         Parkdale Village,Exhibition Place,Brockton           0.000000   \n",
       "21                                       Queen's Park           0.000000   \n",
       "22  Rathnelly,Deer Park,Forest Hill SE,Summerhill ...           0.000000   \n",
       "23                             Richmond,King,Adelaide           0.000000   \n",
       "24                              Roncesvalles,Parkdale           0.000000   \n",
       "25                                           Rosedale           0.000000   \n",
       "26                                           Roselawn           0.000000   \n",
       "27                                  Runnymede,Swansea           0.000000   \n",
       "28                            Ryerson,Garden District           0.000000   \n",
       "29                                     St. James Town           0.000000   \n",
       "30                         St. James Town,Cabbagetown           0.000000   \n",
       "31                    Stn A PO Boxes 25 The Esplanade           0.000000   \n",
       "32                                    Studio District           0.000000   \n",
       "33                  The Annex,Yorkville,North Midtown           0.000000   \n",
       "34                                        The Beaches           0.000000   \n",
       "35                        The Danforth West,Riverdale           0.000000   \n",
       "36            Toronto Dominion Centre,Design Exchange           0.000000   \n",
       "37              Underground city,First Canadian Place           0.000000   \n",
       "38    Union Station,Toronto Islands,Harbourfront East           0.000000   \n",
       "\n",
       "    Airport  Airport Food Court  Airport Gate  Airport Lounge  \\\n",
       "0    0.0000              0.0000        0.0000           0.000   \n",
       "1    0.0000              0.0000        0.0000           0.000   \n",
       "2    0.0000              0.0000        0.0000           0.000   \n",
       "3    0.0000              0.0000        0.0000           0.000   \n",
       "4    0.0000              0.0000        0.0000           0.000   \n",
       "5    0.0000              0.0000        0.0000           0.000   \n",
       "6    0.0000              0.0000        0.0000           0.000   \n",
       "7    0.0000              0.0000        0.0000           0.000   \n",
       "8    0.0000              0.0000        0.0000           0.000   \n",
       "9    0.0000              0.0000        0.0000           0.000   \n",
       "10   0.0000              0.0000        0.0000           0.000   \n",
       "11   0.0000              0.0000        0.0000           0.000   \n",
       "12   0.0000              0.0000        0.0000           0.000   \n",
       "13   0.0000              0.0000        0.0000           0.000   \n",
       "14   0.0000              0.0000        0.0000           0.000   \n",
       "15   0.0625              0.0625        0.0625           0.125   \n",
       "16   0.0000              0.0000        0.0000           0.000   \n",
       "17   0.0000              0.0000        0.0000           0.000   \n",
       "18   0.0000              0.0000        0.0000           0.000   \n",
       "19   0.0000              0.0000        0.0000           0.000   \n",
       "20   0.0000              0.0000        0.0000           0.000   \n",
       "21   0.0000              0.0000        0.0000           0.000   \n",
       "22   0.0000              0.0000        0.0000           0.000   \n",
       "23   0.0000              0.0000        0.0000           0.000   \n",
       "24   0.0000              0.0000        0.0000           0.000   \n",
       "25   0.0000              0.0000        0.0000           0.000   \n",
       "26   0.0000              0.0000        0.0000           0.000   \n",
       "27   0.0000              0.0000        0.0000           0.000   \n",
       "28   0.0000              0.0000        0.0000           0.000   \n",
       "29   0.0000              0.0000        0.0000           0.000   \n",
       "30   0.0000              0.0000        0.0000           0.000   \n",
       "31   0.0000              0.0000        0.0000           0.000   \n",
       "32   0.0000              0.0000        0.0000           0.000   \n",
       "33   0.0000              0.0000        0.0000           0.000   \n",
       "34   0.0000              0.0000        0.0000           0.000   \n",
       "35   0.0000              0.0000        0.0000           0.000   \n",
       "36   0.0000              0.0000        0.0000           0.000   \n",
       "37   0.0000              0.0000        0.0000           0.000   \n",
       "38   0.0000              0.0000        0.0000           0.000   \n",
       "\n",
       "    Airport Service  Airport Terminal  American Restaurant  Antique Shop  ...  \\\n",
       "0            0.0000             0.000             0.000000      0.000000  ...   \n",
       "1            0.0000             0.000             0.000000      0.000000  ...   \n",
       "2            0.0000             0.000             0.011905      0.000000  ...   \n",
       "3            0.0000             0.000             0.000000      0.000000  ...   \n",
       "4            0.0000             0.000             0.012346      0.000000  ...   \n",
       "5            0.0000             0.000             0.030000      0.000000  ...   \n",
       "6            0.0000             0.000             0.000000      0.000000  ...   \n",
       "7            0.0000             0.000             0.000000      0.000000  ...   \n",
       "8            0.0000             0.000             0.000000      0.000000  ...   \n",
       "9            0.0000             0.000             0.000000      0.000000  ...   \n",
       "10           0.0000             0.000             0.000000      0.000000  ...   \n",
       "11           0.0000             0.000             0.000000      0.000000  ...   \n",
       "12           0.0000             0.000             0.000000      0.021739  ...   \n",
       "13           0.0000             0.000             0.000000      0.040000  ...   \n",
       "14           0.0000             0.000             0.000000      0.000000  ...   \n",
       "15           0.1875             0.125             0.000000      0.000000  ...   \n",
       "16           0.0000             0.000             0.000000      0.000000  ...   \n",
       "17           0.0000             0.000             0.000000      0.000000  ...   \n",
       "18           0.0000             0.000             0.000000      0.000000  ...   \n",
       "19           0.0000             0.000             0.000000      0.000000  ...   \n",
       "20           0.0000             0.000             0.000000      0.000000  ...   \n",
       "21           0.0000             0.000             0.000000      0.000000  ...   \n",
       "22           0.0000             0.000             0.071429      0.000000  ...   \n",
       "23           0.0000             0.000             0.020000      0.000000  ...   \n",
       "24           0.0000             0.000             0.000000      0.000000  ...   \n",
       "25           0.0000             0.000             0.000000      0.000000  ...   \n",
       "26           0.0000             0.000             0.000000      0.000000  ...   \n",
       "27           0.0000             0.000             0.000000      0.000000  ...   \n",
       "28           0.0000             0.000             0.010000      0.000000  ...   \n",
       "29           0.0000             0.000             0.030000      0.000000  ...   \n",
       "30           0.0000             0.000             0.000000      0.000000  ...   \n",
       "31           0.0000             0.000             0.010526      0.010526  ...   \n",
       "32           0.0000             0.000             0.048780      0.000000  ...   \n",
       "33           0.0000             0.000             0.047619      0.000000  ...   \n",
       "34           0.0000             0.000             0.000000      0.000000  ...   \n",
       "35           0.0000             0.000             0.023810      0.000000  ...   \n",
       "36           0.0000             0.000             0.030000      0.000000  ...   \n",
       "37           0.0000             0.000             0.020000      0.000000  ...   \n",
       "38           0.0000             0.000             0.000000      0.000000  ...   \n",
       "\n",
       "    Theme Restaurant  Toy / Game Store    Trail  Train Station  \\\n",
       "0           0.000000          0.000000  0.00000           0.00   \n",
       "1           0.000000          0.000000  0.00000           0.00   \n",
       "2           0.000000          0.000000  0.00000           0.00   \n",
       "3           0.000000          0.000000  0.00000           0.00   \n",
       "4           0.012346          0.000000  0.00000           0.00   \n",
       "5           0.000000          0.000000  0.00000           0.00   \n",
       "6           0.000000          0.028571  0.00000           0.00   \n",
       "7           0.000000          0.000000  0.00000           0.00   \n",
       "8           0.000000          0.000000  0.00000           0.00   \n",
       "9           0.000000          0.000000  0.25000           0.00   \n",
       "10          0.000000          0.000000  0.00000           0.00   \n",
       "11          0.000000          0.000000  0.00000           0.00   \n",
       "12          0.000000          0.000000  0.00000           0.00   \n",
       "13          0.000000          0.000000  0.00000           0.00   \n",
       "14          0.000000          0.000000  0.00000           0.00   \n",
       "15          0.000000          0.000000  0.00000           0.00   \n",
       "16          0.000000          0.000000  0.00000           0.00   \n",
       "17          0.000000          0.000000  0.00000           0.00   \n",
       "18          0.000000          0.000000  0.00000           0.00   \n",
       "19          0.000000          0.043478  0.00000           0.00   \n",
       "20          0.000000          0.000000  0.00000           0.00   \n",
       "21          0.000000          0.000000  0.00000           0.00   \n",
       "22          0.000000          0.000000  0.00000           0.00   \n",
       "23          0.000000          0.000000  0.00000           0.00   \n",
       "24          0.000000          0.000000  0.00000           0.00   \n",
       "25          0.000000          0.000000  0.25000           0.00   \n",
       "26          0.000000          0.000000  0.00000           0.00   \n",
       "27          0.000000          0.000000  0.00000           0.00   \n",
       "28          0.000000          0.010000  0.00000           0.00   \n",
       "29          0.000000          0.000000  0.00000           0.00   \n",
       "30          0.000000          0.000000  0.00000           0.00   \n",
       "31          0.000000          0.000000  0.00000           0.00   \n",
       "32          0.000000          0.000000  0.00000           0.00   \n",
       "33          0.000000          0.000000  0.00000           0.00   \n",
       "34          0.000000          0.000000  0.25000           0.00   \n",
       "35          0.000000          0.000000  0.02381           0.00   \n",
       "36          0.000000          0.000000  0.00000           0.01   \n",
       "37          0.000000          0.000000  0.00000           0.01   \n",
       "38          0.000000          0.000000  0.00000           0.01   \n",
       "\n",
       "    Vegetarian / Vegan Restaurant  Video Game Store  Vietnamese Restaurant  \\\n",
       "0                        0.018182          0.000000               0.000000   \n",
       "1                        0.000000          0.000000               0.000000   \n",
       "2                        0.011905          0.000000               0.000000   \n",
       "3                        0.000000          0.000000               0.000000   \n",
       "4                        0.000000          0.000000               0.012346   \n",
       "5                        0.020000          0.000000               0.000000   \n",
       "6                        0.000000          0.000000               0.000000   \n",
       "7                        0.000000          0.000000               0.000000   \n",
       "8                        0.000000          0.000000               0.000000   \n",
       "9                        0.000000          0.000000               0.000000   \n",
       "10                       0.050000          0.000000               0.050000   \n",
       "11                       0.000000          0.027778               0.000000   \n",
       "12                       0.000000          0.000000               0.000000   \n",
       "13                       0.000000          0.000000               0.000000   \n",
       "14                       0.000000          0.000000               0.000000   \n",
       "15                       0.000000          0.000000               0.000000   \n",
       "16                       0.000000          0.000000               0.000000   \n",
       "17                       0.019608          0.000000               0.039216   \n",
       "18                       0.000000          0.000000               0.000000   \n",
       "19                       0.000000          0.000000               0.000000   \n",
       "20                       0.000000          0.000000               0.000000   \n",
       "21                       0.000000          0.000000               0.000000   \n",
       "22                       0.000000          0.000000               0.071429   \n",
       "23                       0.020000          0.000000               0.000000   \n",
       "24                       0.000000          0.000000               0.000000   \n",
       "25                       0.000000          0.000000               0.000000   \n",
       "26                       0.000000          0.000000               0.000000   \n",
       "27                       0.025000          0.000000               0.000000   \n",
       "28                       0.000000          0.010000               0.010000   \n",
       "29                       0.010000          0.000000               0.000000   \n",
       "30                       0.000000          0.000000               0.000000   \n",
       "31                       0.010526          0.000000               0.000000   \n",
       "32                       0.000000          0.000000               0.000000   \n",
       "33                       0.047619          0.000000               0.000000   \n",
       "34                       0.000000          0.000000               0.000000   \n",
       "35                       0.000000          0.000000               0.000000   \n",
       "36                       0.010000          0.000000               0.000000   \n",
       "37                       0.010000          0.000000               0.000000   \n",
       "38                       0.010000          0.000000               0.000000   \n",
       "\n",
       "    Wine Bar  Women's Store  Yoga Studio  \n",
       "0   0.000000           0.00     0.000000  \n",
       "1   0.000000           0.00     0.000000  \n",
       "2   0.011905           0.00     0.011905  \n",
       "3   0.000000           0.00     0.000000  \n",
       "4   0.000000           0.00     0.012346  \n",
       "5   0.010000           0.00     0.000000  \n",
       "6   0.000000           0.00     0.000000  \n",
       "7   0.000000           0.00     0.000000  \n",
       "8   0.000000           0.00     0.000000  \n",
       "9   0.000000           0.00     0.000000  \n",
       "10  0.012500           0.00     0.000000  \n",
       "11  0.000000           0.00     0.027778  \n",
       "12  0.000000           0.00     0.021739  \n",
       "13  0.000000           0.00     0.000000  \n",
       "14  0.000000           0.00     0.000000  \n",
       "15  0.000000           0.00     0.000000  \n",
       "16  0.000000           0.00     0.000000  \n",
       "17  0.019608           0.00     0.019608  \n",
       "18  0.000000           0.00     0.000000  \n",
       "19  0.000000           0.00     0.043478  \n",
       "20  0.000000           0.00     0.041667  \n",
       "21  0.000000           0.00     0.025641  \n",
       "22  0.000000           0.00     0.000000  \n",
       "23  0.010000           0.01     0.000000  \n",
       "24  0.000000           0.00     0.000000  \n",
       "25  0.000000           0.00     0.000000  \n",
       "26  0.000000           0.00     0.000000  \n",
       "27  0.000000           0.00     0.025000  \n",
       "28  0.010000           0.00     0.000000  \n",
       "29  0.010000           0.00     0.000000  \n",
       "30  0.000000           0.00     0.000000  \n",
       "31  0.000000           0.00     0.000000  \n",
       "32  0.024390           0.00     0.024390  \n",
       "33  0.000000           0.00     0.000000  \n",
       "34  0.000000           0.00     0.000000  \n",
       "35  0.000000           0.00     0.023810  \n",
       "36  0.010000           0.00     0.000000  \n",
       "37  0.010000           0.00     0.000000  \n",
       "38  0.010000           0.00     0.000000  \n",
       "\n",
       "[39 rows x 229 columns]"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#group reset\n",
    "toronto_grouped = toronto_onehot.groupby('Neighbourhood').mean().reset_index()\n",
    "toronto_grouped"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "----Berczy Park----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.07\n",
      "1        Cocktail Bar  0.05\n",
      "2  Seafood Restaurant  0.04\n",
      "3         Cheese Shop  0.04\n",
      "4          Steakhouse  0.04\n",
      "\n",
      "\n",
      "----Business Reply Mail Processing Centre 969 Eastern----\n",
      "              venue  freq\n",
      "0        Smoke Shop  0.06\n",
      "1     Garden Center  0.06\n",
      "2       Pizza Place  0.06\n",
      "3        Comic Shop  0.06\n",
      "4  Recording Studio  0.06\n",
      "\n",
      "\n",
      "----Central Bay Street----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.17\n",
      "1      Ice Cream Shop  0.05\n",
      "2                Café  0.05\n",
      "3  Italian Restaurant  0.05\n",
      "4      Sandwich Place  0.05\n",
      "\n",
      "\n",
      "----Christie----\n",
      "           venue  freq\n",
      "0  Grocery Store  0.22\n",
      "1           Café  0.17\n",
      "2           Park  0.11\n",
      "3      Nightclub  0.06\n",
      "4    Candy Store  0.06\n",
      "\n",
      "\n",
      "----Church and Wellesley----\n",
      "                 venue  freq\n",
      "0          Coffee Shop  0.07\n",
      "1  Japanese Restaurant  0.05\n",
      "2     Sushi Restaurant  0.05\n",
      "3              Gay Bar  0.05\n",
      "4           Restaurant  0.04\n",
      "\n",
      "\n",
      "----Commerce Court,Victoria Hotel----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.12\n",
      "1                Café  0.07\n",
      "2               Hotel  0.06\n",
      "3          Restaurant  0.05\n",
      "4  Italian Restaurant  0.03\n",
      "\n",
      "\n",
      "----Davisville----\n",
      "              venue  freq\n",
      "0    Sandwich Place  0.09\n",
      "1      Dessert Shop  0.09\n",
      "2  Sushi Restaurant  0.06\n",
      "3       Pizza Place  0.06\n",
      "4       Coffee Shop  0.06\n",
      "\n",
      "\n",
      "----Davisville North----\n",
      "               venue  freq\n",
      "0                Gym  0.14\n",
      "1               Park  0.14\n",
      "2     Breakfast Spot  0.14\n",
      "3  Food & Drink Shop  0.14\n",
      "4              Hotel  0.14\n",
      "\n",
      "\n",
      "----Dovercourt Village,Dufferin----\n",
      "              venue  freq\n",
      "0          Pharmacy  0.11\n",
      "1            Bakery  0.11\n",
      "2              Park  0.05\n",
      "3       Coffee Shop  0.05\n",
      "4  Recording Studio  0.05\n",
      "\n",
      "\n",
      "----Forest Hill North,Forest Hill West----\n",
      "               venue  freq\n",
      "0      Jewelry Store  0.25\n",
      "1              Trail  0.25\n",
      "2           Bus Line  0.25\n",
      "3   Sushi Restaurant  0.25\n",
      "4  Afghan Restaurant  0.00\n",
      "\n",
      "\n",
      "----Grange Park,Kensington Market,Chinatown----\n",
      "                           venue  freq\n",
      "0                            Bar  0.08\n",
      "1                           Café  0.06\n",
      "2             Chinese Restaurant  0.05\n",
      "3          Vietnamese Restaurant  0.05\n",
      "4  Vegetarian / Vegan Restaurant  0.05\n",
      "\n",
      "\n",
      "----Harbord,University of Toronto----\n",
      "                 venue  freq\n",
      "0                 Café  0.14\n",
      "1                  Bar  0.06\n",
      "2            Bookstore  0.06\n",
      "3  Japanese Restaurant  0.06\n",
      "4               Bakery  0.06\n",
      "\n",
      "\n",
      "----Harbourfront----\n",
      "         venue  freq\n",
      "0  Coffee Shop  0.17\n",
      "1       Bakery  0.07\n",
      "2         Park  0.07\n",
      "3         Café  0.07\n",
      "4          Pub  0.07\n",
      "\n",
      "\n",
      "----High Park,The Junction South----\n",
      "                venue  freq\n",
      "0  Mexican Restaurant  0.08\n",
      "1                 Bar  0.08\n",
      "2     Thai Restaurant  0.08\n",
      "3                Café  0.08\n",
      "4         Flea Market  0.04\n",
      "\n",
      "\n",
      "----India Bazaar,The Beaches West----\n",
      "              venue  freq\n",
      "0              Park  0.11\n",
      "1           Brewery  0.06\n",
      "2        Steakhouse  0.06\n",
      "3  Sushi Restaurant  0.06\n",
      "4    Sandwich Place  0.06\n",
      "\n",
      "\n",
      "----Island airport,King and Spadina,Bathurst Quay,CN Tower,Harbourfront West,Railway Lands,South Niagara----\n",
      "                venue  freq\n",
      "0     Airport Service  0.19\n",
      "1      Airport Lounge  0.12\n",
      "2    Airport Terminal  0.12\n",
      "3  Airport Food Court  0.06\n",
      "4        Airport Gate  0.06\n",
      "\n",
      "\n",
      "----Lawrence Park----\n",
      "               venue  freq\n",
      "0               Park  0.25\n",
      "1               Lake  0.25\n",
      "2           Bus Line  0.25\n",
      "3        Swim School  0.25\n",
      "4  Afghan Restaurant  0.00\n",
      "\n",
      "\n",
      "----Little Portugal,Trinity----\n",
      "              venue  freq\n",
      "0               Bar  0.12\n",
      "1        Restaurant  0.06\n",
      "2  Asian Restaurant  0.06\n",
      "3       Coffee Shop  0.04\n",
      "4       Pizza Place  0.04\n",
      "\n",
      "\n",
      "----Moore Park,Summerhill East----\n",
      "               venue  freq\n",
      "0         Playground  0.25\n",
      "1               Park  0.25\n",
      "2       Tennis Court  0.25\n",
      "3         Restaurant  0.25\n",
      "4  Afghan Restaurant  0.00\n",
      "\n",
      "\n",
      "----North Toronto West----\n",
      "            venue  freq\n",
      "0  Clothing Store  0.13\n",
      "1     Coffee Shop  0.09\n",
      "2   Grocery Store  0.04\n",
      "3   Metro Station  0.04\n",
      "4    Dessert Shop  0.04\n",
      "\n",
      "\n",
      "----Parkdale Village,Exhibition Place,Brockton----\n",
      "            venue  freq\n",
      "0  Breakfast Spot  0.08\n",
      "1            Café  0.08\n",
      "2     Coffee Shop  0.08\n",
      "3       Nightclub  0.08\n",
      "4             Gym  0.04\n",
      "\n",
      "\n",
      "----Queen's Park----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.26\n",
      "1                 Gym  0.05\n",
      "2                Park  0.05\n",
      "3         Yoga Studio  0.03\n",
      "4  College Auditorium  0.03\n",
      "\n",
      "\n",
      "----Rathnelly,Deer Park,Forest Hill SE,Summerhill West,South Hill----\n",
      "                 venue  freq\n",
      "0          Coffee Shop  0.14\n",
      "1                  Pub  0.14\n",
      "2  American Restaurant  0.07\n",
      "3           Restaurant  0.07\n",
      "4  Fried Chicken Joint  0.07\n",
      "\n",
      "\n",
      "----Richmond,King,Adelaide----\n",
      "            venue  freq\n",
      "0     Coffee Shop  0.07\n",
      "1            Café  0.04\n",
      "2      Steakhouse  0.04\n",
      "3             Bar  0.04\n",
      "4  Cosmetics Shop  0.03\n",
      "\n",
      "\n",
      "----Roncesvalles,Parkdale----\n",
      "                         venue  freq\n",
      "0               Breakfast Spot  0.14\n",
      "1                    Gift Shop  0.14\n",
      "2           Italian Restaurant  0.07\n",
      "3                 Dessert Shop  0.07\n",
      "4  Eastern European Restaurant  0.07\n",
      "\n",
      "\n",
      "----Rosedale----\n",
      "               venue  freq\n",
      "0               Park  0.50\n",
      "1         Playground  0.25\n",
      "2              Trail  0.25\n",
      "3  Afghan Restaurant  0.00\n",
      "4      Movie Theater  0.00\n",
      "\n",
      "\n",
      "----Roselawn----\n",
      "                     venue  freq\n",
      "0  Health & Beauty Service  0.33\n",
      "1                     Pool  0.33\n",
      "2                   Garden  0.33\n",
      "3        Afghan Restaurant  0.00\n",
      "4                   Museum  0.00\n",
      "\n",
      "\n",
      "----Runnymede,Swansea----\n",
      "                venue  freq\n",
      "0                Café  0.08\n",
      "1         Coffee Shop  0.08\n",
      "2         Pizza Place  0.08\n",
      "3  Italian Restaurant  0.05\n",
      "4    Sushi Restaurant  0.05\n",
      "\n",
      "\n",
      "----Ryerson,Garden District----\n",
      "                 venue  freq\n",
      "0          Coffee Shop  0.09\n",
      "1       Clothing Store  0.08\n",
      "2       Cosmetics Shop  0.03\n",
      "3  Japanese Restaurant  0.03\n",
      "4                 Café  0.03\n",
      "\n",
      "\n",
      "----St. James Town----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.08\n",
      "1                Café  0.06\n",
      "2          Restaurant  0.05\n",
      "3        Cocktail Bar  0.04\n",
      "4  Italian Restaurant  0.03\n",
      "\n",
      "\n",
      "----St. James Town,Cabbagetown----\n",
      "         venue  freq\n",
      "0   Restaurant  0.07\n",
      "1  Coffee Shop  0.07\n",
      "2  Pizza Place  0.05\n",
      "3       Bakery  0.05\n",
      "4         Café  0.05\n",
      "\n",
      "\n",
      "----Stn A PO Boxes 25 The Esplanade----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.13\n",
      "1                Café  0.04\n",
      "2            Beer Bar  0.03\n",
      "3        Cocktail Bar  0.03\n",
      "4  Seafood Restaurant  0.03\n",
      "\n",
      "\n",
      "----Studio District----\n",
      "                 venue  freq\n",
      "0                 Café  0.10\n",
      "1          Coffee Shop  0.07\n",
      "2              Brewery  0.05\n",
      "3  American Restaurant  0.05\n",
      "4               Bakery  0.05\n",
      "\n",
      "\n",
      "----The Annex,Yorkville,North Midtown----\n",
      "            venue  freq\n",
      "0            Café  0.14\n",
      "1  Sandwich Place  0.14\n",
      "2     Coffee Shop  0.10\n",
      "3     Pizza Place  0.05\n",
      "4       BBQ Joint  0.05\n",
      "\n",
      "\n",
      "----The Beaches----\n",
      "               venue  freq\n",
      "0  Health Food Store  0.25\n",
      "1              Trail  0.25\n",
      "2                Pub  0.25\n",
      "3  Afghan Restaurant  0.00\n",
      "4      Movie Theater  0.00\n",
      "\n",
      "\n",
      "----The Danforth West,Riverdale----\n",
      "                venue  freq\n",
      "0    Greek Restaurant  0.24\n",
      "1         Coffee Shop  0.10\n",
      "2  Italian Restaurant  0.07\n",
      "3          Restaurant  0.05\n",
      "4      Ice Cream Shop  0.05\n",
      "\n",
      "\n",
      "----Toronto Dominion Centre,Design Exchange----\n",
      "         venue  freq\n",
      "0  Coffee Shop  0.12\n",
      "1         Café  0.08\n",
      "2        Hotel  0.07\n",
      "3   Steakhouse  0.04\n",
      "4   Restaurant  0.04\n",
      "\n",
      "\n",
      "----Underground city,First Canadian Place----\n",
      "         venue  freq\n",
      "0  Coffee Shop  0.13\n",
      "1         Café  0.07\n",
      "2   Steakhouse  0.04\n",
      "3   Restaurant  0.04\n",
      "4    Gastropub  0.03\n",
      "\n",
      "\n",
      "----Union Station,Toronto Islands,Harbourfront East----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.12\n",
      "1            Aquarium  0.05\n",
      "2               Hotel  0.04\n",
      "3                Café  0.04\n",
      "4  Italian Restaurant  0.04\n",
      "\n",
      "\n"
     ]
    }
   ],
   "source": [
    "#searching for top 5 venues\n",
    "num_top_venues = 5\n",
    "for hood in toronto_grouped['Neighbourhood']:\n",
    "    print(\"----\"+hood+\"----\")\n",
    "    temp = toronto_grouped[toronto_grouped['Neighbourhood'] == hood].T.reset_index()\n",
    "    temp.columns = ['venue','freq']\n",
    "    temp = temp.iloc[1:]\n",
    "    temp['freq'] = temp['freq'].astype(float)\n",
    "    temp = temp.round({'freq': 2})\n",
    "    print(temp.sort_values('freq', ascending=False).reset_index(drop=True).head(num_top_venues))\n",
    "    print('\\n')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighbourhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Berczy Park</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>Beer Bar</td>\n",
       "      <td>Farmers Market</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>Cheese Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Greek Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "      <td>Skate Park</td>\n",
       "      <td>Auto Workshop</td>\n",
       "      <td>Brewery</td>\n",
       "      <td>Smoke Shop</td>\n",
       "      <td>Spa</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Farmers Market</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Burrito Place</td>\n",
       "      <td>Recording Studio</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Central Bay Street</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Café</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Ice Cream Shop</td>\n",
       "      <td>Juice Bar</td>\n",
       "      <td>Japanese Restaurant</td>\n",
       "      <td>Burger Joint</td>\n",
       "      <td>Salad Place</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Christie</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Café</td>\n",
       "      <td>Park</td>\n",
       "      <td>Diner</td>\n",
       "      <td>Athletics &amp; Sports</td>\n",
       "      <td>Candy Store</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Gas Station</td>\n",
       "      <td>Baby Store</td>\n",
       "      <td>Nightclub</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Church and Wellesley</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Japanese Restaurant</td>\n",
       "      <td>Gay Bar</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Men's Store</td>\n",
       "      <td>Mediterranean Restaurant</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>Gym</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Commerce Court,Victoria Hotel</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Deli / Bodega</td>\n",
       "      <td>Gastropub</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Davisville</td>\n",
       "      <td>Dessert Shop</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Café</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Brewery</td>\n",
       "      <td>Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Davisville North</td>\n",
       "      <td>Park</td>\n",
       "      <td>Department Store</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Food &amp; Drink Shop</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Comic Shop</td>\n",
       "      <td>Dim Sum Restaurant</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Dovercourt Village,Dufferin</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Pharmacy</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Middle Eastern Restaurant</td>\n",
       "      <td>Brewery</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Café</td>\n",
       "      <td>Recording Studio</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Bank</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Forest Hill North,Forest Hill West</td>\n",
       "      <td>Jewelry Store</td>\n",
       "      <td>Trail</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Bus Line</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Department Store</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Grange Park,Kensington Market,Chinatown</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Café</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "      <td>Vegetarian / Vegan Restaurant</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Mexican Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Harbord,University of Toronto</td>\n",
       "      <td>Café</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Bookstore</td>\n",
       "      <td>Japanese Restaurant</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Beer Bar</td>\n",
       "      <td>Beer Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Harbourfront</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Park</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Café</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Mexican Restaurant</td>\n",
       "      <td>Farmers Market</td>\n",
       "      <td>Event Space</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>High Park,The Junction South</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Mexican Restaurant</td>\n",
       "      <td>Café</td>\n",
       "      <td>Thai Restaurant</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Speakeasy</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Cajun / Creole Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>India Bazaar,The Beaches West</td>\n",
       "      <td>Park</td>\n",
       "      <td>Board Shop</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Brewery</td>\n",
       "      <td>Liquor Store</td>\n",
       "      <td>Burger Joint</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Burrito Place</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Island airport,King and Spadina,Bathurst Quay,...</td>\n",
       "      <td>Airport Service</td>\n",
       "      <td>Airport Lounge</td>\n",
       "      <td>Airport Terminal</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Harbor / Marina</td>\n",
       "      <td>Rental Car Location</td>\n",
       "      <td>Sculpture Garden</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Boat or Ferry</td>\n",
       "      <td>Airport</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Lawrence Park</td>\n",
       "      <td>Lake</td>\n",
       "      <td>Swim School</td>\n",
       "      <td>Bus Line</td>\n",
       "      <td>Park</td>\n",
       "      <td>General Entertainment</td>\n",
       "      <td>Deli / Bodega</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>Little Portugal,Trinity</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Vietnamese Restaurant</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Men's Store</td>\n",
       "      <td>Café</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Juice Bar</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>Moore Park,Summerhill East</td>\n",
       "      <td>Park</td>\n",
       "      <td>Playground</td>\n",
       "      <td>Tennis Court</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Dance Studio</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "      <td>Dog Run</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>North Toronto West</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Sporting Goods Shop</td>\n",
       "      <td>Salon / Barbershop</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Rental Car Location</td>\n",
       "      <td>Café</td>\n",
       "      <td>Chinese Restaurant</td>\n",
       "      <td>Park</td>\n",
       "      <td>Mexican Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>Parkdale Village,Exhibition Place,Brockton</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Café</td>\n",
       "      <td>Nightclub</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Pet Store</td>\n",
       "      <td>Stadium</td>\n",
       "      <td>Burrito Place</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Climbing Gym</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Park</td>\n",
       "      <td>Gym</td>\n",
       "      <td>College Auditorium</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Salad Place</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Burger Joint</td>\n",
       "      <td>Burrito Place</td>\n",
       "      <td>Café</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>Rathnelly,Deer Park,Forest Hill SE,Summerhill ...</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Sports Bar</td>\n",
       "      <td>Fried Chicken Joint</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>American Restaurant</td>\n",
       "      <td>Supermarket</td>\n",
       "      <td>Liquor Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>Richmond,King,Adelaide</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Burger Joint</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "      <td>Thai Restaurant</td>\n",
       "      <td>Cosmetics Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>Roncesvalles,Parkdale</td>\n",
       "      <td>Gift Shop</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Cuban Restaurant</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Dog Run</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Dessert Shop</td>\n",
       "      <td>Movie Theater</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>Rosedale</td>\n",
       "      <td>Park</td>\n",
       "      <td>Playground</td>\n",
       "      <td>Trail</td>\n",
       "      <td>Dance Studio</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "      <td>Dog Run</td>\n",
       "      <td>Discount Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>Roselawn</td>\n",
       "      <td>Health &amp; Beauty Service</td>\n",
       "      <td>Pool</td>\n",
       "      <td>Garden</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Deli / Bodega</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>Runnymede,Swansea</td>\n",
       "      <td>Café</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Dessert Shop</td>\n",
       "      <td>Burrito Place</td>\n",
       "      <td>Butcher</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>Ryerson,Garden District</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>Café</td>\n",
       "      <td>Japanese Restaurant</td>\n",
       "      <td>Cosmetics Shop</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Tea Room</td>\n",
       "      <td>Ice Cream Shop</td>\n",
       "      <td>Bubble Tea Shop</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>St. James Town</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>Cosmetics Shop</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Beer Bar</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>American Restaurant</td>\n",
       "      <td>Hotel</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>St. James Town,Cabbagetown</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Café</td>\n",
       "      <td>Butcher</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>31</th>\n",
       "      <td>Stn A PO Boxes 25 The Esplanade</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Beer Bar</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>Japanese Restaurant</td>\n",
       "      <td>Lounge</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>32</th>\n",
       "      <td>Studio District</td>\n",
       "      <td>Café</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Gastropub</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Brewery</td>\n",
       "      <td>American Restaurant</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Bookstore</td>\n",
       "      <td>Sandwich Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>The Annex,Yorkville,North Midtown</td>\n",
       "      <td>Café</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>BBQ Joint</td>\n",
       "      <td>Pharmacy</td>\n",
       "      <td>Middle Eastern Restaurant</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "      <td>History Museum</td>\n",
       "      <td>Burger Joint</td>\n",
       "      <td>Cosmetics Shop</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>34</th>\n",
       "      <td>The Beaches</td>\n",
       "      <td>Trail</td>\n",
       "      <td>Health Food Store</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Deli / Bodega</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>35</th>\n",
       "      <td>The Danforth West,Riverdale</td>\n",
       "      <td>Greek Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Ice Cream Shop</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Bubble Tea Shop</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>36</th>\n",
       "      <td>Toronto Dominion Centre,Design Exchange</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>Gastropub</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Deli / Bodega</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>37</th>\n",
       "      <td>Underground city,First Canadian Place</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "      <td>Japanese Restaurant</td>\n",
       "      <td>Gastropub</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Burger Joint</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>38</th>\n",
       "      <td>Union Station,Toronto Islands,Harbourfront East</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Aquarium</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>Café</td>\n",
       "      <td>Sporting Goods Shop</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Fried Chicken Joint</td>\n",
       "      <td>Scenic Lookout</td>\n",
       "      <td>Brewery</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                        Neighbourhood  \\\n",
       "0                                         Berczy Park   \n",
       "1   Business Reply Mail Processing Centre 969 Eastern   \n",
       "2                                  Central Bay Street   \n",
       "3                                            Christie   \n",
       "4                                Church and Wellesley   \n",
       "5                       Commerce Court,Victoria Hotel   \n",
       "6                                          Davisville   \n",
       "7                                    Davisville North   \n",
       "8                         Dovercourt Village,Dufferin   \n",
       "9                  Forest Hill North,Forest Hill West   \n",
       "10            Grange Park,Kensington Market,Chinatown   \n",
       "11                      Harbord,University of Toronto   \n",
       "12                                       Harbourfront   \n",
       "13                       High Park,The Junction South   \n",
       "14                      India Bazaar,The Beaches West   \n",
       "15  Island airport,King and Spadina,Bathurst Quay,...   \n",
       "16                                      Lawrence Park   \n",
       "17                            Little Portugal,Trinity   \n",
       "18                         Moore Park,Summerhill East   \n",
       "19                                 North Toronto West   \n",
       "20         Parkdale Village,Exhibition Place,Brockton   \n",
       "21                                       Queen's Park   \n",
       "22  Rathnelly,Deer Park,Forest Hill SE,Summerhill ...   \n",
       "23                             Richmond,King,Adelaide   \n",
       "24                              Roncesvalles,Parkdale   \n",
       "25                                           Rosedale   \n",
       "26                                           Roselawn   \n",
       "27                                  Runnymede,Swansea   \n",
       "28                            Ryerson,Garden District   \n",
       "29                                     St. James Town   \n",
       "30                         St. James Town,Cabbagetown   \n",
       "31                    Stn A PO Boxes 25 The Esplanade   \n",
       "32                                    Studio District   \n",
       "33                  The Annex,Yorkville,North Midtown   \n",
       "34                                        The Beaches   \n",
       "35                        The Danforth West,Riverdale   \n",
       "36            Toronto Dominion Centre,Design Exchange   \n",
       "37              Underground city,First Canadian Place   \n",
       "38    Union Station,Toronto Islands,Harbourfront East   \n",
       "\n",
       "      1st Most Common Venue 2nd Most Common Venue 3rd Most Common Venue  \\\n",
       "0               Coffee Shop          Cocktail Bar              Beer Bar   \n",
       "1                Skate Park         Auto Workshop               Brewery   \n",
       "2               Coffee Shop        Sandwich Place                  Café   \n",
       "3             Grocery Store                  Café                  Park   \n",
       "4               Coffee Shop   Japanese Restaurant               Gay Bar   \n",
       "5               Coffee Shop                  Café                 Hotel   \n",
       "6              Dessert Shop        Sandwich Place           Coffee Shop   \n",
       "7                      Park      Department Store        Breakfast Spot   \n",
       "8                    Bakery              Pharmacy           Coffee Shop   \n",
       "9             Jewelry Store                 Trail      Sushi Restaurant   \n",
       "10                      Bar                  Café   Dumpling Restaurant   \n",
       "11                     Café                   Bar             Bookstore   \n",
       "12              Coffee Shop                  Park                Bakery   \n",
       "13                      Bar    Mexican Restaurant                  Café   \n",
       "14                     Park            Board Shop      Sushi Restaurant   \n",
       "15          Airport Service        Airport Lounge      Airport Terminal   \n",
       "16                     Lake           Swim School              Bus Line   \n",
       "17                      Bar      Asian Restaurant            Restaurant   \n",
       "18                     Park            Playground          Tennis Court   \n",
       "19           Clothing Store           Coffee Shop   Sporting Goods Shop   \n",
       "20           Breakfast Spot                  Café             Nightclub   \n",
       "21              Coffee Shop                  Park                   Gym   \n",
       "22              Coffee Shop                   Pub           Pizza Place   \n",
       "23              Coffee Shop                  Café            Steakhouse   \n",
       "24                Gift Shop        Breakfast Spot      Cuban Restaurant   \n",
       "25                     Park            Playground                 Trail   \n",
       "26  Health & Beauty Service                  Pool                Garden   \n",
       "27                     Café           Pizza Place           Coffee Shop   \n",
       "28              Coffee Shop        Clothing Store                  Café   \n",
       "29              Coffee Shop                  Café            Restaurant   \n",
       "30               Restaurant           Coffee Shop    Italian Restaurant   \n",
       "31              Coffee Shop                  Café    Italian Restaurant   \n",
       "32                     Café           Coffee Shop             Gastropub   \n",
       "33                     Café        Sandwich Place           Coffee Shop   \n",
       "34                    Trail     Health Food Store                   Pub   \n",
       "35         Greek Restaurant           Coffee Shop    Italian Restaurant   \n",
       "36              Coffee Shop                  Café                 Hotel   \n",
       "37              Coffee Shop                  Café            Steakhouse   \n",
       "38              Coffee Shop              Aquarium    Italian Restaurant   \n",
       "\n",
       "          4th Most Common Venue          5th Most Common Venue  \\\n",
       "0                Farmers Market                         Bakery   \n",
       "1                    Smoke Shop                            Spa   \n",
       "2            Italian Restaurant                 Ice Cream Shop   \n",
       "3                         Diner             Athletics & Sports   \n",
       "4              Sushi Restaurant                     Restaurant   \n",
       "5                    Restaurant                            Gym   \n",
       "6              Sushi Restaurant                            Gym   \n",
       "7                Sandwich Place              Food & Drink Shop   \n",
       "8     Middle Eastern Restaurant                        Brewery   \n",
       "9                      Bus Line                    Yoga Studio   \n",
       "10        Vietnamese Restaurant  Vegetarian / Vegan Restaurant   \n",
       "11          Japanese Restaurant                 Sandwich Place   \n",
       "12                         Café                            Pub   \n",
       "13              Thai Restaurant             Italian Restaurant   \n",
       "14               Sandwich Place                        Brewery   \n",
       "15                  Coffee Shop                Harbor / Marina   \n",
       "16                         Park          General Entertainment   \n",
       "17                  Coffee Shop          Vietnamese Restaurant   \n",
       "18                   Restaurant                   Dance Studio   \n",
       "19           Salon / Barbershop                     Restaurant   \n",
       "20                  Coffee Shop                    Yoga Studio   \n",
       "21           College Auditorium                 Sandwich Place   \n",
       "22             Sushi Restaurant                     Sports Bar   \n",
       "23                          Bar                     Restaurant   \n",
       "24  Eastern European Restaurant             Italian Restaurant   \n",
       "25                 Dance Studio    Eastern European Restaurant   \n",
       "26                  Yoga Studio                  Deli / Bodega   \n",
       "27                   Restaurant               Sushi Restaurant   \n",
       "28          Japanese Restaurant                 Cosmetics Shop   \n",
       "29                 Cocktail Bar                 Cosmetics Shop   \n",
       "30                  Pizza Place                         Bakery   \n",
       "31           Seafood Restaurant                     Restaurant   \n",
       "32                       Bakery             Italian Restaurant   \n",
       "33                    BBQ Joint                       Pharmacy   \n",
       "34                  Yoga Studio                  Deli / Bodega   \n",
       "35               Ice Cream Shop         Furniture / Home Store   \n",
       "36                   Restaurant                     Steakhouse   \n",
       "37                   Restaurant               Asian Restaurant   \n",
       "38                        Hotel                           Café   \n",
       "\n",
       "          6th Most Common Venue        7th Most Common Venue  \\\n",
       "0            Seafood Restaurant                   Steakhouse   \n",
       "1                    Restaurant               Farmers Market   \n",
       "2                     Juice Bar          Japanese Restaurant   \n",
       "3                   Candy Store                  Coffee Shop   \n",
       "4          Fast Food Restaurant                  Men's Store   \n",
       "5            Seafood Restaurant                       Bakery   \n",
       "6                          Café           Italian Restaurant   \n",
       "7                         Hotel                          Gym   \n",
       "8          Fast Food Restaurant                         Café   \n",
       "9              Department Store            Electronics Store   \n",
       "10           Chinese Restaurant                  Coffee Shop   \n",
       "11                   Restaurant                       Bakery   \n",
       "12               Breakfast Spot                   Restaurant   \n",
       "13                    Speakeasy                   Steakhouse   \n",
       "14                 Liquor Store                 Burger Joint   \n",
       "15          Rental Car Location             Sculpture Garden   \n",
       "16                Deli / Bodega  Eastern European Restaurant   \n",
       "17                  Pizza Place                  Men's Store   \n",
       "18  Eastern European Restaurant          Dumpling Restaurant   \n",
       "19          Rental Car Location                         Café   \n",
       "20                    Pet Store                      Stadium   \n",
       "21                  Salad Place                   Restaurant   \n",
       "22          Fried Chicken Joint                   Restaurant   \n",
       "23                 Burger Joint                       Bakery   \n",
       "24                      Dog Run                          Bar   \n",
       "25          Dumpling Restaurant                   Donut Shop   \n",
       "26            Electronics Store  Eastern European Restaurant   \n",
       "27           Italian Restaurant                  Yoga Studio   \n",
       "28            Electronics Store                     Tea Room   \n",
       "29           Italian Restaurant                     Beer Bar   \n",
       "30                          Pub                         Café   \n",
       "31                     Beer Bar                        Hotel   \n",
       "32                      Brewery          American Restaurant   \n",
       "33    Middle Eastern Restaurant            Indian Restaurant   \n",
       "34            Electronics Store  Eastern European Restaurant   \n",
       "35                   Restaurant              Bubble Tea Shop   \n",
       "36                    Gastropub           Seafood Restaurant   \n",
       "37          Japanese Restaurant                    Gastropub   \n",
       "38          Sporting Goods Shop                   Restaurant   \n",
       "\n",
       "          8th Most Common Venue      9th Most Common Venue  \\\n",
       "0                   Cheese Shop                       Café   \n",
       "1          Fast Food Restaurant              Burrito Place   \n",
       "2                  Burger Joint                Salad Place   \n",
       "3                   Gas Station                 Baby Store   \n",
       "4      Mediterranean Restaurant                      Hotel   \n",
       "5            Italian Restaurant              Deli / Bodega   \n",
       "6                   Pizza Place                    Brewery   \n",
       "7                    Comic Shop         Dim Sum Restaurant   \n",
       "8              Recording Studio                        Bar   \n",
       "9   Eastern European Restaurant        Dumpling Restaurant   \n",
       "10           Mexican Restaurant                 Donut Shop   \n",
       "11                          Pub                   Beer Bar   \n",
       "12           Mexican Restaurant             Farmers Market   \n",
       "13                       Bakery  Cajun / Creole Restaurant   \n",
       "14           Italian Restaurant              Burrito Place   \n",
       "15                          Bar              Boat or Ferry   \n",
       "16          Dumpling Restaurant                 Donut Shop   \n",
       "17                         Café                Yoga Studio   \n",
       "18                   Donut Shop           Doner Restaurant   \n",
       "19           Chinese Restaurant                       Park   \n",
       "20                Burrito Place                 Restaurant   \n",
       "21                 Burger Joint              Burrito Place   \n",
       "22          American Restaurant                Supermarket   \n",
       "23             Asian Restaurant            Thai Restaurant   \n",
       "24                   Restaurant               Dessert Shop   \n",
       "25             Doner Restaurant                    Dog Run   \n",
       "26          Dumpling Restaurant                 Donut Shop   \n",
       "27                 Dessert Shop              Burrito Place   \n",
       "28               Ice Cream Shop            Bubble Tea Shop   \n",
       "29               Clothing Store        American Restaurant   \n",
       "30                      Butcher             Sandwich Place   \n",
       "31                 Cocktail Bar        Japanese Restaurant   \n",
       "32                  Yoga Studio                  Bookstore   \n",
       "33               History Museum               Burger Joint   \n",
       "34          Dumpling Restaurant                 Donut Shop   \n",
       "35                Grocery Store                        Pub   \n",
       "36                          Bar              Deli / Bodega   \n",
       "37           Seafood Restaurant                        Gym   \n",
       "38          Fried Chicken Joint             Scenic Lookout   \n",
       "\n",
       "         10th Most Common Venue  \n",
       "0              Greek Restaurant  \n",
       "1              Recording Studio  \n",
       "2            Chinese Restaurant  \n",
       "3                     Nightclub  \n",
       "4                           Gym  \n",
       "5                     Gastropub  \n",
       "6                    Restaurant  \n",
       "7   Eastern European Restaurant  \n",
       "8                          Bank  \n",
       "9                    Donut Shop  \n",
       "10                 Cocktail Bar  \n",
       "11                   Beer Store  \n",
       "12                  Event Space  \n",
       "13         Fast Food Restaurant  \n",
       "14         Fast Food Restaurant  \n",
       "15                      Airport  \n",
       "16             Doner Restaurant  \n",
       "17                    Juice Bar  \n",
       "18                      Dog Run  \n",
       "19           Mexican Restaurant  \n",
       "20                 Climbing Gym  \n",
       "21                         Café  \n",
       "22                 Liquor Store  \n",
       "23               Cosmetics Shop  \n",
       "24                Movie Theater  \n",
       "25               Discount Store  \n",
       "26             Doner Restaurant  \n",
       "27                      Butcher  \n",
       "28                  Pizza Place  \n",
       "29                        Hotel  \n",
       "30               Breakfast Spot  \n",
       "31                       Lounge  \n",
       "32               Sandwich Place  \n",
       "33               Cosmetics Shop  \n",
       "34             Doner Restaurant  \n",
       "35                  Pizza Place  \n",
       "36           Italian Restaurant  \n",
       "37                 Burger Joint  \n",
       "38                      Brewery  "
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#create new data frame for most popular venues\n",
    "def return_most_common_venues(row, num_top_venues):\n",
    "    row_categories = row.iloc[1:]\n",
    "    row_categories_sorted = row_categories.sort_values(ascending=False)\n",
    "    \n",
    "    return row_categories_sorted.index.values[0:num_top_venues]\n",
    "num_top_venues = 10\n",
    "indicators = ['st', 'nd', 'rd']\n",
    "columns = ['Neighbourhood']\n",
    "for ind in np.arange(num_top_venues):\n",
    "    try:\n",
    "        columns.append('{}{} Most Common Venue'.format(ind+1, indicators[ind]))\n",
    "    except:\n",
    "        columns.append('{}th Most Common Venue'.format(ind+1))\n",
    "neighborhoods_venues_sorted = pd.DataFrame(columns=columns)\n",
    "neighborhoods_venues_sorted['Neighbourhood'] = toronto_grouped['Neighbourhood']\n",
    "for ind in np.arange(toronto_grouped.shape[0]):\n",
    "    neighborhoods_venues_sorted.iloc[ind, 1:] = return_most_common_venues(toronto_grouped.iloc[ind, :], num_top_venues)\n",
    "neighborhoods_venues_sorted"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Borough</th>\n",
       "      <th>Neighbourhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "      <th>Cluster Labels</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>East Toronto</td>\n",
       "      <td>The Beaches</td>\n",
       "      <td>43.676357</td>\n",
       "      <td>-79.293031</td>\n",
       "      <td>9</td>\n",
       "      <td>Trail</td>\n",
       "      <td>Health Food Store</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Deli / Bodega</td>\n",
       "      <td>Electronics Store</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>East Toronto</td>\n",
       "      <td>The Danforth West,Riverdale</td>\n",
       "      <td>43.679557</td>\n",
       "      <td>-79.352188</td>\n",
       "      <td>1</td>\n",
       "      <td>Greek Restaurant</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Ice Cream Shop</td>\n",
       "      <td>Furniture / Home Store</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Bubble Tea Shop</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>East Toronto</td>\n",
       "      <td>India Bazaar,The Beaches West</td>\n",
       "      <td>43.668999</td>\n",
       "      <td>-79.315572</td>\n",
       "      <td>9</td>\n",
       "      <td>Park</td>\n",
       "      <td>Board Shop</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Sandwich Place</td>\n",
       "      <td>Brewery</td>\n",
       "      <td>Liquor Store</td>\n",
       "      <td>Burger Joint</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Burrito Place</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>East Toronto</td>\n",
       "      <td>Studio District</td>\n",
       "      <td>43.659526</td>\n",
       "      <td>-79.340923</td>\n",
       "      <td>0</td>\n",
       "      <td>Café</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Gastropub</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>Brewery</td>\n",
       "      <td>American Restaurant</td>\n",
       "      <td>Yoga Studio</td>\n",
       "      <td>Bookstore</td>\n",
       "      <td>Sandwich Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Central Toronto</td>\n",
       "      <td>Lawrence Park</td>\n",
       "      <td>43.728020</td>\n",
       "      <td>-79.388790</td>\n",
       "      <td>9</td>\n",
       "      <td>Lake</td>\n",
       "      <td>Swim School</td>\n",
       "      <td>Bus Line</td>\n",
       "      <td>Park</td>\n",
       "      <td>General Entertainment</td>\n",
       "      <td>Deli / Bodega</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "      <td>Dumpling Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "           Borough                  Neighbourhood   Latitude  Longitude  \\\n",
       "0     East Toronto                    The Beaches  43.676357 -79.293031   \n",
       "1     East Toronto    The Danforth West,Riverdale  43.679557 -79.352188   \n",
       "2     East Toronto  India Bazaar,The Beaches West  43.668999 -79.315572   \n",
       "3     East Toronto                Studio District  43.659526 -79.340923   \n",
       "4  Central Toronto                  Lawrence Park  43.728020 -79.388790   \n",
       "\n",
       "   Cluster Labels 1st Most Common Venue 2nd Most Common Venue  \\\n",
       "0               9                 Trail     Health Food Store   \n",
       "1               1      Greek Restaurant           Coffee Shop   \n",
       "2               9                  Park            Board Shop   \n",
       "3               0                  Café           Coffee Shop   \n",
       "4               9                  Lake           Swim School   \n",
       "\n",
       "  3rd Most Common Venue 4th Most Common Venue   5th Most Common Venue  \\\n",
       "0                   Pub           Yoga Studio           Deli / Bodega   \n",
       "1    Italian Restaurant        Ice Cream Shop  Furniture / Home Store   \n",
       "2      Sushi Restaurant        Sandwich Place                 Brewery   \n",
       "3             Gastropub                Bakery      Italian Restaurant   \n",
       "4              Bus Line                  Park   General Entertainment   \n",
       "\n",
       "  6th Most Common Venue        7th Most Common Venue 8th Most Common Venue  \\\n",
       "0     Electronics Store  Eastern European Restaurant   Dumpling Restaurant   \n",
       "1            Restaurant              Bubble Tea Shop         Grocery Store   \n",
       "2          Liquor Store                 Burger Joint    Italian Restaurant   \n",
       "3               Brewery          American Restaurant           Yoga Studio   \n",
       "4         Deli / Bodega  Eastern European Restaurant   Dumpling Restaurant   \n",
       "\n",
       "  9th Most Common Venue 10th Most Common Venue  \n",
       "0            Donut Shop       Doner Restaurant  \n",
       "1                   Pub            Pizza Place  \n",
       "2         Burrito Place   Fast Food Restaurant  \n",
       "3             Bookstore         Sandwich Place  \n",
       "4            Donut Shop       Doner Restaurant  "
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# set number of clusters (assume 10 due to big variety of venues)\n",
    "kclusters = 10\n",
    "toronto_grouped_clustering = toronto_grouped.drop('Neighbourhood', 1)\n",
    "# k-means clustering (similar to New York lab)\n",
    "kmeans = KMeans(n_clusters=kclusters, random_state=0).fit(toronto_grouped_clustering)\n",
    "kmeans.labels_[0:10]\n",
    "toronto_merged = toronto_data\n",
    "toronto_merged['Cluster Labels'] = kmeans.labels_\n",
    "toronto_merged = toronto_merged.join(neighborhoods_venues_sorted.set_index('Neighbourhood'), on='Neighbourhood')\n",
    "toronto_merged.head() "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVM9ZmFsc2U7IExfTk9fVE9VQ0g9ZmFsc2U7IExfRElTQUJMRV8zRD1mYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS4xMi40Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS40LjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIi8+CiAgICA8c3R5bGU+aHRtbCwgYm9keSB7d2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlO21hcmdpbjogMDtwYWRkaW5nOiAwO308L3N0eWxlPgogICAgPHN0eWxlPiNtYXAge3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO3JpZ2h0OjA7bGVmdDowO308L3N0eWxlPgogICAgCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLAogICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgIDxzdHlsZT4jbWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3IHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgd2lkdGg6IDEwMC4wJTsKICAgICAgICBoZWlnaHQ6IDEwMC4wJTsKICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgIHRvcDogMC4wJTsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyIgPjwvZGl2Pgo8L2JvZHk+CjxzY3JpcHQ+ICAgIAogICAgCiAgICAKICAgICAgICB2YXIgYm91bmRzID0gbnVsbDsKICAgIAoKICAgIHZhciBtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcgPSBMLm1hcCgKICAgICAgICAnbWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3JywgewogICAgICAgIGNlbnRlcjogWzQzLjY1MzIsIC03OS4zODMyXSwKICAgICAgICB6b29tOiAxMSwKICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICBsYXllcnM6IFtdLAogICAgICAgIHdvcmxkQ29weUp1bXA6IGZhbHNlLAogICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcsCiAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsCiAgICAgICAgfSk7CgoKICAgIAogICAgdmFyIHRpbGVfbGF5ZXJfODVhOWQ2Mjc4MjFhNDkwNTljYmRlZDg2NzBlNGE5NDAgPSBMLnRpbGVMYXllcigKICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgIHsKICAgICAgICAiYXR0cmlidXRpb24iOiBudWxsLCAKICAgICAgICAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsIAogICAgICAgICJtYXhOYXRpdmVab29tIjogMTgsIAogICAgICAgICJtYXhab29tIjogMTgsIAogICAgICAgICJtaW5ab29tIjogMCwgCiAgICAgICAgIm5vV3JhcCI6IGZhbHNlLCAKICAgICAgICAib3BhY2l0eSI6IDEsIAogICAgICAgICJzdWJkb21haW5zIjogImFiYyIsIAogICAgICAgICJ0bXMiOiBmYWxzZQp9KS5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M5MGZhNjZkYjFmNjRlNTBhMjBlYTE5YmFjMmM3MTcxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjc2MzU3NCwgLTc5LjI5MzAzMTJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTczOTk3YTAwMjE2NGNiODhlMTRlODEzMTdjZTc2MDAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTlhYjJjODdhMTI4NDhkNTg1ZjNhNTRjYmE0MjhiNmMgPSAkKGA8ZGl2IGlkPSJodG1sXzU5YWIyYzg3YTEyODQ4ZDU4NWYzYTU0Y2JhNDI4YjZjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgQmVhY2hlcyBDbHVzdGVyIDk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U3Mzk5N2EwMDIxNjRjYjg4ZTE0ZTgxMzE3Y2U3NjAwLnNldENvbnRlbnQoaHRtbF81OWFiMmM4N2ExMjg0OGQ1ODVmM2E1NGNiYTQyOGI2Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jOTBmYTY2ZGIxZjY0ZTUwYTIwZWExOWJhYzJjNzE3MS5iaW5kUG9wdXAocG9wdXBfZTczOTk3YTAwMjE2NGNiODhlMTRlODEzMTdjZTc2MDApCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2IwMjQwODlhMjUwNzRjMDM4YjIyZDE1OGI0ZjI2NWQ3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjc5NTU3MSwgLTc5LjM1MjE4OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiIzgwMDBmZiIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yNDI3OGUwNTU2MDA0YzY5YTQ2M2JiNjUyN2JlM2NmYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85MzAxYmQ1NmFmMTY0ZWZjODcyZTI3N2EwM2IxZTZjZSA9ICQoYDxkaXYgaWQ9Imh0bWxfOTMwMWJkNTZhZjE2NGVmYzg3MmUyNzdhMDNiMWU2Y2UiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBEYW5mb3J0aCBXZXN0LFJpdmVyZGFsZSBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI0Mjc4ZTA1NTYwMDRjNjlhNDYzYmI2NTI3YmUzY2ZjLnNldENvbnRlbnQoaHRtbF85MzAxYmQ1NmFmMTY0ZWZjODcyZTI3N2EwM2IxZTZjZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iMDI0MDg5YTI1MDc0YzAzOGIyMmQxNThiNGYyNjVkNy5iaW5kUG9wdXAocG9wdXBfMjQyNzhlMDU1NjAwNGM2OWE0NjNiYjY1MjdiZTNjZmMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzkyNzQ0OTRhNjg5YjQ1YmQ4ZTNkM2QyYjcxNWUwMzQ4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY4OTk4NSwgLTc5LjMxNTU3MTZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzI5Y2UwNGE4NmU1NDU4Zjg1ZWJjODJlZmUwYjYyNGMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODhjMTQ1NWYzNjA2NDk1MDg4OTg4NTExZWM1YmM5NzcgPSAkKGA8ZGl2IGlkPSJodG1sXzg4YzE0NTVmMzYwNjQ5NTA4ODk4ODUxMWVjNWJjOTc3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5JbmRpYSBCYXphYXIsVGhlIEJlYWNoZXMgV2VzdCBDbHVzdGVyIDk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2MyOWNlMDRhODZlNTQ1OGY4NWViYzgyZWZlMGI2MjRjLnNldENvbnRlbnQoaHRtbF84OGMxNDU1ZjM2MDY0OTUwODg5ODg1MTFlYzViYzk3Nyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85Mjc0NDk0YTY4OWI0NWJkOGUzZDNkMmI3MTVlMDM0OC5iaW5kUG9wdXAocG9wdXBfYzI5Y2UwNGE4NmU1NDU4Zjg1ZWJjODJlZmUwYjYyNGMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2IzZGViMDMyZDQyMDQ4ZGViYzRiZjBjMmQ3NjA5NjM3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU5NTI1NSwgLTc5LjM0MDkyM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiI2ZmMDAwMCIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xZDM0M2E4Mjg0ODA0YjZiOGVmYTEyN2E2ZmYzMjViYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hNGJlOGE0NTBkMDA0NGI3YjI2MTlkNTkxYWI5YmVmMiA9ICQoYDxkaXYgaWQ9Imh0bWxfYTRiZThhNDUwZDAwNDRiN2IyNjE5ZDU5MWFiOWJlZjIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0dWRpbyBEaXN0cmljdCBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFkMzQzYTgyODQ4MDRiNmI4ZWZhMTI3YTZmZjMyNWJjLnNldENvbnRlbnQoaHRtbF9hNGJlOGE0NTBkMDA0NGI3YjI2MTlkNTkxYWI5YmVmMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iM2RlYjAzMmQ0MjA0OGRlYmM0YmYwYzJkNzYwOTYzNy5iaW5kUG9wdXAocG9wdXBfMWQzNDNhODI4NDgwNGI2YjhlZmExMjdhNmZmMzI1YmMpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzY0OWYyMzE5NzY4ODRhZmNiNjNmN2MxYTlmNWZlNDRkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzI4MDIwNSwgLTc5LjM4ODc5MDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTZmYTVkYjVhOWM4NDU4YWEyZTM4ZWU2YTQ2NjNjNjkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZmYyNmVhYTVkZDdjNDUzZWE5YWVhOTYzNTRhZWYyYjAgPSAkKGA8ZGl2IGlkPSJodG1sX2ZmMjZlYWE1ZGQ3YzQ1M2VhOWFlYTk2MzU0YWVmMmIwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MYXdyZW5jZSBQYXJrIENsdXN0ZXIgOTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTZmYTVkYjVhOWM4NDU4YWEyZTM4ZWU2YTQ2NjNjNjkuc2V0Q29udGVudChodG1sX2ZmMjZlYWE1ZGQ3YzQ1M2VhOWFlYTk2MzU0YWVmMmIwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzY0OWYyMzE5NzY4ODRhZmNiNjNmN2MxYTlmNWZlNDRkLmJpbmRQb3B1cChwb3B1cF9lNmZhNWRiNWE5Yzg0NThhYTJlMzhlZTZhNDY2M2M2OSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzIxYTU0MzE4ZTY5NGEwOGEyNWUzZmFkY2ViNTE1MzIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MTI3NTExLCAtNzkuMzkwMTk3NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiI2ZmNTYyYyIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjZmY1NjJjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85NWYwNzJiZTQ3OWQ0YTNjOGNmNzYzOTU1NmVjODA0MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84MzEyZGQxMDU0Zjk0MzNjYTJiZWJlNzMzYTEyNjMwZCA9ICQoYDxkaXYgaWQ9Imh0bWxfODMxMmRkMTA1NGY5NDMzY2EyYmViZTczM2ExMjYzMGQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRhdmlzdmlsbGUgTm9ydGggQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85NWYwNzJiZTQ3OWQ0YTNjOGNmNzYzOTU1NmVjODA0My5zZXRDb250ZW50KGh0bWxfODMxMmRkMTA1NGY5NDMzY2EyYmViZTczM2ExMjYzMGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzIxYTU0MzE4ZTY5NGEwOGEyNWUzZmFkY2ViNTE1MzIuYmluZFBvcHVwKHBvcHVwXzk1ZjA3MmJlNDc5ZDRhM2M4Y2Y3NjM5NTU2ZWM4MDQzKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iNmI2MmJhNzU4ODk0MmQ5YmJmNDk0ODdlNWVlOGExMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxNTM4MzQsIC03OS40MDU2Nzg0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjODAwMGZmIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE5YzllN2I2YWFiODRiYjNhMzJiZGZlZGQxMTIyYWY3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAwMzUzNTYzNmNlYjRiYWFhNmRlODIxNDAwYmY4Zjg3ID0gJChgPGRpdiBpZD0iaHRtbF8wMDM1MzU2MzZjZWI0YmFhYTZkZTgyMTQwMGJmOGY4NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9ydGggVG9yb250byBXZXN0IENsdXN0ZXIgMTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTljOWU3YjZhYWI4NGJiM2EzMmJkZmVkZDExMjJhZjcuc2V0Q29udGVudChodG1sXzAwMzUzNTYzNmNlYjRiYWFhNmRlODIxNDAwYmY4Zjg3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2I2YjYyYmE3NTg4OTQyZDliYmY0OTQ4N2U1ZWU4YTEwLmJpbmRQb3B1cChwb3B1cF8xOWM5ZTdiNmFhYjg0YmIzYTMyYmRmZWRkMTEyMmFmNykKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOWUzNGZmY2UxMDc5NDFkNzg2YTlkM2MzOGI4MmNiYjcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDQzMjQ0LCAtNzkuMzg4NzkwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiIzljZmJhNCIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjOWNmYmE0IiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wYTc2ODY1NDYxNzY0NWE1YWM4ZGMwMjFkMjg0YzdjZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84OWRiM2RjNGQwZTY0ZjM1YWFlMTRhMzI0MjAwZmU5NyA9ICQoYDxkaXYgaWQ9Imh0bWxfODlkYjNkYzRkMGU2NGYzNWFhZTE0YTMyNDIwMGZlOTciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRhdmlzdmlsbGUgQ2x1c3RlciA2PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYTc2ODY1NDYxNzY0NWE1YWM4ZGMwMjFkMjg0YzdjZC5zZXRDb250ZW50KGh0bWxfODlkYjNkYzRkMGU2NGYzNWFhZTE0YTMyNDIwMGZlOTcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOWUzNGZmY2UxMDc5NDFkNzg2YTlkM2MzOGI4MmNiYjcuYmluZFBvcHVwKHBvcHVwXzBhNzY4NjU0NjE3NjQ1YTVhYzhkYzAyMWQyODRjN2NkKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81YzFjMzIxMzM4YzE0NjQ2YmI3N2UyMzFmZGJiNmEwMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4OTU3NDMsIC03OS4zODMxNTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjODAwMGZmIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU3OGQzNmMyM2U1YTQ0MmQ5MWI2ZjQ2YWZjNTExZWE0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM0ZGU4NzZjN2M3MzRjZmI5NzM4YzMxMmNhYTYxNzQzID0gJChgPGRpdiBpZD0iaHRtbF8zNGRlODc2YzdjNzM0Y2ZiOTczOGMzMTJjYWE2MTc0MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TW9vcmUgUGFyayxTdW1tZXJoaWxsIEVhc3QgQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81NzhkMzZjMjNlNWE0NDJkOTFiNmY0NmFmYzUxMWVhNC5zZXRDb250ZW50KGh0bWxfMzRkZTg3NmM3YzczNGNmYjk3MzhjMzEyY2FhNjE3NDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNWMxYzMyMTMzOGMxNDY0NmJiNzdlMjMxZmRiYjZhMDEuYmluZFBvcHVwKHBvcHVwXzU3OGQzNmMyM2U1YTQ0MmQ5MWI2ZjQ2YWZjNTExZWE0KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jYjIyMzk3OTNkMjA0NTRlYjg4M2Q4ZjhlYTg5MjUzZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4NjQxMjMsIC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjNjJmYmM0IiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiM2MmZiYzQiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzViMzNiMTRmMjA5MTQwZmNhMTRiYTA2MmQ2NTZmMmQ0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQzZTI5OTc3ZjU2YTQzZjA4N2UzYjYyZGFlMTFhMjliID0gJChgPGRpdiBpZD0iaHRtbF80M2UyOTk3N2Y1NmE0M2YwODdlM2I2MmRhZTExYTI5YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmF0aG5lbGx5LERlZXIgUGFyayxGb3Jlc3QgSGlsbCBTRSxTdW1tZXJoaWxsIFdlc3QsU291dGggSGlsbCBDbHVzdGVyIDU8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzViMzNiMTRmMjA5MTQwZmNhMTRiYTA2MmQ2NTZmMmQ0LnNldENvbnRlbnQoaHRtbF80M2UyOTk3N2Y1NmE0M2YwODdlM2I2MmRhZTExYTI5Yik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jYjIyMzk3OTNkMjA0NTRlYjg4M2Q4ZjhlYTg5MjUzZC5iaW5kUG9wdXAocG9wdXBfNWIzM2IxNGYyMDkxNDBmY2ExNGJhMDYyZDY1NmYyZDQpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQ5MGJlYzViODFiYTQyM2VhMTBlNzIwMmQ1NWJiYWQwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjc5NTYyNiwgLTc5LjM3NzUyOTRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzUwMDEzZDY3YmRjNGYyYjg0ZjZhNTE2NjkzODY3MzcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzQxMjdjMjZhNzQ4NGU3MTg1ODMzOThkY2Q2NDQwNGMgPSAkKGA8ZGl2IGlkPSJodG1sX2M0MTI3YzI2YTc0ODRlNzE4NTgzMzk4ZGNkNjQ0MDRjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Sb3NlZGFsZSBDbHVzdGVyIDk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM1MDAxM2Q2N2JkYzRmMmI4NGY2YTUxNjY5Mzg2NzM3LnNldENvbnRlbnQoaHRtbF9jNDEyN2MyNmE3NDg0ZTcxODU4MzM5OGRjZDY0NDA0Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80OTBiZWM1YjgxYmE0MjNlYTEwZTcyMDJkNTViYmFkMC5iaW5kUG9wdXAocG9wdXBfMzUwMDEzZDY3YmRjNGYyYjg0ZjZhNTE2NjkzODY3MzcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2UyZjY4ZTc5OWExOTRmMGU4MjkzOTEwYTk1MTM3ZjMzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY3OTY3LCAtNzkuMzY3Njc1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiIzgwMDBmZiIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82YzlmNDVmMTk5OWQ0OWE1OWE2OTFjYWMxNjg1OTU4YSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jMjQ3NDQ2ZTRiZTI0NWNjOTMyMWRhMDk2NzY2OTBkYyA9ICQoYDxkaXYgaWQ9Imh0bWxfYzI0NzQ0NmU0YmUyNDVjYzkzMjFkYTA5Njc2NjkwZGMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0LiBKYW1lcyBUb3duLENhYmJhZ2V0b3duIENsdXN0ZXIgMTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmM5ZjQ1ZjE5OTlkNDlhNTlhNjkxY2FjMTY4NTk1OGEuc2V0Q29udGVudChodG1sX2MyNDc0NDZlNGJlMjQ1Y2M5MzIxZGEwOTY3NjY5MGRjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2UyZjY4ZTc5OWExOTRmMGU4MjkzOTEwYTk1MTM3ZjMzLmJpbmRQb3B1cChwb3B1cF82YzlmNDVmMTk5OWQ0OWE1OWE2OTFjYWMxNjg1OTU4YSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzNhY2YwMTBkYWZhNDRhYmE4OGEwNDk2MjBjNzFmNzMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjU4NTk5LCAtNzkuMzgzMTU5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiI2ZmNTYyYyIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjZmY1NjJjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lNmZlZWVhMGE2YmI0OWM3OTdiNGIyNDczOWZjZDRjMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83YTEyMzc2OTdiOTc0OGE4YTgzYmU3OGY2MzViMTFhMiA9ICQoYDxkaXYgaWQ9Imh0bWxfN2ExMjM3Njk3Yjk3NDhhOGE4M2JlNzhmNjM1YjExYTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNodXJjaCBhbmQgV2VsbGVzbGV5IENsdXN0ZXIgOTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTZmZWVlYTBhNmJiNDljNzk3YjRiMjQ3MzlmY2Q0YzAuc2V0Q29udGVudChodG1sXzdhMTIzNzY5N2I5NzQ4YThhODNiZTc4ZjYzNWIxMWEyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzczYWNmMDEwZGFmYTQ0YWJhODhhMDQ5NjIwYzcxZjczLmJpbmRQb3B1cChwb3B1cF9lNmZlZWVhMGE2YmI0OWM3OTdiNGIyNDczOWZjZDRjMCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzdhZjljMjg4NjcyNGZhZWI1ZmE3OGRjOGNlZjJjY2IgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQyNTk5LCAtNzkuMzYwNjM1OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiIzgwMDBmZiIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hN2E0ZjkxZDk1ZjA0ODhkYjJiNmFjMGQxNmFmNjA5ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zYzIzOWQxN2QyN2I0ZmQ5YTlhOWNjZWE0NjVmNTJhNyA9ICQoYDxkaXYgaWQ9Imh0bWxfM2MyMzlkMTdkMjdiNGZkOWE5YTljY2VhNDY1ZjUyYTciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhcmJvdXJmcm9udCBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2E3YTRmOTFkOTVmMDQ4OGRiMmI2YWMwZDE2YWY2MDlmLnNldENvbnRlbnQoaHRtbF8zYzIzOWQxN2QyN2I0ZmQ5YTlhOWNjZWE0NjVmNTJhNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jN2FmOWMyODg2NzI0ZmFlYjVmYTc4ZGM4Y2VmMmNjYi5iaW5kUG9wdXAocG9wdXBfYTdhNGY5MWQ5NWYwNDg4ZGIyYjZhYzBkMTZhZjYwOWYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2E3NDU4MDVkMGYxMjRlNWE4OGQ5Y2IzYjk1NGNiMzJhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU3MTYxOCwgLTc5LjM3ODkzNzFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiM4MDAwZmYiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjc3MmRmODYyZjdkNDljNTgxNWMwNzI1ZWJkZjVkMWIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODQ4ZGFiZTgyYTk2NDYwNDljN2I2NzNlNWJiMjJlYWQgPSAkKGA8ZGl2IGlkPSJodG1sXzg0OGRhYmU4MmE5NjQ2MDQ5YzdiNjczZTViYjIyZWFkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SeWVyc29uLEdhcmRlbiBEaXN0cmljdCBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2I3NzJkZjg2MmY3ZDQ5YzU4MTVjMDcyNWViZGY1ZDFiLnNldENvbnRlbnQoaHRtbF84NDhkYWJlODJhOTY0NjA0OWM3YjY3M2U1YmIyMmVhZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hNzQ1ODA1ZDBmMTI0ZTVhODhkOWNiM2I5NTRjYjMyYS5iaW5kUG9wdXAocG9wdXBfYjc3MmRmODYyZjdkNDljNTgxNWMwNzI1ZWJkZjVkMWIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzM2YjczMWVjZmNiMjRkNTVhMzAyMTFjOTIxNWE2OTAxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUxNDkzOSwgLTc5LjM3NTQxNzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNWMyYzg0NTA0Y2NmNGQ0NmIxODFlZTQyOWRmMmYyZjggPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTA5ZmMzZmU1YTY5NDdhNGFmZDViNDA0NGVkOTExNzEgPSAkKGA8ZGl2IGlkPSJodG1sX2UwOWZjM2ZlNWE2OTQ3YTRhZmQ1YjQwNDRlZDkxMTcxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdC4gSmFtZXMgVG93biBDbHVzdGVyIDk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVjMmM4NDUwNGNjZjRkNDZiMTgxZWU0MjlkZjJmMmY4LnNldENvbnRlbnQoaHRtbF9lMDlmYzNmZTVhNjk0N2E0YWZkNWI0MDQ0ZWQ5MTE3MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zNmI3MzFlY2ZjYjI0ZDU1YTMwMjExYzkyMTVhNjkwMS5iaW5kUG9wdXAocG9wdXBfNWMyYzg0NTA0Y2NmNGQ0NmIxODFlZTQyOWRmMmYyZjgpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2FkY2ViMDE2ZTg0MjQ4NzA5ZTM4ZTI5ODI1YWE0ZWFlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ0NzcwOCwgLTc5LjM3MzMwNjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNkNGRkODAiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2Q0ZGQ4MCIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWEyYTRlN2Y4NDY3NGExYWJlYjg1MDNlNDE1ZDg5ZDYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTE2YThlN2M2ZjNkNGRhY2I5NDc2YmY0YjcwZGNhZWUgPSAkKGA8ZGl2IGlkPSJodG1sXzUxNmE4ZTdjNmYzZDRkYWNiOTQ3NmJmNGI3MGRjYWVlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CZXJjenkgUGFyayBDbHVzdGVyIDc8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFhMmE0ZTdmODQ2NzRhMWFiZWI4NTAzZTQxNWQ4OWQ2LnNldENvbnRlbnQoaHRtbF81MTZhOGU3YzZmM2Q0ZGFjYjk0NzZiZjRiNzBkY2FlZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hZGNlYjAxNmU4NDI0ODcwOWUzOGUyOTgyNWFhNGVhZS5iaW5kUG9wdXAocG9wdXBfMWEyYTRlN2Y4NDY3NGExYWJlYjg1MDNlNDE1ZDg5ZDYpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzMxNmVmMDYwOWU1YzQ1NDRhNjA5NmQ3NTVhZDY1MWM4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU3OTUyNCwgLTc5LjM4NzM4MjZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiM4MDAwZmYiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTE0NTYwMjU4YzE1NGEwYmE1ZjRiZWJiMTJlNjAwM2YgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjM5ZjhhMzg5Y2I3NDEwOWI3YjdkNGY5NmY5MDBkZjQgPSAkKGA8ZGl2IGlkPSJodG1sXzYzOWY4YTM4OWNiNzQxMDliN2I3ZDRmOTZmOTAwZGY0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DZW50cmFsIEJheSBTdHJlZXQgQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xMTQ1NjAyNThjMTU0YTBiYTVmNGJlYmIxMmU2MDAzZi5zZXRDb250ZW50KGh0bWxfNjM5ZjhhMzg5Y2I3NDEwOWI3YjdkNGY5NmY5MDBkZjQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMzE2ZWYwNjA5ZTVjNDU0NGE2MDk2ZDc1NWFkNjUxYzguYmluZFBvcHVwKHBvcHVwXzExNDU2MDI1OGMxNTRhMGJhNWY0YmViYjEyZTYwMDNmKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82MGU1ODcxZjc0ZDk0MDY2ODc4MWE3OGYyNTQ4M2I3MiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDU3MTIsIC03OS4zODQ1Njc1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjMmFkZGRkIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMyYWRkZGQiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFiZDI1OGQ5MGY5NDQ1NWQ4NTY5Mzc5OTEwYTk3MTU3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAyODIxMDljZmVlZTRkMmQ5ZmNkNWVhYWZmM2YzYTUyID0gJChgPGRpdiBpZD0iaHRtbF8wMjgyMTA5Y2ZlZWU0ZDJkOWZjZDVlYWFmZjNmM2E1MiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UmljaG1vbmQsS2luZyxBZGVsYWlkZSBDbHVzdGVyIDQ8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFiZDI1OGQ5MGY5NDQ1NWQ4NTY5Mzc5OTEwYTk3MTU3LnNldENvbnRlbnQoaHRtbF8wMjgyMTA5Y2ZlZWU0ZDJkOWZjZDVlYWFmZjNmM2E1Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82MGU1ODcxZjc0ZDk0MDY2ODc4MWE3OGYyNTQ4M2I3Mi5iaW5kUG9wdXAocG9wdXBfMWJkMjU4ZDkwZjk0NDU1ZDg1NjkzNzk5MTBhOTcxNTcpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzkwZWM0YzBjMzVlZjRhODlhOWY1NzA5ZDRhYTc5MGY5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQwODE1NywgLTc5LjM4MTc1MjNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjcwNjgxMzQyYWUwNDA3MDk4NDk1OTA0ZWUwYjExNmEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmY4ZTBmZjk4ZjM2NDZhNWIyYzQ2N2ZlOGNlMjM4ZDQgPSAkKGA8ZGl2IGlkPSJodG1sXzJmOGUwZmY5OGYzNjQ2YTViMmM0NjdmZThjZTIzOGQ0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5VbmlvbiBTdGF0aW9uLFRvcm9udG8gSXNsYW5kcyxIYXJib3VyZnJvbnQgRWFzdCBDbHVzdGVyIDk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Y3MDY4MTM0MmFlMDQwNzA5ODQ5NTkwNGVlMGIxMTZhLnNldENvbnRlbnQoaHRtbF8yZjhlMGZmOThmMzY0NmE1YjJjNDY3ZmU4Y2UyMzhkNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85MGVjNGMwYzM1ZWY0YTg5YTlmNTcwOWQ0YWE3OTBmOS5iaW5kUG9wdXAocG9wdXBfZjcwNjgxMzQyYWUwNDA3MDk4NDk1OTA0ZWUwYjExNmEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhiNWU0MTAwNWE1NzQ3YzY4N2M4NjNiNjkyMDAxZWI4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3MTc2OCwgLTc5LjM4MTU3NjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiM4MDAwZmYiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGVlZjAxM2YzMDA4NGMzMDllNGE0NmI2N2Y3Y2IyMTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWQ3NzI5MDFkMTA0NDQwYzliZGUyOTJkMTk1NTk4ZGUgPSAkKGA8ZGl2IGlkPSJodG1sXzlkNzcyOTAxZDEwNDQ0MGM5YmRlMjkyZDE5NTU5OGRlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ub3JvbnRvIERvbWluaW9uIENlbnRyZSxEZXNpZ24gRXhjaGFuZ2UgQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wZWVmMDEzZjMwMDg0YzMwOWU0YTQ2YjY3ZjdjYjIxNy5zZXRDb250ZW50KGh0bWxfOWQ3NzI5MDFkMTA0NDQwYzliZGUyOTJkMTk1NTk4ZGUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGI1ZTQxMDA1YTU3NDdjNjg3Yzg2M2I2OTIwMDFlYjguYmluZFBvcHVwKHBvcHVwXzBlZWYwMTNmMzAwODRjMzA5ZTRhNDZiNjdmN2NiMjE3KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iMDgzOGM4NDdhZTg0ODdjYjY3N2U0OGE1NmIyN2M3NCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODE5ODUsIC03OS4zNzk4MTY5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjZmY1NjJjIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiNmZjU2MmMiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E3MTA4NWJmMTg1MjRkZTI4NzA3ZWFhNzc0MDBmMWZkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U2YzRjMjY1ZTVlMjQyZDc4YzdmODEyMzAwYTBjYzZlID0gJChgPGRpdiBpZD0iaHRtbF9lNmM0YzI2NWU1ZTI0MmQ3OGM3ZjgxMjMwMGEwY2M2ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q29tbWVyY2UgQ291cnQsVmljdG9yaWEgSG90ZWwgQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hNzEwODViZjE4NTI0ZGUyODcwN2VhYTc3NDAwZjFmZC5zZXRDb250ZW50KGh0bWxfZTZjNGMyNjVlNWUyNDJkNzhjN2Y4MTIzMDBhMGNjNmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjA4MzhjODQ3YWU4NDg3Y2I2NzdlNDhhNTZiMjdjNzQuYmluZFBvcHVwKHBvcHVwX2E3MTA4NWJmMTg1MjRkZTI4NzA3ZWFhNzc0MDBmMWZkKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80ODJjNWZiYmRlMmU0YjA3OTc0MGEyZTFlNmM5NWNkNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxMTY5NDgsIC03OS40MTY5MzU2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjODAwMGZmIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2EzMzZiOTMwMjQ5NzQ2ZmVhYTQzNDE2MTY2NTBlYzljID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZlMzgzMTEwZjhkNDQ4N2Q4NjllNTQzOTNkOGJiZTY1ID0gJChgPGRpdiBpZD0iaHRtbF9mZTM4MzExMGY4ZDQ0ODdkODY5ZTU0MzkzZDhiYmU2NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9zZWxhd24gQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hMzM2YjkzMDI0OTc0NmZlYWE0MzQxNjE2NjUwZWM5Yy5zZXRDb250ZW50KGh0bWxfZmUzODMxMTBmOGQ0NDg3ZDg2OWU1NDM5M2Q4YmJlNjUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDgyYzVmYmJkZTJlNGIwNzk3NDBhMmUxZTZjOTVjZDYuYmluZFBvcHVwKHBvcHVwX2EzMzZiOTMwMjQ5NzQ2ZmVhYTQzNDE2MTY2NTBlYzljKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81Y2ZhZDkzYjU3Yzk0ZGNhOWFiZjFlZjI5MTg1YmExMiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5Njk0NzYsIC03OS40MTEzMDcyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjZmY1NjJjIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiNmZjU2MmMiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzYyY2IzMzRiZGZkZjQ3Zjg4MGY4Y2MzYWM0MTJiYTYxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdkNjVkNGVlYzQyMTRkZTQ5MzJlMzIzMDY1ZjllZDQzID0gJChgPGRpdiBpZD0iaHRtbF83ZDY1ZDRlZWM0MjE0ZGU0OTMyZTMyMzA2NWY5ZWQ0MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Rm9yZXN0IEhpbGwgTm9ydGgsRm9yZXN0IEhpbGwgV2VzdCBDbHVzdGVyIDk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzYyY2IzMzRiZGZkZjQ3Zjg4MGY4Y2MzYWM0MTJiYTYxLnNldENvbnRlbnQoaHRtbF83ZDY1ZDRlZWM0MjE0ZGU0OTMyZTMyMzA2NWY5ZWQ0Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81Y2ZhZDkzYjU3Yzk0ZGNhOWFiZjFlZjI5MTg1YmExMi5iaW5kUG9wdXAocG9wdXBfNjJjYjMzNGJkZmRmNDdmODgwZjhjYzNhYzQxMmJhNjEpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2FiZmQyMGVjMTRmNTRlNjc5NjEyZDhkNTk1MWJjYzBiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjcyNzA5NywgLTc5LjQwNTY3ODRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiM4MDAwZmYiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTYwMjVjNDM4YWMxNGU2Mjk1MTQyZDM4OGEyZjUxZDMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTVjZjMwZDk3NjI2NGIyMWFkOTQyNmM5MjllYjk4YWEgPSAkKGA8ZGl2IGlkPSJodG1sXzU1Y2YzMGQ5NzYyNjRiMjFhZDk0MjZjOTI5ZWI5OGFhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgQW5uZXgsWW9ya3ZpbGxlLE5vcnRoIE1pZHRvd24gQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85NjAyNWM0MzhhYzE0ZTYyOTUxNDJkMzg4YTJmNTFkMy5zZXRDb250ZW50KGh0bWxfNTVjZjMwZDk3NjI2NGIyMWFkOTQyNmM5MjllYjk4YWEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYWJmZDIwZWMxNGY1NGU2Nzk2MTJkOGQ1OTUxYmNjMGIuYmluZFBvcHVwKHBvcHVwXzk2MDI1YzQzOGFjMTRlNjI5NTE0MmQzODhhMmY1MWQzKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84OGYyYjczM2Q5YzQ0ZTZiOTQ1NzI1MWU5MjhkYjM4YiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2MjY5NTYsIC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjNDg1NmZiIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiM0ODU2ZmIiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgwZDUyOWRmYmFkYzQ5NDg5ZDA4MWY2ZGQxN2I4NTBlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M1ZWRjMDlhYzJlMTRlNGI5ZWE3ODdmMDJhMzEwOGIzID0gJChgPGRpdiBpZD0iaHRtbF9jNWVkYzA5YWMyZTE0ZTRiOWVhNzg3ZjAyYTMxMDhiMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm9yZCxVbml2ZXJzaXR5IG9mIFRvcm9udG8gQ2x1c3RlciAyPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84MGQ1MjlkZmJhZGM0OTQ4OWQwODFmNmRkMTdiODUwZS5zZXRDb250ZW50KGh0bWxfYzVlZGMwOWFjMmUxNGU0YjllYTc4N2YwMmEzMTA4YjMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODhmMmI3MzNkOWM0NGU2Yjk0NTcyNTFlOTI4ZGIzOGIuYmluZFBvcHVwKHBvcHVwXzgwZDUyOWRmYmFkYzQ5NDg5ZDA4MWY2ZGQxN2I4NTBlKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kNmQxNDZiY2Q4Zjk0NTRkOWJlN2VlZTFkYzQ1YWZmZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MzIwNTcsIC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjMTBhMmYwIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiMxMGEyZjAiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzVmNWVlMTk0YTNmNTQ2NmZiN2Y3ZDY4MmRlYjExMmEwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc0ZTg5MDExYWFjYjQzZDc4ZWE0ODI3Nzk2MGNmMTZkID0gJChgPGRpdiBpZD0iaHRtbF83NGU4OTAxMWFhY2I0M2Q3OGVhNDgyNzc5NjBjZjE2ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3JhbmdlIFBhcmssS2Vuc2luZ3RvbiBNYXJrZXQsQ2hpbmF0b3duIENsdXN0ZXIgMzwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNWY1ZWUxOTRhM2Y1NDY2ZmI3ZjdkNjgyZGViMTEyYTAuc2V0Q29udGVudChodG1sXzc0ZTg5MDExYWFjYjQzZDc4ZWE0ODI3Nzk2MGNmMTZkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Q2ZDE0NmJjZDhmOTQ1NGQ5YmU3ZWVlMWRjNDVhZmZkLmJpbmRQb3B1cChwb3B1cF81ZjVlZTE5NGEzZjU0NjZmYjdmN2Q2ODJkZWIxMTJhMCkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfY2I4ZTg5NDhhMzA5NDg3M2IyYTZkMjY1YWRlMWIzNDAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Mjg5NDY3LCAtNzkuMzk0NDE5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiIzgwMDBmZiIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80ZmRhMThmNDhiYzI0OTBlODYwY2VkOWVhYTU3NjJmMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jOWQ3YjdkZmZlMDI0MDQzYjczOTJkNGE5YWVjZjY1YyA9ICQoYDxkaXYgaWQ9Imh0bWxfYzlkN2I3ZGZmZTAyNDA0M2I3MzkyZDRhOWFlY2Y2NWMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPklzbGFuZCBhaXJwb3J0LEtpbmcgYW5kIFNwYWRpbmEsQmF0aHVyc3QgUXVheSxDTiBUb3dlcixIYXJib3VyZnJvbnQgV2VzdCxSYWlsd2F5IExhbmRzLFNvdXRoIE5pYWdhcmEgQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80ZmRhMThmNDhiYzI0OTBlODYwY2VkOWVhYTU3NjJmMS5zZXRDb250ZW50KGh0bWxfYzlkN2I3ZGZmZTAyNDA0M2I3MzkyZDRhOWFlY2Y2NWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfY2I4ZTg5NDhhMzA5NDg3M2IyYTZkMjY1YWRlMWIzNDAuYmluZFBvcHVwKHBvcHVwXzRmZGExOGY0OGJjMjQ5MGU4NjBjZWQ5ZWFhNTc2MmYxKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84MjQ4ZDgxMWY4ZDc0NGI5OWI3MDA4MjdhOTNjNGZhYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NjQzNTIsIC03OS4zNzQ4NDZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDVkNzk0YjdkMGZkNGJjZjhhNTJlYjQxNGRlZDQ2ZjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjk0OTRjYzA5MzQ4NDlhMTk3OTMwOGIwZmM0OWE1YmYgPSAkKGA8ZGl2IGlkPSJodG1sXzY5NDk0Y2MwOTM0ODQ5YTE5NzkzMDhiMGZjNDlhNWJmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdG4gQSBQTyBCb3hlcyAyNSBUaGUgRXNwbGFuYWRlIENsdXN0ZXIgOTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDVkNzk0YjdkMGZkNGJjZjhhNTJlYjQxNGRlZDQ2ZjYuc2V0Q29udGVudChodG1sXzY5NDk0Y2MwOTM0ODQ5YTE5NzkzMDhiMGZjNDlhNWJmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzgyNDhkODExZjhkNzQ0Yjk5YjcwMDgyN2E5M2M0ZmFiLmJpbmRQb3B1cChwb3B1cF80NWQ3OTRiN2QwZmQ0YmNmOGE1MmViNDE0ZGVkNDZmNikKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzk2ZjFmYTZmOWNjNDI5NGJmYmRhY2E4YjFiZjdlODkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDg0MjkyLCAtNzkuMzgyMjgwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiI2ZmNTYyYyIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjZmY1NjJjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82YTkwMjExYzM3Y2Q0MmRhYmY2MDk2NTMzZGY2YmYyYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84YzNjODRkZGJiY2Y0OGY3YTZiYmM3YTE5ZGY0NDE0ZiA9ICQoYDxkaXYgaWQ9Imh0bWxfOGMzYzg0ZGRiYmNmNDhmN2E2YmJjN2ExOWRmNDQxNGYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlVuZGVyZ3JvdW5kIGNpdHksRmlyc3QgQ2FuYWRpYW4gUGxhY2UgQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82YTkwMjExYzM3Y2Q0MmRhYmY2MDk2NTMzZGY2YmYyYS5zZXRDb250ZW50KGh0bWxfOGMzYzg0ZGRiYmNmNDhmN2E2YmJjN2ExOWRmNDQxNGYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzk2ZjFmYTZmOWNjNDI5NGJmYmRhY2E4YjFiZjdlODkuYmluZFBvcHVwKHBvcHVwXzZhOTAyMTFjMzdjZDQyZGFiZjYwOTY1MzNkZjZiZjJhKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xN2JmN2QyM2UzOTg0ZDQxODQwZDBlOGZjMDk3MzFjMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2OTU0MiwgLTc5LjQyMjU2MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiM4MDAwZmYiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMDgyYTQ4MTEyZTAxNDMzNDllODgxY2M0ZDI0OTMwMDIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDNkMDQzZjIyMTNlNDhhY2FjZWUyNjA1YTAwZWMwNzYgPSAkKGA8ZGl2IGlkPSJodG1sXzQzZDA0M2YyMjEzZTQ4YWNhY2VlMjYwNWEwMGVjMDc2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaHJpc3RpZSBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzA4MmE0ODExMmUwMTQzMzQ5ZTg4MWNjNGQyNDkzMDAyLnNldENvbnRlbnQoaHRtbF80M2QwNDNmMjIxM2U0OGFjYWNlZTI2MDVhMDBlYzA3Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xN2JmN2QyM2UzOTg0ZDQxODQwZDBlOGZjMDk3MzFjMC5iaW5kUG9wdXAocG9wdXBfMDgyYTQ4MTEyZTAxNDMzNDllODgxY2M0ZDI0OTMwMDIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2UwZDAwNDhiMDY3OTQxMDc4OTBlM2M4YzIwZTRhZGRhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY5MDA1MSwgLTc5LjQ0MjI1OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODlmMzg5MDRjYmQyNDcwZWI3MGI0NGY2ZmEyOTNhOWIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTQxM2IxZTQ3NGJmNGY0N2E3NjMyZGVlNGZhMGRmMjYgPSAkKGA8ZGl2IGlkPSJodG1sX2E0MTNiMWU0NzRiZjRmNDdhNzYzMmRlZTRmYTBkZjI2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb3ZlcmNvdXJ0IFZpbGxhZ2UsRHVmZmVyaW4gQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84OWYzODkwNGNiZDI0NzBlYjcwYjQ0ZjZmYTI5M2E5Yi5zZXRDb250ZW50KGh0bWxfYTQxM2IxZTQ3NGJmNGY0N2E3NjMyZGVlNGZhMGRmMjYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTBkMDA0OGIwNjc5NDEwNzg5MGUzYzhjMjBlNGFkZGEuYmluZFBvcHVwKHBvcHVwXzg5ZjM4OTA0Y2JkMjQ3MGViNzBiNDRmNmZhMjkzYTliKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mMWEwNDUyODljYTU0MDY2YjUzNTAxYmQzN2NhNDQ5ZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NzkyNjcsIC03OS40MTk3NDk3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjZmY1NjJjIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiNmZjU2MmMiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NhZmJmMzczMjBlODQ0MGI5NDI1YTAyYTJlMTU5MTIxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzI3Y2IwMzU1YWI5YTRlOWViODMzODczYTRmNTYwYWRhID0gJChgPGRpdiBpZD0iaHRtbF8yN2NiMDM1NWFiOWE0ZTllYjgzMzg3M2E0ZjU2MGFkYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFBvcnR1Z2FsLFRyaW5pdHkgQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jYWZiZjM3MzIwZTg0NDBiOTQyNWEwMmEyZTE1OTEyMS5zZXRDb250ZW50KGh0bWxfMjdjYjAzNTVhYjlhNGU5ZWI4MzM4NzNhNGY1NjBhZGEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjFhMDQ1Mjg5Y2E1NDA2NmI1MzUwMWJkMzdjYTQ0OWUuYmluZFBvcHVwKHBvcHVwX2NhZmJmMzczMjBlODQ0MGI5NDI1YTAyYTJlMTU5MTIxKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81NjNhOGUzNzVkMDc0MWZmYjg5ODI3NTljMWVjMjY3NCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYzNjg0NzIsIC03OS40MjgxOTE0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjODAwMGZmIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U3Mjg4OGVkYzkxYzRiMmVhODBlMWNmM2RhNDk1NjQ5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QxNDg0NzRmNjhjYTQ4ZDhhYjdkOWQwZjMwMmQ1NWQ4ID0gJChgPGRpdiBpZD0iaHRtbF9kMTQ4NDc0ZjY4Y2E0OGQ4YWI3ZDlkMGYzMDJkNTVkOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFya2RhbGUgVmlsbGFnZSxFeGhpYml0aW9uIFBsYWNlLEJyb2NrdG9uIENsdXN0ZXIgMTwvZGl2PmApWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTcyODg4ZWRjOTFjNGIyZWE4MGUxY2YzZGE0OTU2NDkuc2V0Q29udGVudChodG1sX2QxNDg0NzRmNjhjYTQ4ZDhhYjdkOWQwZjMwMmQ1NWQ4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU2M2E4ZTM3NWQwNzQxZmZiODk4Mjc1OWMxZWMyNjc0LmJpbmRQb3B1cChwb3B1cF9lNzI4ODhlZGM5MWM0YjJlYTgwZTFjZjNkYTQ5NTY0OSkKICAgICAgICAgICAgOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTViZjBlZTc3ZjIyNGY1MGEzYTc5MzkyNDE3ODNlNDEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjE2MDgzLCAtNzkuNDY0NzYzM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiI2ZmYTI1NiIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjZmZhMjU2IiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lYWUwNGZjNzQxYjk0YTE5ODJjZmQwZjFiMWY0YWYyYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80ZWJiNWRiNGYxYWQ0YjUwOTBjNGRjMjNjMDUzZWVjMCA9ICQoYDxkaXYgaWQ9Imh0bWxfNGViYjVkYjRmMWFkNGI1MDkwYzRkYzIzYzA1M2VlYzAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpZ2ggUGFyayxUaGUgSnVuY3Rpb24gU291dGggQ2x1c3RlciA4PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lYWUwNGZjNzQxYjk0YTE5ODJjZmQwZjFiMWY0YWYyYS5zZXRDb250ZW50KGh0bWxfNGViYjVkYjRmMWFkNGI1MDkwYzRkYzIzYzA1M2VlYzApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTViZjBlZTc3ZjIyNGY1MGEzYTc5MzkyNDE3ODNlNDEuYmluZFBvcHVwKHBvcHVwX2VhZTA0ZmM3NDFiOTRhMTk4MmNmZDBmMWIxZjRhZjJhKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80MzFjYWM4Y2ZmZWY0N2MzOGZiNWQyZTQ5YTEwZTk5YyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODk1OTcsIC03OS40NTYzMjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgCiAgImNvbG9yIjogIiNmZjU2MmMiLCAKICAiZGFzaEFycmF5IjogbnVsbCwgCiAgImRhc2hPZmZzZXQiOiBudWxsLCAKICAiZmlsbCI6IHRydWUsIAogICJmaWxsQ29sb3IiOiAiI2ZmNTYyYyIsIAogICJmaWxsT3BhY2l0eSI6IDAuNywgCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAKICAibGluZUNhcCI6ICJyb3VuZCIsIAogICJsaW5lSm9pbiI6ICJyb3VuZCIsIAogICJvcGFjaXR5IjogMS4wLCAKICAicmFkaXVzIjogNSwgCiAgInN0cm9rZSI6IHRydWUsIAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDg2NDc2OTE5NGNmNDFhNWJmMzc1N2EyMTdmY2NkYTcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTQxZmFlY2MyNjJkNGU4MDlmNzQ4ZDY5NDUxMTFjMTggPSBMLnBvcHVwKHttYXhXaWR0aDogJzEwMCUnCiAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDFkYzFmM2Y4ZmYxNGQ3YTlhYWNhNjZiY2I2ZmZjOGQgPSAkKGA8ZGl2IGlkPSJodG1sX2QxZGMxZjNmOGZmMTRkN2E5YWFjYTY2YmNiNmZmYzhkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Sb25jZXN2YWxsZXMsUGFya2RhbGUgQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hNDFmYWVjYzI2MmQ0ZTgwOWY3NDhkNjk0NTExMWMxOC5zZXRDb250ZW50KGh0bWxfZDFkYzFmM2Y4ZmYxNGQ3YTlhYWNhNjZiY2I2ZmZjOGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDMxY2FjOGNmZmVmNDdjMzhmYjVkMmU0OWExMGU5OWMuYmluZFBvcHVwKHBvcHVwX2E0MWZhZWNjMjYyZDRlODA5Zjc0OGQ2OTQ1MTExYzE4KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mY2E4OTMxNzQzNWQ0MjBiYWIxYjA4NzYyMjE2ZTM0ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTU3MDYsIC03OS40ODQ0NDk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjZmY1NjJjIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiNmZjU2MmMiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzAxMDYwMmE4NTQ4YTRkYzA4MDU5MGFjYTRmNzcwODdhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY1MGVjYjVhYTNjMDRkMDBiMTlkYzFkOGNkNDUxODI4ID0gJChgPGRpdiBpZD0iaHRtbF82NTBlY2I1YWEzYzA0ZDAwYjE5ZGMxZDhjZDQ1MTgyOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UnVubnltZWRlLFN3YW5zZWEgQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wMTA2MDJhODU0OGE0ZGMwODA1OTBhY2E0Zjc3MDg3YS5zZXRDb250ZW50KGh0bWxfNjUwZWNiNWFhM2MwNGQwMGIxOWRjMWQ4Y2Q0NTE4MjgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZmNhODkzMTc0MzVkNDIwYmFiMWIwODc2MjIxNmUzNGQuYmluZFBvcHVwKHBvcHVwXzAxMDYwMmE4NTQ4YTRkYzA4MDU5MGFjYTRmNzcwODdhKQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yMzg4MzAxMzA4NDU0Y2FhYjIzNzJhZmNhZmMwZDEwMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2MjMwMTUsIC03OS4zODk0OTM4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsIAogICJjb2xvciI6ICIjZmY1NjJjIiwgCiAgImRhc2hBcnJheSI6IG51bGwsIAogICJkYXNoT2Zmc2V0IjogbnVsbCwgCiAgImZpbGwiOiB0cnVlLCAKICAiZmlsbENvbG9yIjogIiNmZjU2MmMiLCAKICAiZmlsbE9wYWNpdHkiOiAwLjcsIAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwgCiAgImxpbmVDYXAiOiAicm91bmQiLCAKICAibGluZUpvaW4iOiAicm91bmQiLCAKICAib3BhY2l0eSI6IDEuMCwgCiAgInJhZGl1cyI6IDUsIAogICJzdHJva2UiOiB0cnVlLCAKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ4NjQ3NjkxOTRjZjQxYTViZjM3NTdhMjE3ZmNjZGE3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc2ODQ5ZWJiZTY1ZDRmZGQ5YmQxZTkyNTMwZjY2OGRiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICcxMDAlJwogICAgICAgICAgICAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q1YWQwMjVhNTU5MzQ4MTU5ZjRjNGE0MzMwYjg1MmU5ID0gJChgPGRpdiBpZD0iaHRtbF9kNWFkMDI1YTU1OTM0ODE1OWY0YzRhNDMzMGI4NTJlOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UXVlZW4mIzM5O3MgUGFyayBDbHVzdGVyIDk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzc2ODQ5ZWJiZTY1ZDRmZGQ5YmQxZTkyNTMwZjY2OGRiLnNldENvbnRlbnQoaHRtbF9kNWFkMDI1YTU1OTM0ODE1OWY0YzRhNDMzMGI4NTJlOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yMzg4MzAxMzA4NDU0Y2FhYjIzNzJhZmNhZmMwZDEwMS5iaW5kUG9wdXAocG9wdXBfNzY4NDllYmJlNjVkNGZkZDliZDFlOTI1MzBmNjY4ZGIpCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzYyNjk5Y2Q0OTNhMTQ1ODI5NDlkOGRiMWI4ZDM5YzI4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNzQzOSwgLTc5LjMyMTU1OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAKICAiY29sb3IiOiAiI2ZmNTYyYyIsIAogICJkYXNoQXJyYXkiOiBudWxsLCAKICAiZGFzaE9mZnNldCI6IG51bGwsIAogICJmaWxsIjogdHJ1ZSwgCiAgImZpbGxDb2xvciI6ICIjZmY1NjJjIiwgCiAgImZpbGxPcGFjaXR5IjogMC43LCAKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsIAogICJsaW5lQ2FwIjogInJvdW5kIiwgCiAgImxpbmVKb2luIjogInJvdW5kIiwgCiAgIm9wYWNpdHkiOiAxLjAsIAogICJyYWRpdXMiOiA1LCAKICAic3Ryb2tlIjogdHJ1ZSwgCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80ODY0NzY5MTk0Y2Y0MWE1YmYzNzU3YTIxN2ZjY2RhNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84ZTQ1YzZlMmM3Y2E0NjZmODQ5YTM3ZmNhMjkxZTAxNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMTAwJScKICAgICAgICAgICAgCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81YjgwMzI2ZWNiYzg0NTE2OTJhYTRkM2Q1MTE1MjQxNiA9ICQoYDxkaXYgaWQ9Imh0bWxfNWI4MDMyNmVjYmM4NDUxNjkyYWE0ZDNkNTExNTI0MTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJ1c2luZXNzIFJlcGx5IE1haWwgUHJvY2Vzc2luZyBDZW50cmUgOTY5IEVhc3Rlcm4gQ2x1c3RlciA5PC9kaXY+YClbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84ZTQ1YzZlMmM3Y2E0NjZmODQ5YTM3ZmNhMjkxZTAxNi5zZXRDb250ZW50KGh0bWxfNWI4MDMyNmVjYmM4NDUxNjkyYWE0ZDNkNTExNTI0MTYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjI2OTljZDQ5M2ExNDU4Mjk0OWQ4ZGIxYjhkMzljMjguYmluZFBvcHVwKHBvcHVwXzhlNDVjNmUyYzdjYTQ2NmY4NDlhMzdmY2EyOTFlMDE2KQogICAgICAgICAgICA7CgogICAgICAgICAgICAKICAgICAgICAKPC9zY3JpcHQ+\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x125e1cc90>"
      ]
     },
     "execution_count": 19,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# google map for k-means\n",
    "latitude = 43.6532\n",
    "longitude= -79.3832\n",
    "map_clusters = folium.Map(location=[latitude, longitude], zoom_start=11)\n",
    "#setting colour and markers standards (similar to New York lab)\n",
    "x = np.arange(kclusters)\n",
    "ys = [i+x+(i*x)**2 for i in range(kclusters)]\n",
    "colors_array = cm.rainbow(np.linspace(0, 1, len(ys)))\n",
    "rainbow = [colors.rgb2hex(i) for i in colors_array]\n",
    "markers_colors = []\n",
    "for lat, lon, poi, cluster in zip(toronto_merged['Latitude'], toronto_merged['Longitude'], toronto_merged['Neighbourhood'], toronto_merged['Cluster Labels']):\n",
    "    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lon],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color=rainbow[cluster-1],\n",
    "        fill=True,\n",
    "        fill_color=rainbow[cluster-1],\n",
    "        fill_opacity=0.7).add_to(map_clusters)\n",
    "       \n",
    "map_clusters"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 2",
   "language": "python",
   "name": "python2"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 2
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython2",
   "version": "2.7.10"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
